{
  "status": {
    "description": "",
    "state": "ACTIVE",
    "message_list": [],
    "resources": {
      "service_definition_list": [
        {
          "port_list": [],
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "b0dd32f1-831c-1724-23cb-3ba9dd7fce16",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "2b1298c4-c970-c850-2f8c-744d2557b46b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=ConfigureHAProxy; uuid=66dea4e7-1330-8f3b-46bc-6c4fc0aa03df}",
                      "@{kind=app_task; name=ConfigureKeepAlived; uuid=61e895f5-0e64-6685-9226-765be9690588}",
                      "@{kind=app_task; name=AhvAddPrivateInterface; uuid=b59226f1-edbb-cad8-9f57-c61300f53b93}",
                      "@{kind=app_task; name=ConfigurePrivateInterface; uuid=c258cf07-c6a7-c910-bd98-33f7e1a13390}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "1ca1b02b_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "66dea4e7-1330-8f3b-46bc-6c4fc0aa03df",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure haproxy.cfg\necho \"\nfrontend https_front\n  bind *:443\n  mode tcp\n  default_backend https_back\n\nbackend https_back\n  mode tcp\n  balance source\n  server pfsense @@{pfsense_ip}@@:443 check\" | sudo tee /etc/haproxy/haproxy.cfg\n\n\n# reload haproxy\nsudo systemctl restart haproxy",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigureHAProxy"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "61e895f5-0e64-6685-9226-765be9690588",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure keepalived.conf\necho \"# Global Settings for notifications\n\n# Define the script used to check if haproxy is still working\nvrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n}\n\n# Configuration for Virtual Interface\nvrrp_instance LB_VIP {\n    interface eth0\n    state MASTER        # set to BACKUP on the peer machine\n    priority 101        # set to  99 on the peer machine\n    virtual_router_id @@{hapropxy_virtual_router_id}@@\n\n    smtp_alert          # Enable Notifications Via Email\n\n    authentication {\n        auth_type AH\n        auth_pass @@{haproxy_auth_pwd}@@    # Password for accessing vrrpd. Same on all devices\n    }\n    unicast_src_ip @@{haproxy_master_ip}@@ # Private IP address of master\n    unicast_peer {\n        @@{haproxy_slave_ip}@@        # Private IP address of the backup haproxy\n   }\n\n    # The virtual ip address shared between the two loadbalancers\n    virtual_ipaddress {\n        @@{haproxy_virtual_ip}@@\n    }\n\n    # Use the Defined Script to Check whether to initiate a fail over\n    track_script {\n        chk_haproxy\n    }\n}\" | sudo tee /etc/keepalived/keepalived.conf\n\n# reload keepalived.conf\nsudo systemctl restart keepalived",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigureKeepAlived"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "b59226f1-edbb-cad8-9f57-c61300f53b93",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{Firewall.private_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".2\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "AhvAddPrivateInterface"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "c258cf07-c6a7-c910-bd98-33f7e1a13390",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# define functions\ncdr2mask () {\n   set -- $(( 5 - ($1 / 8) )) 255 255 255 255 $(( (255 << (8 - ($1 % 8))) & 255 )) 0 0 0\n   [ $1 -gt 1 ] && shift $1 || shift\n   echo ${1-0}.${2-0}.${3-0}.${4-0}\n}\n\n# define variables\nprivate_subnet_cidr=\"@@{private_subnet_cidr}@@\"\nbase_ip=$(echo $private_subnet_cidr | cut -d \".\" -f1-3)\nprivate_netmask=$(cdr2mask $(echo $private_subnet_cidr | cut -d \"/\" -f2))\nprivate_gw=$base_ip\".1\" \nprivate_ip=$base_ip\".2\"\n\n# configure interface eth1\necho \"\nIPADDR=$private_ip\nNETMASK=$private_netmask\nGATEWAY=$private_gw\nBOOTPROTO=static\nONBOOT=yes\nDEFROUTE=no\nDEVICE=eth1\" | sudo tee /etc/sysconfig/network-scripts/ifcfg-eth1\n\n# reload haproxy\nsudo systemctl restart network",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigurePrivateInterface"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "67ee6370-5b55-d017-cb7c-c7a404b968f7",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1ca1b02b_dag",
                  "uuid": "2b1298c4-c970-c850-2f8c-744d2557b46b"
                },
                "name": "2317cf77_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "2e79f3c4-9d32-8282-cd22-9e8b82df7736",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "9d5e1afa-6669-06e1-3364-de2acd7e26fe",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "14b66ed4_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "4f89310d-54d1-4ce9-358d-c4e44909ac4f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "14b66ed4_dag",
                  "uuid": "9d5e1afa-6669-06e1-3364-de2acd7e26fe"
                },
                "name": "b02e929c_runbook"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "75bf96e4-fe95-c7dd-7519-cdb4d3caaf43",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "0e950e9a-55a4-95dc-2126-b9f393931f03",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "b809e962_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "38277119-dcf8-1d7c-2c47-67249ac0e640",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b809e962_dag",
                  "uuid": "0e950e9a-55a4-95dc-2126-b9f393931f03"
                },
                "name": "f6f683a8_runbook"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "bff76e5d-5702-7b70-acd1-81c724b02428",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "6c48b74b-be3c-5a9c-b1b2-23bc969056b7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "8c3ab037_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "7f37fc51-f925-b46c-3a84-145e420a2f6d",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8c3ab037_dag",
                  "uuid": "6c48b74b-be3c-5a9c-b1b2-23bc969056b7"
                },
                "name": "7e76b9ef_runbook"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "9f452f1f-0bed-0b8e-673a-929e72d8ca45",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "149524ea-8717-369b-d60b-79d0c142764f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "78bedcd1_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "9e769254-3a8b-990c-42df-f5494d3c7a10",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "78bedcd1_dag",
                  "uuid": "149524ea-8717-369b-d60b-79d0c142764f"
                },
                "name": "d5e086e2_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "f4a82658-4d31-4261-befa-803de5c5e785",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "554f83a1-a7ca-4633-9b73-a0215c27299f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Service_Element_Delete_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=fefb3d93-bebd-48cc-a677-8772aec60760}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "fefb3d93-bebd-48cc-a677-8772aec60760",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Service_Element_Delete_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "39d7e51e-4fbc-44d3-ae12-79a8cd3bc9a1",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e",
                  "uuid": "554f83a1-a7ca-4633-9b73-a0215c27299f"
                },
                "name": "SYS_GEN__Runbook_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
              }
            }
          ],
          "message_list": [],
          "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e",
          "state": "ACTIVE",
          "depends_on_list": [
            {
              "kind": "app_service",
              "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a",
              "name": "Firewall"
            }
          ],
          "editables": {},
          "tier": "",
          "singleton": false,
          "variable_list": [],
          "name": "HAProxyMaster"
        },
        {
          "port_list": [],
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "603e5cc0-1c11-cbd5-6277-eaded148d0b5",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "7722dde3-7925-5c82-ad90-afd8c81407e6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=ConfigureHAProxy; uuid=bc35947f-b8c6-2400-b696-52cd76eff513}",
                      "@{kind=app_task; name=ConfigureKeepAlived; uuid=71222a78-24ea-5c10-3c78-594cf2cde290}",
                      "@{kind=app_task; name=AhvAddPrivateInterface; uuid=dce674d8-e2fc-6c30-ba91-1157f31347a4}",
                      "@{kind=app_task; name=ConfigurePrivateInterface; uuid=ce03a9c1-b8bd-2fae-ce6f-fb9edf6529a4}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "1ca1b02b_dag_cloned_1"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "bc35947f-b8c6-2400-b696-52cd76eff513",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure haproxy.cfg\necho \"\nfrontend https_front\n  bind *:443\n  mode tcp\n  default_backend https_back\n\nbackend https_back\n  mode tcp\n  balance source\n  server pfsense @@{pfsense_ip}@@:443 check\" | sudo tee /etc/haproxy/haproxy.cfg\n\n# reload haproxy\nsudo systemctl restart haproxy",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigureHAProxy"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "71222a78-24ea-5c10-3c78-594cf2cde290",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n\n# configure keepalived.conf\necho \"vrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n}\n\nvrrp_instance LB_VIP {\n    interface eth0\n    state BACKUP\n    priority 100\n    virtual_router_id @@{hapropxy_virtual_router_id}@@\n\n    smtp_alert\n\n    authentication {\n        auth_type AH\n        auth_pass @@{haproxy_auth_pwd}@@\n    }\n    unicast_src_ip @@{haproxy_slave_ip}@@ # Private IP address of the backup haproxy\n    unicast_peer {\n        @@{haproxy_master_ip}@@   # Private IP address of the master haproxy\n   }\n\n    virtual_ipaddress {\n        @@{haproxy_virtual_ip}@@\n    }\n\n    track_script {\n        chk_haproxy\n    }\n}\" | sudo tee /etc/keepalived/keepalived.conf\n\n# reload keepalived\nsudo systemctl restart keepalived",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigureKeepAlived"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "dce674d8-e2fc-6c30-ba91-1157f31347a4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{Firewall.private_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".3\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "AhvAddPrivateInterface"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "ce03a9c1-b8bd-2fae-ce6f-fb9edf6529a4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# define functions\ncdr2mask () {\n   set -- $(( 5 - ($1 / 8) )) 255 255 255 255 $(( (255 << (8 - ($1 % 8))) & 255 )) 0 0 0\n   [ $1 -gt 1 ] && shift $1 || shift\n   echo ${1-0}.${2-0}.${3-0}.${4-0}\n}\n\n# define variables\nprivate_subnet_cidr=\"@@{private_subnet_cidr}@@\"\nbase_ip=$(echo $private_subnet_cidr | cut -d \".\" -f1-3)\nprivate_netmask=$(cdr2mask $(echo $private_subnet_cidr | cut -d \"/\" -f2))\nprivate_gw=$base_ip\".1\" \nprivate_ip=$base_ip\".3\"\n\n# configure interface eth1\necho \"\nIPADDR=$private_ip\nNETMASK=$private_netmask\nGATEWAY=$private_gw\nBOOTPROTO=static\nONBOOT=yes\nDEFROUTE=no\nDEVICE=eth1\" | sudo tee /etc/sysconfig/network-scripts/ifcfg-eth1\n\n# reload haproxy\nsudo systemctl restart network",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS; uuid=d89f97af-0959-01b1-f7f0-aa801d10909c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ConfigurePrivateInterface"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "97faa7da-aafd-035d-5f1b-a6e250ba61f7",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1ca1b02b_dag_cloned_1",
                  "uuid": "7722dde3-7925-5c82-ad90-afd8c81407e6"
                },
                "name": "2317cf77_runbook_cloned_0"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "d0df162c-9136-68cc-fa70-abc25c4975e8",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8b03f1ef-e9eb-84fa-b7c9-ab40fa3c249a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "14b66ed4_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d08a35db-2463-c41c-6f9b-c041c3d21879",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "14b66ed4_dag_cloned_1",
                  "uuid": "8b03f1ef-e9eb-84fa-b7c9-ab40fa3c249a"
                },
                "name": "b02e929c_runbook_cloned_0"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "6f469772-7a81-ce8e-28c9-8c65b1dccee5",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "cc26ac52-3dd0-fba8-a131-97008a1c8b28",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "b809e962_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "59afa07d-4068-5ab2-7510-8bf3e1faae87",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b809e962_dag_cloned_1",
                  "uuid": "cc26ac52-3dd0-fba8-a131-97008a1c8b28"
                },
                "name": "f6f683a8_runbook_cloned_0"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "81ff4df5-7100-bedc-0ed8-68b14e736c2b",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "5929b18c-083d-81d3-3a62-838a9702c265",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "8c3ab037_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a8c427f7-088e-18e9-0c79-c1b22032a1d0",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8c3ab037_dag_cloned_1",
                  "uuid": "5929b18c-083d-81d3-3a62-838a9702c265"
                },
                "name": "7e76b9ef_runbook_cloned_0"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "23f3d2f9-9e87-bda0-8d10-75ced697be63",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "5f8545db-1658-f173-683a-fbfb979a8054",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "78bedcd1_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "111a4a69-ef79-6d07-c9ea-3abb284b48d1",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "78bedcd1_dag_cloned_1",
                  "uuid": "5f8545db-1658-f173-683a-fbfb979a8054"
                },
                "name": "d5e086e2_runbook_cloned_0"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "f8809a33-b60c-4fd8-9a91-01ef4fd713aa",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "fbf98fe8-ea0c-445b-8462-8faaa39bfb9e",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Service_Element_Delete_744c3592_891c_de44_3722_cddb255ad7a2; uuid=1a5a637d-85e2-4130-971f-e5de72244440}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "1a5a637d-85e2-4130-971f-e5de72244440",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Service_Element_Delete_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "48ae37ff-653f-40e5-8584-3cfd0ed67c3b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Service_744c3592_891c_de44_3722_cddb255ad7a2",
                  "uuid": "fbf98fe8-ea0c-445b-8462-8faaa39bfb9e"
                },
                "name": "SYS_GEN__Runbook_Service_744c3592_891c_de44_3722_cddb255ad7a2"
              }
            }
          ],
          "message_list": [],
          "uuid": "744c3592-891c-de44-3722-cddb255ad7a2",
          "state": "ACTIVE",
          "depends_on_list": [
            {
              "kind": "app_service",
              "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a",
              "name": "Firewall"
            }
          ],
          "editables": {},
          "tier": "",
          "singleton": false,
          "variable_list": [],
          "name": "HAProxySlave"
        },
        {
          "port_list": [],
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "978db9f3-c777-2592-6f9c-97893f9957dc",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "adfb2cfb-21d4-b45a-2e27-d4b195e8ed38",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=CreatePrivateAhvNetwork; uuid=1d2c90c2-cbfe-39bb-436c-6ecda7c95923}",
                      "@{kind=app_task; name=CalmUpdateSubnetsProject; uuid=474ecfa5-40ba-ac7b-0153-71039b84f9a2}",
                      "@{kind=app_task; name=FirewallCreateVlanPrivate; uuid=69a413be-d22e-bc80-b7c6-1960d922ef77}",
                      "@{kind=app_task; name=FirewallFwRuleAllowIcmp; uuid=7c56cfbd-5b06-ac0f-cf73-6ae12654f682}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "1d0a5fa7_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "1d2c90c2-cbfe-39bb-436c-6ecda7c95923",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-private\"\nahv_vlan_id = \"@@{private_subnet_vlan_id}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0]\n#ahv_network_prefix = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\npayload = {\n    \"name\": ahv_network_name,\n    \"vlanId\": ahv_vlan_id\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nprint(\"private_network_uuid={}\".format(resp_parse['networkUuid']))\n# endregion",
                      "eval_variables": "private_network_uuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "CreatePrivateAhvNetwork"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "474ecfa5-40ba-ac7b-0153-71039b84f9a2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{private_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "CalmUpdateSubnetsProject"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "69a413be-d22e-bc80-b7c6-1960d922ef77",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateVlanInterface\n# description:  Create a VLAN interface and assign to the LAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\nvlan_net_cidr = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nvlan_net_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nvlan_net_ip = vlan_net_address[0] + \".\" + vlan_net_address[1] + \".\" + vlan_net_address[2] + \".1\"\nvlan_tag = \"@@{private_subnet_vlan_id}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor int in resp_parse['data']:\n    if \"lan\" in int['name']:\n        lan_if = int['if']\n# endregion\n\n# region create VLAN\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/vlan\"\nmethod = \"POST\"\npayload = {\n    \"if\": lan_if,\n    \"tag\": vlan_tag,\n    \"descr\": \"VLAN private \"+vlan_tag+\"\"\n\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n\n# region create VLAN interface assignment\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\nvlan_if = \"{}.{}\".format(lan_if,vlan_tag)\npayload = {\n    \"id\": vlan_if, \n    \"if\": vlan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": vlan_net_ip,\n    \"subnet\": vlan_net_cidr,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregionp"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "FirewallCreateVlanPrivate"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "7c56cfbd-5b06-ac0f-cf73-6ae12654f682",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseFwRuleAllowIcmp\n# description:  Allow ICMP traffic to the WAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor interface in resp_parse['data']:\n    last_lan_name = interface['name']\n# endregion\n\n# region create fw rule (allow ICMP)\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/firewall/rule\"\nmethod = \"POST\"\npayload = {\n    \"type\": \"pass\",\n    \"interface\": last_lan_name,\n    \"ipprotocol\": \"inet\",\n    \"protocol\": \"icmp\",\n    \"src\": \"any\",\n    \"dst\": \"any\",\n    \"top\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "FirewallFwRuleAllowIcmp"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "75256200-7ce8-6337-3344-39f40ddbb183",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1d0a5fa7_dag",
                  "uuid": "adfb2cfb-21d4-b45a-2e27-d4b195e8ed38"
                },
                "name": "7cb07e80_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "48f42b0c-01f7-205d-6364-866fad3367ba",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8f23818c-984a-5912-110f-7afea7fa50c8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "58eace38_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a0e02982-fc80-cdc7-410c-babb5f4b5758",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "58eace38_dag",
                  "uuid": "8f23818c-984a-5912-110f-7afea7fa50c8"
                },
                "name": "f4e26296_runbook"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "c108a7b7-e2a8-dd0c-03cf-3ad30683c515",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "f05d998a-9b26-6b62-cb26-d8212ce819d1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "b50d3ae6_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "af4accfb-5d3f-22b1-e25e-a996626ae789",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b50d3ae6_dag",
                  "uuid": "f05d998a-9b26-6b62-cb26-d8212ce819d1"
                },
                "name": "96645ce0_runbook"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "8e12e561-dc55-47c0-5a5e-5c2cd25d50af",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "172ada43-67b6-1e86-b940-3b51091c513c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "a23629c4_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "ddea70cd-163c-b3ea-02e1-b871e2e3b6bc",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "a23629c4_dag",
                  "uuid": "172ada43-67b6-1e86-b940-3b51091c513c"
                },
                "name": "81207776_runbook"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "45c12760-ed26-e88b-9136-105852f5af64",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ff815051-bbdb-f4a9-dcd7-10236eee774a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "2cf031cf_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "5192764c-742a-9bd7-3339-dc5ed3334e42",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "2cf031cf_dag",
                  "uuid": "ff815051-bbdb-f4a9-dcd7-10236eee774a"
                },
                "name": "7980a5d2_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "d6f0556b-0311-454e-a422-b7b9c6638c84",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "200f4be2-50ed-486c-a4ec-84a46fa1fe53",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Service_Element_Delete_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=abd0ad3a-271d-4da6-80e8-b7dc3ba4e41c}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "abd0ad3a-271d-4da6-80e8-b7dc3ba4e41c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Service_Element_Delete_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2c68089a-520f-4abc-bdab-f05a88996373",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a",
                  "uuid": "200f4be2-50ed-486c-a4ec-84a46fa1fe53"
                },
                "name": "SYS_GEN__Runbook_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
              }
            }
          ],
          "message_list": [],
          "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a",
          "state": "ACTIVE",
          "depends_on_list": [],
          "editables": {},
          "tier": "",
          "singleton": false,
          "variable_list": [
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "bda25341-73df-4017-c721-eb440004903d",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "tenant_network_uuid"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "79daeb94-5f29-511c-844e-e259c06d17d6",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "lan_network_uuid"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "6d6620d1-75f1-ccc3-c9a9-4bae26c97c37",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "private_network_uuid"
            }
          ],
          "name": "Firewall"
        }
      ],
      "substrate_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "message_list": [],
              "uuid": "25e3291a-b675-9f69-d286-f2b9ec8c5edc",
              "name": "pre_action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "348a37db-a4c5-6aa2-8d3e-e62ad1f33827",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "bf9afbcf_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "b9d092ad-e860-5a6d-0d66-b445748cd29a",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "bf9afbcf_dag",
                  "uuid": "348a37db-a4c5-6aa2-8d3e-e62ad1f33827"
                },
                "name": "04f9d1cd_runbook"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "eb341530-8471-8ce2-649b-08097f38018d",
              "name": "post_action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "3d8f6631-50f0-4a34-084e-8a995c249606",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "d5f08535_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "5a36927f-a232-2a4f-bdb4-205bf40ee386",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d5f08535_dag",
                  "uuid": "3d8f6631-50f0-4a34-084e-8a995c249606"
                },
                "name": "76e7db5f_runbook"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "5916a654-0e84-4ee0-bacf-50db7cdd08c9",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bac7e55e-efa7-49d1-bea2-c1fe4e48173c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Provision_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=62affc01-1c81-4e9a-9694-2d4291272b1c}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=dbad5623-b667-4af5-8103-cf6c07ec551e}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "PROVISION_NUTANIX",
                    "uuid": "62affc01-1c81-4e9a-9694-2d4291272b1c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-m",
                      "categories": "",
                      "availability_zone_reference": null,
                      "backup_policy": null,
                      "type": "",
                      "cluster_reference": null,
                      "resources": "@{nic_list=System.Object[]; parent_reference=; guest_tools=; num_vcpus_per_socket=1; num_sockets=1; serial_port_list=System.Object[]; gpu_list=System.Object[]; memory_size_mib=2048; power_state=ON; hardware_clock_timezone=; guest_customization=; type=; account_uuid=28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff; boot_config=; disk_list=System.Object[]}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Provision_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "dbad5623-b667-4af5-8103-cf6c07ec551e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c3225c6e-3309-4dfd-b609-acacdee1ca3f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "bac7e55e-efa7-49d1-bea2-c1fe4e48173c"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for powering on an application",
              "message_list": [],
              "uuid": "0a3c87fd-6bc1-45d2-af22-d0433335283b",
              "name": "action_poweron",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "7e743ac8-afb6-4c5e-bf63-1558d774485c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOn_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=7c078b4b-7cf5-42ba-8943-6d180665c64d}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=bf39801c-9a63-4799-8f5f-4487799c12e3}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "7c078b4b-7cf5-42ba-8943-6d180665c64d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweron",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOn_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "bf39801c-9a63-4799-8f5f-4487799c12e3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e28e4fcd-e631-4b6b-b132-48d2f71093ef",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "7e743ac8-afb6-4c5e-bf63-1558d774485c"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "6bb493c3-402f-4e61-8b39-37ad1df4aca0",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8e55dcfb-4b52-4fae-86e3-215729d89f8c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_Restart_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=5217c58e-fee7-40d8-9e56-b95536b64998}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=6a454b54-9669-4ed6-9dd5-38acef78a60c}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "5217c58e-fee7-40d8-9e56-b95536b64998",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_restart",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_Restart_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "6a454b54-9669-4ed6-9dd5-38acef78a60c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxyMasterAHV_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e3a9c569-c6f6-4cc5-ad91-556a7fe0a868",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "8e55dcfb-4b52-4fae-86e3-215729d89f8c"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for suspending an application",
              "message_list": [],
              "uuid": "39d6a991-b534-49be-853e-dde6b00a10e3",
              "name": "action_suspend",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "1c577678-ae49-45e2-b5bb-7e2c8bff91bb",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "f7e32778-8bb3-489c-bbe0-5f7e2cfe2995",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "1c577678-ae49-45e2-b5bb-7e2c8bff91bb"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for modifying an application",
              "message_list": [],
              "uuid": "48e4f5c4-7572-4c99-a28a-362b8489f42b",
              "name": "action_modify",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "d5289c85-e62e-44f8-95fe-cf79d70cb120",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "32fde2ea-b5c9-4689-9bf5-da283a09fb02",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "d5289c85-e62e-44f8-95fe-cf79d70cb120"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for powering off an application",
              "message_list": [],
              "uuid": "d12f9d1e-8402-4fcf-94cd-a50a3a10544d",
              "name": "action_poweroff",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "72345058-b251-4120-b3b7-0487c106532e",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOff_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=d0b2d826-18f3-4823-a722-98b5be1dad5d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "d0b2d826-18f3-4823-a722-98b5be1dad5d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweroff",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOff_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d04a80fd-21b7-4c06-a7ae-5496ba882b9f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "72345058-b251-4120-b3b7-0487c106532e"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "d75e24a8-c3ac-4d2c-aada-8bc87c7dfb3a",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "634eb23f-a788-4054-9c8c-dbd1ba61d189",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=7cfd66bf-fa98-4971-9d9d-79fcf99612a1}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_NUTANIX",
                    "uuid": "7cfd66bf-fa98-4971-9d9d-79fcf99612a1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "0fd76c72-5233-4218-897a-535a12db9e26",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "634eb23f-a788-4054-9c8c-dbd1ba61d189"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "3076fd88-9135-45cf-a2d1-261b1cde1a25",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "291c5c25-bc13-4362-8384-b6c1f31ff3c2",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Soft_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=656e34b3-8851-41a1-9813-8f51eef8cb02}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_NUTANIX",
                    "uuid": "656e34b3-8851-41a1-9813-8f51eef8cb02",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Soft_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "713e3170-4894-4107-82d2-8d3d34e4b739",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "291c5c25-bc13-4362-8384-b6c1f31ff3c2"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "ff52386c-4cb9-4557-b7fa-93531800739a",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "0642dc30-cbb2-4ca0-8b44-2d61c875d0c6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Snapshot_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=918b1798-f6ef-488f-b787-f5e57d25674f}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VM_SNAPSHOT_DELETE_NUTANIX",
                    "uuid": "918b1798-f6ef-488f-b787-f5e57d25674f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_snapshot_delete",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Snapshot_Delete_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "58e8f753-1a14-409b-8bb4-814b60ee8d86",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "a0902b47-bbdf-4330-a077-94112a57b6b3",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "3867ab7c-def9-4374-8973-6b619f8ea347",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd",
                  "uuid": "0642dc30-cbb2-4ca0-8b44-2d61c875d0c6"
                },
                "name": "SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
              }
            }
          ],
          "message_list": [],
          "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd",
          "state": "ACTIVE",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "disable_readiness_probe": true,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "connection_port": 22,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "CENTOS",
              "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {}
            }
          },
          "os_type": "Linux",
          "type": "AHV_VM",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-m",
            "categories": {},
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{haproxy_master_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "parent_reference": null,
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "serial_port_list": [],
              "gpu_list": [],
              "memory_size_mib": 2048,
              "power_state": "ON",
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\ncloud_config_modules: \n  - resolv_conf\n  - runcmd\n  \nhostname: @@{name}@@\nfqdn: @@{name}@@.emeagso.local\n\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n\nwrite_files:\n  - path: /etc/sysconfig/network-scripts/ifcfg-eth0\n    content: |\n      IPADDR=@@{haproxy_master_ip}@@\n      NETMASK=@@{public_netmask}@@\n      GATEWAY=@@{public_gateway}@@\n      BOOTPROTO=static\n      ONBOOT=yes\n      DEVICE=eth0\nruncmd:\n  - [ifdown, eth0]\n  - [ifup, eth0]\n\nmanage_resolv_conf: true\nresolv_conf:\n  nameservers: ['@@{public_dns1}@@', '@@{public_dns2}@@']"
                },
                "type": "",
                "sysprep": null
              },
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "adapter_type": "SCSI",
                    "device_index": 0,
                    "type": ""
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "CentOS-7-x86_64-GenericCloud.qcow2",
                    "uuid": "41e413de-22e2-4af7-acfd-fe70e979d47b"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "device_type": "DISK",
                    "disk_address": {
                      "adapter_type": "SCSI",
                      "device_index": 0,
                      "type": ""
                    }
                  }
                }
              ]
            }
          },
          "variable_list": [],
          "name": "HAProxyMasterAHV"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "message_list": [],
              "uuid": "93075706-185d-3fb8-d769-62329c4a0111",
              "name": "pre_action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "99b9a767-9ce6-ba0c-bfab-6950dbb60784",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "bf9afbcf_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "122b5f9f-fbf5-6584-bdaf-8c7dc4819693",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "bf9afbcf_dag_cloned_1",
                  "uuid": "99b9a767-9ce6-ba0c-bfab-6950dbb60784"
                },
                "name": "04f9d1cd_runbook_cloned_0"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "4bab60f8-b484-a158-77a1-1bf3c7ddbebb",
              "name": "post_action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "9098ad3b-c899-b247-db88-c8582de521e6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "d5f08535_dag_cloned_1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "80362786-e92e-5022-2a57-b3b7f92c44fd",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d5f08535_dag_cloned_1",
                  "uuid": "9098ad3b-c899-b247-db88-c8582de521e6"
                },
                "name": "76e7db5f_runbook_cloned_0"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "c32f91fd-f8e4-43ee-9fea-85adba117a98",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "44008c11-52b0-4667-a6f7-89dbd243f701",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Provision_409becd5_8a73_a096_f799_7742d965b1fe; uuid=b972d8e2-b930-409c-9d26-a0d3036ea911}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe; uuid=c421c25c-4bfe-49ab-bc95-29b8388322e7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "PROVISION_NUTANIX",
                    "uuid": "b972d8e2-b930-409c-9d26-a0d3036ea911",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-s",
                      "categories": "",
                      "availability_zone_reference": null,
                      "backup_policy": null,
                      "type": "",
                      "cluster_reference": null,
                      "resources": "@{nic_list=System.Object[]; parent_reference=; guest_tools=; num_vcpus_per_socket=1; num_sockets=1; serial_port_list=System.Object[]; gpu_list=System.Object[]; memory_size_mib=2048; power_state=ON; hardware_clock_timezone=; guest_customization=; type=; account_uuid=28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff; boot_config=; disk_list=System.Object[]}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Provision_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "c421c25c-4bfe-49ab-bc95-29b8388322e7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "503015b4-2d58-4ce4-bd19-2c85d46d1d25",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "44008c11-52b0-4667-a6f7-89dbd243f701"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for powering on an application",
              "message_list": [],
              "uuid": "57d495ee-867b-4db4-966a-a59b63e1d73a",
              "name": "action_poweron",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "0058b41c-1a54-4951-b3ba-6b675c3ed648",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOn_409becd5_8a73_a096_f799_7742d965b1fe; uuid=f9db553a-7a64-4a49-8611-90bc76137f5d}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe; uuid=b12bef37-da85-4ccb-a40e-2c93c0b75467}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "f9db553a-7a64-4a49-8611-90bc76137f5d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweron",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOn_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "b12bef37-da85-4ccb-a40e-2c93c0b75467",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "8d2a0f25-74e1-4854-a006-63de989c48d7",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "0058b41c-1a54-4951-b3ba-6b675c3ed648"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "b9cae1c0-a431-4b21-bc87-33c88d275f14",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "1ecaa221-d10b-4d00-9275-b7508f00df3a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_Restart_409becd5_8a73_a096_f799_7742d965b1fe; uuid=5b05d761-0a7d-423d-b5f1-445b2db06705}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe; uuid=efbc1d61-2c0a-469b-9c59-1c756ff7aa22}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "5b05d761-0a7d-423d-b5f1-445b2db06705",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_restart",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_Restart_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "efbc1d61-2c0a-469b-9c59-1c756ff7aa22",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_HAProxySlaveAHV_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "8f06fe67-fcf3-4fe2-bd84-d3898e59e1d3",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "1ecaa221-d10b-4d00-9275-b7508f00df3a"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for suspending an application",
              "message_list": [],
              "uuid": "259fa26b-4519-4dc8-b984-60320aa452e9",
              "name": "action_suspend",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "91b587d1-e862-4726-b144-83fac21f6475",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c49c9410-d99c-47d1-917d-46b66b541925",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "91b587d1-e862-4726-b144-83fac21f6475"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for modifying an application",
              "message_list": [],
              "uuid": "2b699847-7325-47db-a518-5ed1cefd365d",
              "name": "action_modify",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "28aadaa6-1cff-489c-8005-6f48d2f612a1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "30af07b3-ffee-4bfd-b73c-d8f527671ee1",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "28aadaa6-1cff-489c-8005-6f48d2f612a1"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for powering off an application",
              "message_list": [],
              "uuid": "49c4d8de-9e18-4dd5-bb69-e6629b52596b",
              "name": "action_poweroff",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "93a8deef-ee40-4814-90ee-3d5b392658ec",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOff_409becd5_8a73_a096_f799_7742d965b1fe; uuid=c2532660-62a8-466c-a194-9b3f975eda05}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "c2532660-62a8-466c-a194-9b3f975eda05",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweroff",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOff_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "3c6c2def-8d1a-4f40-b55c-919106d9627c",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "93a8deef-ee40-4814-90ee-3d5b392658ec"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "95a614f4-7b3c-477b-8fde-09cd4a6ab3d4",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "f34f0640-e678-4068-8893-0d8e234e814a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Delete_409becd5_8a73_a096_f799_7742d965b1fe; uuid=3b83f2fa-706d-43d3-b854-69a1fb648007}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_NUTANIX",
                    "uuid": "3b83f2fa-706d-43d3-b854-69a1fb648007",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Delete_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "b58466b6-c290-4dd7-9408-91089bf04a6c",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "f34f0640-e678-4068-8893-0d8e234e814a"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "776f5823-7710-440d-a9f2-3a8431ec6abd",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "9091683d-15af-4ee9-b878-33a1a15d52a0",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Soft_Delete_409becd5_8a73_a096_f799_7742d965b1fe; uuid=de738097-1db8-4b40-b5b5-c7dd01bd4a5c}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_NUTANIX",
                    "uuid": "de738097-1db8-4b40-b5b5-c7dd01bd4a5c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Soft_Delete_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "6bd19bbb-9dda-43da-a1c1-ce2ed064c79e",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "9091683d-15af-4ee9-b878-33a1a15d52a0"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "57feca50-6de2-476b-baf7-358834b4df87",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "575975ef-49b5-4a1d-8a24-fe704c121c17",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Snapshot_Delete_409becd5_8a73_a096_f799_7742d965b1fe; uuid=ff602673-bdb5-47ba-8b26-41adc519baf2}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VM_SNAPSHOT_DELETE_NUTANIX",
                    "uuid": "ff602673-bdb5-47ba-8b26-41adc519baf2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_snapshot_delete",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Snapshot_Delete_409becd5_8a73_a096_f799_7742d965b1fe"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a80e21a9-9b69-48ba-9410-ef1d87586b39",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "ba4c792e-507e-41b2-a838-1befd3d75dde",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "b96607fe-d5b5-4d40-ac73-ffc8a568ec23",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_409becd5_8a73_a096_f799_7742d965b1fe",
                  "uuid": "575975ef-49b5-4a1d-8a24-fe704c121c17"
                },
                "name": "SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
              }
            }
          ],
          "message_list": [],
          "uuid": "409becd5-8a73-a096-f799-7742d965b1fe",
          "state": "ACTIVE",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "disable_readiness_probe": true,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "connection_port": 22,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "CENTOS",
              "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {}
            }
          },
          "os_type": "Linux",
          "type": "AHV_VM",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-s",
            "categories": {},
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{haproxy_slave_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "parent_reference": null,
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "serial_port_list": [],
              "gpu_list": [],
              "memory_size_mib": 2048,
              "power_state": "ON",
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\ncloud_config_modules: \n  - resolv_conf\n  - runcmd\n  \nhostname: @@{name}@@\nfqdn: @@{name}@@.emeagso.local\n\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n\nwrite_files:\n  - path: /etc/sysconfig/network-scripts/ifcfg-eth0\n    content: |\n      IPADDR=@@{haproxy_slave_ip}@@\n      NETMASK=@@{public_netmask}@@\n      GATEWAY=@@{public_gateway}@@\n      BOOTPROTO=static\n      ONBOOT=yes\n      DEVICE=eth0\nruncmd:\n  - [ifdown, eth0]\n  - [ifup, eth0]\n\nmanage_resolv_conf: true\nresolv_conf:\n  nameservers: ['@@{public_dns1}@@', '@@{public_dns2}@@']"
                },
                "type": "",
                "sysprep": null
              },
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "adapter_type": "SCSI",
                    "device_index": 0,
                    "type": ""
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "CentOS-7-x86_64-GenericCloud.qcow2",
                    "uuid": "41e413de-22e2-4af7-acfd-fe70e979d47b"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "device_type": "DISK",
                    "disk_address": {
                      "adapter_type": "SCSI",
                      "device_index": 0,
                      "type": ""
                    }
                  }
                }
              ]
            }
          },
          "variable_list": [],
          "name": "HAProxySlaveAHV"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "da2e3d8b-4cdf-4c60-8984-630b544c066a",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "92f53ad2-215b-4395-8f6a-ddd9b4f43eb4",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Provision_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=ed284f1e-7416-4aa7-8e6f-950e05474195}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=8ff41e2c-ed1c-4df4-9452-e433ac29a68a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "PROVISION_NUTANIX",
                    "uuid": "ed284f1e-7416-4aa7-8e6f-950e05474195",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-fw",
                      "categories": "",
                      "availability_zone_reference": null,
                      "backup_policy": null,
                      "type": "",
                      "cluster_reference": null,
                      "resources": "@{nic_list=System.Object[]; parent_reference=; guest_tools=; num_vcpus_per_socket=1; num_sockets=2; serial_port_list=System.Object[]; gpu_list=System.Object[]; memory_size_mib=4096; power_state=ON; hardware_clock_timezone=; guest_customization=; type=; account_uuid=28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff; boot_config=; disk_list=System.Object[]}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Provision_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "8ff41e2c-ed1c-4df4-9452-e433ac29a68a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a0c54493-8f17-4480-85c6-6fe354944434",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "92f53ad2-215b-4395-8f6a-ddd9b4f43eb4"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for powering on an application",
              "message_list": [],
              "uuid": "097c3527-e8c2-487f-9084-831e25aca485",
              "name": "action_poweron",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "153982b5-f248-4acd-9d9b-69dda6e9896d",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOn_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=54fb2194-527e-4a81-94c1-266d1b3e4b1c}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=c343e49e-c31f-46b8-9eeb-f1d1f84e1ff4}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "54fb2194-527e-4a81-94c1-266d1b3e4b1c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweron",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOn_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "c343e49e-c31f-46b8-9eeb-f1d1f84e1ff4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c78d1324-187a-43f5-834d-ef84ce77ec82",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "153982b5-f248-4acd-9d9b-69dda6e9896d"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "260e9c63-95e8-44a7-b0d1-cb6a0a0b9635",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b2c19728-5353-4722-914f-f37c0d006c77",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_Restart_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=bdf30d2f-2c3e-4270-b300-0e5c821ed002}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=4fbb350d-2e47-4a8e-a15e-7be327cb057b}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "bdf30d2f-2c3e-4270-b300-0e5c821ed002",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_restart",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_Restart_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "4fbb350d-2e47-4a8e-a15e-7be327cb057b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_FirewallAHV_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "efda5d00-4b1d-4de0-a142-a8a2d9a4c06e",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "b2c19728-5353-4722-914f-f37c0d006c77"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for suspending an application",
              "message_list": [],
              "uuid": "a6345a32-cf2e-429a-a517-bfce41a799be",
              "name": "action_suspend",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "c829b3be-557d-482a-ae5a-83041eab162f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "3b7109c7-65a7-41dd-83f3-ca63e2945332",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "c829b3be-557d-482a-ae5a-83041eab162f"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for modifying an application",
              "message_list": [],
              "uuid": "9192636c-a602-4dff-9555-264d1bbb069f",
              "name": "action_modify",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "e44e022a-ba86-4491-a27f-331fe5407d67",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e277f95c-1fba-438c-9a2b-677fce8c6b28",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "e44e022a-ba86-4491-a27f-331fe5407d67"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for powering off an application",
              "message_list": [],
              "uuid": "84d0b158-0e10-41a4-abfc-88e2cb5b2f35",
              "name": "action_poweroff",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ab3d9cea-961a-4cc0-961c-2605a637b2e4",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOff_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=d6d41014-1e0c-4fe5-8df4-fef178337041}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "d6d41014-1e0c-4fe5-8df4-fef178337041",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweroff",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOff_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a857b567-adca-46dd-98f9-1a0e7c77213b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "ab3d9cea-961a-4cc0-961c-2605a637b2e4"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "2647ea91-370c-4c28-8a91-4bef9dfcf98a",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "9feb6469-a784-4a5b-a29b-e4bda22ae99a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=a040cabc-94f3-445c-9324-c4368812ca70}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_NUTANIX",
                    "uuid": "a040cabc-94f3-445c-9324-c4368812ca70",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "ea6154ad-3943-4415-9309-af389e819ee3",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "9feb6469-a784-4a5b-a29b-e4bda22ae99a"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "6eaabf08-5c72-4d47-ba7a-ac6c60363f85",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "af5669f3-1fa9-4754-89dd-1be0be0c2208",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Soft_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=f257d285-aac4-4fd8-987f-18d516ec867a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_NUTANIX",
                    "uuid": "f257d285-aac4-4fd8-987f-18d516ec867a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Soft_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "06712307-8fbf-48df-a6ed-fb4b498642bc",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "af5669f3-1fa9-4754-89dd-1be0be0c2208"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "a70ca7b2-ef04-3e48-71ae-0f61539ff69b",
              "name": "pre_action_create",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "304100fd-c34a-e802-818d-5002fc0cb520",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "8b4f6248_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "cc48d25c-ea02-90b8-8b4c-e7810a67522f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8b4f6248_dag",
                  "uuid": "304100fd-c34a-e802-818d-5002fc0cb520"
                },
                "name": "d8132fd3_runbook"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "0e662604-65f1-a00a-306f-9fa2f52a2bf5",
              "name": "post_action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b7085975-6ed9-6ee0-0c33-80bbaa95af48",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=DeletePrivateAhvNetwork; uuid=79f40f41-0446-58b7-b595-c15e361dac0d}",
                      "@{kind=app_task; name=DeleteLanNetwork; uuid=6126ba57-81c8-b003-3590-b604c2994459}",
                      "@{kind=app_task; name=DelteAllTenantNetworks; uuid=d7837f35-206a-7f94-8ab9-486e819cb637}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "e904fd1f_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "79f40f41-0446-58b7-b595-c15e361dac0d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_uuid = \"@@{private_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region delete ahv network\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"DELETE\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "DeletePrivateAhvNetwork"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "6126ba57-81c8-b003-3590-b604c2994459",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region delete ahv network\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"DELETE\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "DeleteLanNetwork"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "d7837f35-206a-7f94-8ab9-486e819cb637",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nuser_network_uuid = \"@@{tenant_network_uuid}@@\"\narray_user_network_uuid = user_network_uuid.split(',')\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret,params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n#region processing\nfor ahv_network_uuid in array_user_network_uuid:\n    #region prepare api call\n    api_server_port = \"9440\"\n    api_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\n    url = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\n    method = \"DELETE\"\n    headers = { 'Content-Type': 'application/json','Accept': 'application/json'}\n    # endregion\n\n    #region make the api call\n    print(\"Making a {} API call to {}\".format(method, url))\n    resp = process_request(url, method, headers)\n#endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "DelteAllTenantNetworks"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "68d04be9-c527-49ef-edf6-3dd90f200140",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "e904fd1f_dag",
                  "uuid": "b7085975-6ed9-6ee0-0c33-80bbaa95af48"
                },
                "name": "5458122f_runbook"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "0458f04b-db84-4ed5-96c4-09b32953b59a",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "630bc523-9fa0-44a4-8eb2-99abfd0f5eaa",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Snapshot_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=9f186084-a2f3-4522-ad98-f818fbb1f48f}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VM_SNAPSHOT_DELETE_NUTANIX",
                    "uuid": "9f186084-a2f3-4522-ad98-f818fbb1f48f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_snapshot_delete",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Snapshot_Delete_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "59c8da56-8f83-404b-98e3-a74922bf45e8",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "72047f66-bc65-4c82-b0d6-24f0c9ccacc9",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "229ce6bf-8b1d-46f7-a485-e4e578314a80",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3",
                  "uuid": "630bc523-9fa0-44a4-8eb2-99abfd0f5eaa"
                },
                "name": "SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
              }
            }
          ],
          "message_list": [],
          "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3",
          "state": "ACTIVE",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "disable_readiness_probe": true,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "connection_port": 22
          },
          "editables": {},
          "os_type": "Linux",
          "type": "AHV_VM",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-fw",
            "categories": {},
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{pfsense_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "parent_reference": null,
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 2,
              "serial_port_list": [],
              "gpu_list": [],
              "memory_size_mib": 4096,
              "power_state": "ON",
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config"
                },
                "type": "",
                "sysprep": null
              },
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "adapter_type": "SCSI",
                    "device_index": 0,
                    "type": ""
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "pfsense-base",
                    "uuid": "757b257e-e1f7-49e1-9307-93f7200a5170"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "device_type": "DISK",
                    "disk_address": {
                      "adapter_type": "SCSI",
                      "device_index": 0,
                      "type": ""
                    }
                  }
                }
              ]
            }
          },
          "variable_list": [],
          "name": "FirewallAHV"
        }
      ],
      "credential_definition_list": [
        {
          "username": "centos",
          "description": "",
          "state": "ACTIVE",
          "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "KEY",
          "name": "CENTOS"
        },
        {
          "username": "admin",
          "description": "",
          "state": "ACTIVE",
          "uuid": "ea23abb3-0175-690f-335e-93fb1f1bb482",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "pfsense"
        },
        {
          "username": "iz@emeagso.lab",
          "description": "",
          "state": "ACTIVE",
          "uuid": "7d7a5d3c-3e89-6862-e09e-cf788dd07116",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "pc"
        }
      ],
      "type": "USER",
      "app_profile_list": [
        {
          "deployment_create_list": [
            {
              "description": "",
              "action_list": [
                {
                  "description": "System action for creating an application",
                  "message_list": [],
                  "uuid": "24c866f4-586b-429e-b386-aeda652a2aa1",
                  "name": "action_create",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=18186df4-717b-47de-bd57-190a6dbf836d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CREATE_DEPLOYMENT_ELEMENT; uuid=b870db9f-e08c-4d3d-adc3-4ae079404793; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Provision_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=b903dd01-f4e2-45e7-aeb6-6866b549523f; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__pre_create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=74ad00b3-618d-498e-88cc-a0e868215a27; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=b18260ac-0e5e-482b-bce5-4b4160526b74; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__install_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6387522c-cc94-4bfe-b2f8-84d2266a836c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=f21d0e0e-a924-4f42-8ecb-64f8557701dc; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "f1d00d55-234a-4398-ba05-e83948add34b",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "18186df4-717b-47de-bd57-190a6dbf836d"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for starting an application",
                  "message_list": [],
                  "uuid": "53f47a1d-01c0-4701-b990-ecde430f9ad4",
                  "name": "action_start",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=11454b30-0caa-4548-8fe3-aab38c18a7be; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=84298087-cc2c-4b9b-8976-c0b9541c42c8; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=ccabe62e-8eb9-44c8-b1d9-1b891dcd2637; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "6deb3bba-b681-4370-959d-4a88fdeed145",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "11454b30-0caa-4548-8fe3-aab38c18a7be"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for restarting an application",
                  "message_list": [],
                  "uuid": "8a700748-f71c-424f-9b80-29aa9ad9dbe1",
                  "name": "action_restart",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=f87d6050-9c27-4dcd-a6d7-f80d5cd0d5be; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=34bc83de-3e8f-407e-9c24-b4afd5720f9b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=b37ee571-2ed9-44db-b199-4467cf54256c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "bce805f3-263a-4b82-91a6-831e5272a628",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "f87d6050-9c27-4dcd-a6d7-f80d5cd0d5be"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for stopping an application",
                  "message_list": [],
                  "uuid": "b6dd8b73-a810-47e3-a0c1-f3946ad3edf8",
                  "name": "action_stop",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=cf162329-7eee-4a05-ad92-f414c72e14f7; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=694d4af7-e561-4197-a5cf-42b4ea1d9c47; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=26ad6344-3977-4d6c-a02e-6a8e1ec33fa5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "5fbd1911-ea30-4f12-8ad7-8c707e1ec4b7",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "cf162329-7eee-4a05-ad92-f414c72e14f7"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for deleting an application. Deletes created VMs as well",
                  "message_list": [],
                  "uuid": "936d7f36-50dd-4187-9c6b-0fb7ac5d8772",
                  "name": "action_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=321dc5cd-3a50-41fb-9bcf-35022e9b80b9; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=88b2beff-5f4c-415b-8b03-34e47559bfd4; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=9cfbb6f4-d8ab-42d7-b4b8-b3b78d8e4784; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=84a3317e-15c5-4520-923f-bfaa8803a04c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__uninstall_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=1da9c787-f3af-4056-a250-43313133ed3b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=5fcfc586-7866-4d1d-b5e4-d0150332459e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__post_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=DELETE_DEPLOYMENT_ELEMENT; uuid=7ccc49a8-19e5-4f70-b390-af00da73f777; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "b04c9c62-4962-48cf-8011-75c8b11e5ca6",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "321dc5cd-3a50-41fb-9bcf-35022e9b80b9"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for scaleout",
                  "message_list": [],
                  "uuid": "8719e8fd-0778-4ff6-bdc4-3b058b253373",
                  "name": "action_scaleout",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=27c32f2f-04da-414a-ae2c-2c26da8ae2e9; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=b871f342-b617-4d87-a6ae-88543e4fa950; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scaleout_89bc742a_ec5f_bc48_d3cb_7ecba7268398}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "4b6ce237-a408-4db2-be5d-47e9c9c3fae5",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=8d53bd4e-3788-4080-b7c0-8fde934f5a50; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "27c32f2f-04da-414a-ae2c-2c26da8ae2e9"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for scalein",
                  "message_list": [],
                  "uuid": "121dfd77-6104-4369-a1a9-9a114ebf02d0",
                  "name": "action_scalein",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=609012aa-40d0-48f4-9240-1db72c8b7a90; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=9900f7e6-07b6-414a-ab25-4a5e9407a08d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scalein_89bc742a_ec5f_bc48_d3cb_7ecba7268398}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "d85d741b-fd47-4d61-85e3-350690fc06c6",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=b0c97a2d-470c-464f-879d-da717b1f24e0; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "609012aa-40d0-48f4-9240-1db72c8b7a90"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for deleting an application. Does not delete created VMs",
                  "message_list": [],
                  "uuid": "ce817ae9-f9f9-4bec-a9bf-555b28afe07f",
                  "name": "action_soft_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=3f051058-e91b-4d51-b015-739ef7e9625c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=123be435-538c-4ac4-bc58-27cab13a5be7; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_ELEMENT; uuid=a9c8ed7d-94ba-4732-96b7-c9d7c59f2fc2; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Package_Element_Delete_8076c8a0_2649_9948_a4bd_b99ebf8ee959}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=0593180f-2dc7-46fe-9936-12758738fc0a; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_DEPLOYMENT_ELEMENT; uuid=74172f16-9aba-46ff-b4d3-1a8658ea06b7; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Soft_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "07ec7ccd-e8d6-436b-b94d-c82f51fb5697",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "3f051058-e91b-4d51-b015-739ef7e9625c"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                },
                {
                  "description": "System action for snapshot deletion",
                  "message_list": [],
                  "uuid": "f3d5b6a9-54e5-4b61-b03f-9fd29221b10b",
                  "name": "action_snapshot_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=9997bb69-4d6a-454a-bad4-3365e39a2c5d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=8bfb3798-10a5-4aee-9c1f-eff98a0ef971; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__snapshot_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "26704824-7314-499f-b781-941236ed498b",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=3420eee8-4960-4194-88bc-ed6780396120; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_id}",
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=c098b125-87df-4581-a233-64697b89b74d; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_group_id}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398",
                      "uuid": "9997bb69-4d6a-454a-bad4-3365e39a2c5d"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  }
                }
              ],
              "message_list": [],
              "published_service_local_reference_list": [],
              "uuid": "89bc742a-ec5f-bc48-d3cb-7ecba7268398",
              "default_replicas": "1",
              "min_replicas": "1",
              "state": "ACTIVE",
              "max_replicas": "1",
              "depends_on_list": [],
              "editables": {},
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package1",
                  "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "HAProxyMasterAHV",
                "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
              },
              "type": "GREENFIELD",
              "options": {},
              "variable_list": [],
              "name": "5028772f_deployment"
            },
            {
              "description": "",
              "action_list": [
                {
                  "description": "System action for creating an application",
                  "message_list": [],
                  "uuid": "821f633a-8e8d-4145-9bc2-ad95e97bbb5f",
                  "name": "action_create",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=31d443ba-9a14-4712-89df-5e2337965f1e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CREATE_DEPLOYMENT_ELEMENT; uuid=505616e9-3ec2-44b9-9b02-b92242d17f11; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Provision_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=de32e8fc-4079-4d42-8b4c-cb561c9bc42f; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__pre_create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=b9a27f3e-b2a0-4351-8b89-e5bc5d61c3f5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=fc496fae-eb76-411b-a558-3f8189de10c2; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__install_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=d332a186-abf6-4143-9479-952c8dd812c8; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=a6a58e48-cbf0-4b67-b9ae-821f48a9d47b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "3a27da9a-5773-442a-b082-86b3be9dfb77",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "31d443ba-9a14-4712-89df-5e2337965f1e"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for starting an application",
                  "message_list": [],
                  "uuid": "3f4bea76-d51c-4140-af49-17ebf19716c8",
                  "name": "action_start",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=0f5b0675-c691-4b84-824e-401d98529fa5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=08ea6631-8605-48e7-a568-2c31bfc39721; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=71d4952e-7a57-4057-98f2-44f615cc062b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "c3ab3019-a2f7-4e8f-b019-29f35a0cae0f",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "0f5b0675-c691-4b84-824e-401d98529fa5"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for restarting an application",
                  "message_list": [],
                  "uuid": "516307d7-5e93-439c-b0ae-756ec6163c0b",
                  "name": "action_restart",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=af3c2e20-cbcc-49d0-9d0f-46381e0c40cf; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=f9cedd2a-2122-47fa-bfec-fe20e10c6707; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=46458142-e330-44e8-b8d8-78faf84c976d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "f890f3cd-3f77-4a03-98a2-aae4a67471ae",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "af3c2e20-cbcc-49d0-9d0f-46381e0c40cf"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for stopping an application",
                  "message_list": [],
                  "uuid": "f1fc8ead-046e-4342-853b-7643e11a070c",
                  "name": "action_stop",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=6819204d-0925-4f43-b96a-5199742e1c24; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=7f21aa0d-ba12-451e-aa0c-2e3f3d7deccc; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=f36e97f6-9c50-48e0-b4b8-2bfdcabf000f; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "a51e59e5-e329-4e6e-ad5c-8e2ac53295c4",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "6819204d-0925-4f43-b96a-5199742e1c24"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for deleting an application. Deletes created VMs as well",
                  "message_list": [],
                  "uuid": "7dc85bc4-f62f-4dbc-862e-6292427c54c4",
                  "name": "action_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=f6e68308-40f7-483d-9ce6-cf664e063854; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=58d0a2ec-8fc5-4849-984e-9670707f93ec; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6a517465-f3a4-4aff-b05c-f2ec0e27b612; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=772df016-d2ae-414a-82b0-49efa5ce3322; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__uninstall_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=a28ab1d3-b878-49fd-896e-ca94eac0f562; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=44d16887-7d5e-4c6e-8f68-cb9ce4179dd0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__post_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=DELETE_DEPLOYMENT_ELEMENT; uuid=a3cfb1eb-20ef-49d2-9163-23b08f09248d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "8724fdfb-f51a-4f1c-94ea-d86a054de723",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "f6e68308-40f7-483d-9ce6-cf664e063854"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for scaleout",
                  "message_list": [],
                  "uuid": "3735ae12-9e80-4c02-bb40-a98b5d975280",
                  "name": "action_scaleout",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=48eab6f7-c8d4-491f-bb09-00c683892492; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=f6534813-2d61-40ac-8ddf-752cdcd9cd4e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scaleout_917bc609_6014_c775_2c2c_e0105f1fb7af}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "d91b0a31-e156-4526-8b7e-412dcd486ae8",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=aae60e89-2b5f-44a4-ba88-0064903093d3; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "48eab6f7-c8d4-491f-bb09-00c683892492"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for scalein",
                  "message_list": [],
                  "uuid": "6309040d-5542-46a3-9577-61d0c7692f4f",
                  "name": "action_scalein",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=4dca7515-be36-45b8-9144-7b222dd15b8c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=104fc59c-ff1a-4ae3-9dbb-67210e0545b5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scalein_917bc609_6014_c775_2c2c_e0105f1fb7af}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "f15621ce-fc17-4a5d-8553-70e2cac2e579",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=9af5089e-fc64-4ef8-8143-aa463528fff8; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "4dca7515-be36-45b8-9144-7b222dd15b8c"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for deleting an application. Does not delete created VMs",
                  "message_list": [],
                  "uuid": "efd7b0b6-6706-435b-a47e-75cc586a661f",
                  "name": "action_soft_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=2e082f4a-c6a3-4ff3-ab22-6e2b9de3f8d5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=ca590d3e-8596-49af-93b0-72d8e3370129; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_ELEMENT; uuid=d8079362-97f4-4cd1-a093-dfe62859b61e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Package_Element_Delete_0b8ebd1d_d4d5_bd35_c957_1e90994e118f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=325edd53-0e95-4ce9-8c4d-79e1708ceb2d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_DEPLOYMENT_ELEMENT; uuid=fef208fd-9630-4fa9-81ed-74b931bb5ff6; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Soft_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "e974e814-d2a2-4c4a-b53a-e15fa0e2d5c9",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "2e082f4a-c6a3-4ff3-ab22-6e2b9de3f8d5"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                },
                {
                  "description": "System action for snapshot deletion",
                  "message_list": [],
                  "uuid": "7f2fb922-206d-4ee5-90d3-f72547a963b2",
                  "name": "action_snapshot_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=fd19c9c1-13db-47f4-b133-fdf0ca17b97b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=9a61d845-fa4d-45c0-9bb3-b9f55820abb9; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__snapshot_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "4feaf9d1-32f6-403c-99f6-f3b59178f480",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=87588bee-1b5d-4a60-ac4d-4e71d1c963f0; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_id}",
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=a7589b08-f651-4124-b499-9b3c148db453; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_group_id}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af",
                      "uuid": "fd19c9c1-13db-47f4-b133-fdf0ca17b97b"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  }
                }
              ],
              "message_list": [],
              "published_service_local_reference_list": [],
              "uuid": "917bc609-6014-c775-2c2c-e0105f1fb7af",
              "default_replicas": "1",
              "min_replicas": "1",
              "state": "ACTIVE",
              "max_replicas": "1",
              "depends_on_list": [],
              "editables": {},
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package1_cloned_0",
                  "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "HAProxySlaveAHV",
                "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
              },
              "type": "GREENFIELD",
              "options": {},
              "variable_list": [],
              "name": "ef294948_deployment"
            },
            {
              "description": "",
              "action_list": [
                {
                  "description": "System action for creating an application",
                  "message_list": [],
                  "uuid": "d954217a-315d-41c1-ac3f-fd2add8c4f5d",
                  "name": "action_create",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=55cb7bcc-0aa3-4522-961b-1dfce4cea564; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CREATE_DEPLOYMENT_ELEMENT; uuid=07c9984d-cd58-40df-958e-59317bbbee19; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Provision_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=d0935307-f1c6-453f-81da-74da0074c649; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__pre_create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=3941bbab-82ee-42be-b6ba-f44940030421; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=c8adc2ca-ae97-4b47-84ed-b590c083b573; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__install_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6a62d449-4b3e-4213-8f4e-e17e22171ebe; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=eee57f5c-30f2-4755-8fa4-a6cd7ff84c7b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "067626af-f1cb-486f-b218-d68b45578621",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "55cb7bcc-0aa3-4522-961b-1dfce4cea564"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for starting an application",
                  "message_list": [],
                  "uuid": "4c140f0a-44f0-4394-a523-8dda60284f38",
                  "name": "action_start",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=c73e80a9-8d2b-42f3-8b24-dc59dbe57dc1; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=ec06b201-1077-45b9-842f-673ad8155528; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=25976c06-a538-4517-8bcb-b15e03181d72; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "9312773a-6522-47a9-a531-fbaadbe47657",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "c73e80a9-8d2b-42f3-8b24-dc59dbe57dc1"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for restarting an application",
                  "message_list": [],
                  "uuid": "9e597b46-7aee-43c8-b3c5-a238c809fe33",
                  "name": "action_restart",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=285211c2-180e-42eb-be0f-c929d863b79d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=2bb2cbc3-0346-4286-8ba1-7b27a42775c5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=43d96c84-13a9-4e7c-84f8-2b36dcf91b8b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "d35e5a25-6f46-49fd-ad4c-5af4ec9ee50a",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "285211c2-180e-42eb-be0f-c929d863b79d"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for stopping an application",
                  "message_list": [],
                  "uuid": "926b7971-f448-4299-94ee-6d49149c138c",
                  "name": "action_stop",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=0ba3f1d4-22a0-4884-b422-629dd182fb48; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=501d8cef-1525-4223-bb84-14963d8f9f15; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=0910080d-38b7-4ffb-bbc9-f3c08c9cf730; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "22fdf784-e352-4811-a8dd-ea06dc1fb0b4",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "0ba3f1d4-22a0-4884-b422-629dd182fb48"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for deleting an application. Deletes created VMs as well",
                  "message_list": [],
                  "uuid": "b1d80726-89c7-4546-aab6-1bf2820a2088",
                  "name": "action_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=a2cbc232-fd41-452d-a9d0-00e0f5d17d51; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=93f7b560-3c18-4e6c-9714-dc54bc9dfd98; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=7022d181-3230-40a8-8905-4f8157b6cc5c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=5a933741-4dfc-47f8-af40-1a49ee2ee328; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__uninstall_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=7ef79520-0ac4-4e2d-b234-daff1a8d4c5e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=5737a6da-ec9a-41c8-95f5-6ee639fae9db; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__post_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=DELETE_DEPLOYMENT_ELEMENT; uuid=56f3002a-c6c6-414c-b6cb-62a1d3da44ea; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Delete_ec28ae00_845b_2e9a_051c_5c216f442796}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "9e1c5447-b86b-424b-aa32-aa35773f0eb6",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "a2cbc232-fd41-452d-a9d0-00e0f5d17d51"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for scaleout",
                  "message_list": [],
                  "uuid": "d5436684-8902-4e6b-92bd-ee0f770ded37",
                  "name": "action_scaleout",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=23ae07f0-c92b-44c2-8ee1-b467ea682f7c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=f918a0bf-9c97-4340-a6a0-f0d029f8f228; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scaleout_ec28ae00_845b_2e9a_051c_5c216f442796}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "27353b82-2a4a-4a12-bdd7-487c0121cd87",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=862e2ed3-8a35-4c02-b291-f618eb557a60; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "23ae07f0-c92b-44c2-8ee1-b467ea682f7c"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for scalein",
                  "message_list": [],
                  "uuid": "84823bfd-96f8-425f-9418-bb58bc24f44a",
                  "name": "action_scalein",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=c97bfbb0-297b-4d88-b483-4a21a8029acc; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=76d3c768-ba25-462a-81aa-1f1b98424b86; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scalein_ec28ae00_845b_2e9a_051c_5c216f442796}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "da2d3773-cc6e-442c-b805-e20435124410",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=1c834c1e-518d-4822-b8c0-2993b374f8bc; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "c97bfbb0-297b-4d88-b483-4a21a8029acc"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for deleting an application. Does not delete created VMs",
                  "message_list": [],
                  "uuid": "97eac853-23f2-4c6e-8203-f2271cd3675e",
                  "name": "action_soft_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=e1955e85-291c-4876-a8ae-a352dae7e4a0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=e29b700b-ea70-4ca7-9952-bcb2c07535cd; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_ELEMENT; uuid=b4aa6f68-3cbe-4d5f-8b39-13116aec14d1; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Package_Element_Delete_f4bd29f7_1db8_800f_3ae7_615a09f7de1c}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=369702bf-ba5b-49ea-a180-868f28564789; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_DEPLOYMENT_ELEMENT; uuid=13c3acca-c7b2-4efa-809c-ca72508fb1c5; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Soft_Delete_ec28ae00_845b_2e9a_051c_5c216f442796}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "c75bf5e7-e801-435e-b73b-d36b09e8609c",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "e1955e85-291c-4876-a8ae-a352dae7e4a0"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                },
                {
                  "description": "System action for snapshot deletion",
                  "message_list": [],
                  "uuid": "1cf995a8-da28-4d67-b7db-b402160754e7",
                  "name": "action_snapshot_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=0ed2023b-06ed-4382-91a3-09f30541016a; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=875317f7-c4ed-41bd-b119-c2506f63d237; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__snapshot_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "4cf30be1-feb4-4036-b1aa-84f616c621dc",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=2959a3ab-db64-44db-9511-d81c5beb0c2e; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_id}",
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=316a00a2-4932-470c-89c1-a55fe15302af; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_group_id}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796",
                      "uuid": "0ed2023b-06ed-4382-91a3-09f30541016a"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                }
              ],
              "message_list": [],
              "published_service_local_reference_list": [],
              "uuid": "ec28ae00-845b-2e9a-051c-5c216f442796",
              "default_replicas": "1",
              "min_replicas": "1",
              "state": "ACTIVE",
              "max_replicas": "1",
              "depends_on_list": [],
              "editables": {},
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package3",
                  "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "FirewallAHV",
                "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
              },
              "type": "GREENFIELD",
              "options": {},
              "variable_list": [],
              "name": "090fbd28_deployment"
            }
          ],
          "environment_reference_list": [
            "f1e79bd6-8a96-3804-e88a-d66f20fee00d"
          ],
          "application_url": "",
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "26b9db95-ea4b-42da-bdad-b5ee7b8dbdde",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "90c7a3b1-a3e5-4a62-aa8c-8c6b1e5bfdba",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__DE_Provision_917bc609_6014_c775_2c2c_e0105f1fb7af; uuid=7f046eb0-540c-45af-a258-f1576c7c6fb4}",
                      "@{kind=app_task; name=SYS_GEN__DE_Provision_ec28ae00_845b_2e9a_051c_5c216f442796; uuid=98b5298d-16d3-49ab-a8f4-92d91d00812f}",
                      "@{kind=app_task; name=SYS_GEN__DE_Provision_89bc742a_ec5f_bc48_d3cb_7ecba7268398; uuid=fccfba57-e700-4f30-879e-640a486edbda}",
                      "@{kind=app_task; name=SYS_GEN__pre_create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=c6be7c1b-9a8c-406e-a6b0-1003d7a051d0}",
                      "@{kind=app_task; name=SYS_GEN__pre_create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=a93aed05-6b86-49ef-87e2-fbc004cc01a8}",
                      "@{kind=app_task; name=SYS_GEN__pre_create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=4952c43e-733f-4b94-ae03-d4c1498c7c4e}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=7158ed20-8da9-4934-b368-0d34f07ff8cf}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=dc4f261b-17d6-4403-ad65-dcbb8c6d5170}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=ecb3ae7c-26fb-434d-baf7-1e8b91d27dc6}",
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=a0936c3c-6596-4d70-bce4-7c98d474697c}",
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=51988612-bfd1-4ba8-af2f-694a44c48f2f}",
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=9f4671ff-3aad-4708-84d3-c10da5c80d80}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=9b352f37-6b6f-479b-b30e-d285889944c8}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=f1dbdb01-9c35-4615-841e-ebd72bf478c9}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=8ad50359-5ec3-4e17-bd96-c14a5a29fb14}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=922f0f41-fa6b-472e-b21c-a73d257a03cd}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=59021e8b-1bfe-465b-9138-cf706db96292}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=0e4568e6-1b9a-4e00-8763-18b65d6b3d67}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "                ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "ef294948_deployment",
                      "uuid": "917bc609-6014-c775-2c2c-e0105f1fb7af"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CREATE_DEPLOYMENT_ELEMENT",
                    "uuid": "7f046eb0-540c-45af-a258-f1576c7c6fb4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Provision_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "090fbd28_deployment",
                      "uuid": "ec28ae00-845b-2e9a-051c-5c216f442796"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CREATE_DEPLOYMENT_ELEMENT",
                    "uuid": "98b5298d-16d3-49ab-a8f4-92d91d00812f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Provision_ec28ae00_845b_2e9a_051c_5c216f442796"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "5028772f_deployment",
                      "uuid": "89bc742a-ec5f-bc48-d3cb-7ecba7268398"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CREATE_DEPLOYMENT_ELEMENT",
                    "uuid": "fccfba57-e700-4f30-879e-640a486edbda",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Provision_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c6be7c1b-9a8c-406e-a6b0-1003d7a051d0",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=04f9d1cd_runbook_cloned_0; uuid=122b5f9f-fbf5-6584-bdaf-8c7dc4819693}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__pre_create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "a93aed05-6b86-49ef-87e2-fbc004cc01a8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=d8132fd3_runbook; uuid=cc48d25c-ea02-90b8-8b4c-e7810a67522f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__pre_create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4952c43e-733f-4b94-ae03-d4c1498c7c4e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=04f9d1cd_runbook; uuid=b9d092ad-e860-5a6d-0d66-b445748cd29a}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__pre_create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "7158ed20-8da9-4934-b368-0d34f07ff8cf",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=503015b4-2d58-4ce4-bd19-2c85d46d1d25}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "dc4f261b-17d6-4403-ad65-dcbb8c6d5170",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=c3225c6e-3309-4dfd-b609-acacdee1ca3f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "ecb3ae7c-26fb-434d-baf7-1e8b91d27dc6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=a0c54493-8f17-4480-85c6-6fe354944434}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "a0936c3c-6596-4d70-bce4-7c98d474697c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=e13e5615-0c04-44ad-a1f0-3ca24d4bfc3b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "51988612-bfd1-4ba8-af2f-694a44c48f2f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=1f9622e0-2b4a-4f48-9c81-4e80581d423f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9f4671ff-3aad-4708-84d3-c10da5c80d80",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=f6479fc6-b526-4588-afef-f7b48b4667e6}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9b352f37-6b6f-479b-b30e-d285889944c8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7cb07e80_runbook; uuid=75256200-7ce8-6337-3344-39f40ddbb183}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f1dbdb01-9c35-4615-841e-ebd72bf478c9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=96645ce0_runbook; uuid=af4accfb-5d3f-22b1-e25e-a996626ae789}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8ad50359-5ec3-4e17-bd96-c14a5a29fb14",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2317cf77_runbook_cloned_0; uuid=97faa7da-aafd-035d-5f1b-a6e250ba61f7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "922f0f41-fa6b-472e-b21c-a73d257a03cd",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2317cf77_runbook; uuid=67ee6370-5b55-d017-cb7c-c7a404b968f7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "59021e8b-1bfe-465b-9138-cf706db96292",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook_cloned_0; uuid=59afa07d-4068-5ab2-7510-8bf3e1faae87}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0e4568e6-1b9a-4e00-8763-18b65d6b3d67",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook; uuid=38277119-dcf8-1d7c-2c47-67249ac0e640}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "9456fb85-8421-4ebb-9e69-c87da8d9de32",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "90c7a3b1-a3e5-4a62-aa8c-8c6b1e5bfdba"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "30ebf2fd-3c18-411b-94db-9650dc7a9abd",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "4dd6b481-352d-43f4-b578-c0570468c428",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=5ae9250a-d440-47a6-a9db-baf55cff95db}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=bbb6a628-f8a7-4e59-b384-731173edfc2a}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=2f24ef15-2941-452f-85b6-ae0f88984485}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=027f8399-58f3-41c1-ba99-858627dd4282}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=e3bca3d7-9b16-4c11-8e39-dc2e077e31c9}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=70ec83d2-7d78-4b06-a2c7-55dd3b4cb88b}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "    ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5ae9250a-d440-47a6-a9db-baf55cff95db",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=e28e4fcd-e631-4b6b-b132-48d2f71093ef}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "bbb6a628-f8a7-4e59-b384-731173edfc2a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=c78d1324-187a-43f5-834d-ef84ce77ec82}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "2f24ef15-2941-452f-85b6-ae0f88984485",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=8d2a0f25-74e1-4854-a006-63de989c48d7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "027f8399-58f3-41c1-ba99-858627dd4282",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=96645ce0_runbook; uuid=af4accfb-5d3f-22b1-e25e-a996626ae789}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e3bca3d7-9b16-4c11-8e39-dc2e077e31c9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook; uuid=38277119-dcf8-1d7c-2c47-67249ac0e640}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "70ec83d2-7d78-4b06-a2c7-55dd3b4cb88b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook_cloned_0; uuid=59afa07d-4068-5ab2-7510-8bf3e1faae87}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "21ef1b61-bea7-4452-b7ff-1f3417c84a68",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "4dd6b481-352d-43f4-b578-c0570468c428"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "c623a1f2-722c-4e5f-ae52-a4bf2fdab386",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "3834623c-b515-4030-843b-025721bef51f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=664d76ce-aec2-44f8-8734-f600cb45bb5e}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=d09dbbb0-d71d-45b2-95df-2df929fac702}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=970f5933-4c8b-4782-bdbe-ac2825d9d1e4}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=c06f6d4b-7cd7-49f0-813f-e668ff3fc093}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=499c2578-baad-4e79-b81d-a95161259be7}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=8f8f47aa-eef8-43f8-a023-3ed79fa2d49d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "    ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "664d76ce-aec2-44f8-8734-f600cb45bb5e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=efda5d00-4b1d-4de0-a142-a8a2d9a4c06e}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "d09dbbb0-d71d-45b2-95df-2df929fac702",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=8f06fe67-fcf3-4fe2-bd84-d3898e59e1d3}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "970f5933-4c8b-4782-bdbe-ac2825d9d1e4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=e3a9c569-c6f6-4cc5-ad91-556a7fe0a868}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c06f6d4b-7cd7-49f0-813f-e668ff3fc093",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7980a5d2_runbook; uuid=5192764c-742a-9bd7-3339-dc5ed3334e42}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "499c2578-baad-4e79-b81d-a95161259be7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=d5e086e2_runbook; uuid=9e769254-3a8b-990c-42df-f5494d3c7a10}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8f8f47aa-eef8-43f8-a023-3ed79fa2d49d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=d5e086e2_runbook_cloned_0; uuid=111a4a69-ef79-6d07-c9ea-3abb284b48d1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "6ec98956-1a14-45db-bc64-313e77a14b1a",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "3834623c-b515-4030-843b-025721bef51f"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "8fd384f1-23aa-4aa3-b0b5-a8c9239d98c3",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "1222aa4e-0c0c-45c0-bf95-dc7d6249feed",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=79d38409-ebe0-4fa6-8f94-615ffc3c50f1}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=ebe8c0f8-9d15-4cc2-bdf5-d1ed2f0c735c}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=9e71930b-b2a3-4374-b0f4-738bbadc0557}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=4116afa7-3a71-492e-8259-5c6038741dcb}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=21795852-1e06-4f31-9596-2c4e71f80d5d}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=c95f06fc-dade-406c-911d-6efba4b6cfad}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "    ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "79d38409-ebe0-4fa6-8f94-615ffc3c50f1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook_cloned_0; uuid=a8c427f7-088e-18e9-0c79-c1b22032a1d0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "ebe8c0f8-9d15-4cc2-bdf5-d1ed2f0c735c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook; uuid=7f37fc51-f925-b46c-3a84-145e420a2f6d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9e71930b-b2a3-4374-b0f4-738bbadc0557",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=d04a80fd-21b7-4c06-a7ae-5496ba882b9f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4116afa7-3a71-492e-8259-5c6038741dcb",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=3c6c2def-8d1a-4f40-b55c-919106d9627c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "21795852-1e06-4f31-9596-2c4e71f80d5d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=81207776_runbook; uuid=ddea70cd-163c-b3ea-02e1-b871e2e3b6bc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c95f06fc-dade-406c-911d-6efba4b6cfad",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=a857b567-adca-46dd-98f9-1a0e7c77213b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "059a91b8-ca69-491f-a0b4-d3674d9ab73a",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "1222aa4e-0c0c-45c0-bf95-dc7d6249feed"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "ae4ba20a-3144-4803-ae9e-e81b3305b9ed",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "86e0950a-e1c0-4557-bafa-e25ad2bc356f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=5b46b342-73f8-49e4-91db-c566102922a8}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=ea161024-115c-4978-ad37-c7654e047e5b}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=69d39454-3ba4-4ed0-9b19-7710e05a79ec}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=2f12d36f-64a2-435d-94c6-b4ea9f24179f}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=5813fdbe-30f2-47eb-aca3-2d2cf41c6c51}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=37edb9b7-7172-4123-bbbe-b2beb4b33295}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=53157516-787f-45d1-bfee-e8b6f643d323}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=2d59733f-6e51-4da0-8597-a7c6ef3986e1}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=4dfc9d03-826d-4dc3-b032-fc1e763282af}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=6e0af676-eafc-400f-a484-aeeee5a4ee7f}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=f3c4dcb3-b54c-42f1-aecd-848c0e32f589}",
                      "@{kind=app_task; name=SYS_GEN__post_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=d90da886-7ca6-4360-b491-8713e2483b5a}",
                      "@{kind=app_task; name=SYS_GEN__post_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=f242f669-ac5e-4013-a667-3348c54f7183}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=498688b9-a924-4fc2-a59a-2f3587ce4327}",
                      "@{kind=app_task; name=SYS_GEN__DE_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398; uuid=794129bf-d3aa-43b9-8262-37d9200b00de}",
                      "@{kind=app_task; name=SYS_GEN__DE_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af; uuid=d231e5a7-36ed-4a2a-aafc-fa66288eff0a}",
                      "@{kind=app_task; name=SYS_GEN__post_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=670fa86e-5c85-46d8-932f-edbebfdb82d7}",
                      "@{kind=app_task; name=SYS_GEN__DE_Delete_ec28ae00_845b_2e9a_051c_5c216f442796; uuid=871f9646-1907-428a-95f5-f47a25faa1f9}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "                ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5b46b342-73f8-49e4-91db-c566102922a8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook_cloned_0; uuid=a8c427f7-088e-18e9-0c79-c1b22032a1d0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "ea161024-115c-4978-ad37-c7654e047e5b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook; uuid=7f37fc51-f925-b46c-3a84-145e420a2f6d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "69d39454-3ba4-4ed0-9b19-7710e05a79ec",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=b02e929c_runbook; uuid=4f89310d-54d1-4ce9-358d-c4e44909ac4f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "2f12d36f-64a2-435d-94c6-b4ea9f24179f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=b02e929c_runbook_cloned_0; uuid=d08a35db-2463-c41c-6f9b-c041c3d21879}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5813fdbe-30f2-47eb-aca3-2d2cf41c6c51",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=81207776_runbook; uuid=ddea70cd-163c-b3ea-02e1-b871e2e3b6bc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "37edb9b7-7172-4123-bbbe-b2beb4b33295",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=cd5b0981-21b7-45d9-b773-c7b6eb4e92ca}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "53157516-787f-45d1-bfee-e8b6f643d323",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=1368d9f4-e319-426c-b6fa-773dbb35d6f2}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "2d59733f-6e51-4da0-8597-a7c6ef3986e1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f4e26296_runbook; uuid=a0e02982-fc80-cdc7-410c-babb5f4b5758}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4dfc9d03-826d-4dc3-b032-fc1e763282af",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=0fd76c72-5233-4218-897a-535a12db9e26}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "6e0af676-eafc-400f-a484-aeeee5a4ee7f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=b58466b6-c290-4dd7-9408-91089bf04a6c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f3c4dcb3-b54c-42f1-aecd-848c0e32f589",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=ae43f119-393f-4d32-a2db-29d75766ad2f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "d90da886-7ca6-4360-b491-8713e2483b5a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=76e7db5f_runbook; uuid=5a36927f-a232-2a4f-bdb4-205bf40ee386}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__post_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f242f669-ac5e-4013-a667-3348c54f7183",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=76e7db5f_runbook_cloned_0; uuid=80362786-e92e-5022-2a57-b3b7f92c44fd}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__post_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "498688b9-a924-4fc2-a59a-2f3587ce4327",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=ea6154ad-3943-4415-9309-af389e819ee3}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "5028772f_deployment",
                      "uuid": "89bc742a-ec5f-bc48-d3cb-7ecba7268398"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "794129bf-d3aa-43b9-8262-37d9200b00de",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "ef294948_deployment",
                      "uuid": "917bc609-6014-c775-2c2c-e0105f1fb7af"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "d231e5a7-36ed-4a2a-aafc-fa66288eff0a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "670fa86e-5c85-46d8-932f-edbebfdb82d7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=5458122f_runbook; uuid=68d04be9-c527-49ef-edf6-3dd90f200140}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__post_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "090fbd28_deployment",
                      "uuid": "ec28ae00-845b-2e9a-051c-5c216f442796"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "871f9646-1907-428a-95f5-f47a25faa1f9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Delete_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "323dc9df-2315-4431-9532-94ff7859dbd9",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "86e0950a-e1c0-4557-bafa-e25ad2bc356f"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "319713cb-5a45-4ae9-9e0e-32cdec460c9a",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "927ea3f4-05dd-46e7-9ce7-549e930334d1",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=a7fd036c-f339-4564-a900-cc5bbfa6ace5}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=5ebcea0c-6637-4d72-82e7-12e64736f40b}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=31baf7df-fda6-4d2a-87c6-e055a30dbe08}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=21db4290-bfda-4a16-af7c-49163344e282}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=3725cd9d-a780-4438-b831-f4edf7811272}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=5d741488-4e55-4ace-ae8a-ac65c07d626e}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=8eb028e6-dfc9-44eb-a29c-dbeb49ef3096}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=f34981e8-3a41-4d79-ad93-be32b0068290}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=9b2abe94-5911-4ac8-8e5f-3684b01dbfd7}",
                      "@{kind=app_task; name=SYS_GEN__DE_Soft_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398; uuid=49a53940-cdb9-42fe-a0ab-270527178e49}",
                      "@{kind=app_task; name=SYS_GEN__DE_Soft_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af; uuid=878e223d-86be-48c1-a472-86cb08111571}",
                      "@{kind=app_task; name=SYS_GEN__DE_Soft_Delete_ec28ae00_845b_2e9a_051c_5c216f442796; uuid=76a286a4-8bdf-429c-8b83-9991f0f5e35b}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "          ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "a7fd036c-f339-4564-a900-cc5bbfa6ace5",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=48ae37ff-653f-40e5-8584-3cfd0ed67c3b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5ebcea0c-6637-4d72-82e7-12e64736f40b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=39d7e51e-4fbc-44d3-ae12-79a8cd3bc9a1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "31baf7df-fda6-4d2a-87c6-e055a30dbe08",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=2c68089a-520f-4abc-bdab-f05a88996373}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "21db4290-bfda-4a16-af7c-49163344e282",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "3725cd9d-a780-4438-b831-f4edf7811272",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5d741488-4e55-4ace-ae8a-ac65c07d626e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=713e3170-4894-4107-82d2-8d3d34e4b739}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "8eb028e6-dfc9-44eb-a29c-dbeb49ef3096",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f34981e8-3a41-4d79-ad93-be32b0068290",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=6bd19bbb-9dda-43da-a1c1-ce2ed064c79e}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9b2abe94-5911-4ac8-8e5f-3684b01dbfd7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=06712307-8fbf-48df-a6ed-fb4b498642bc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "5028772f_deployment",
                      "uuid": "89bc742a-ec5f-bc48-d3cb-7ecba7268398"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "49a53940-cdb9-42fe-a0ab-270527178e49",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Soft_Delete_89bc742a_ec5f_bc48_d3cb_7ecba7268398"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "ef294948_deployment",
                      "uuid": "917bc609-6014-c775-2c2c-e0105f1fb7af"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "878e223d-86be-48c1-a472-86cb08111571",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Soft_Delete_917bc609_6014_c775_2c2c_e0105f1fb7af"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "090fbd28_deployment",
                      "uuid": "ec28ae00-845b-2e9a-051c-5c216f442796"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "76a286a4-8bdf-429c-8b83-9991f0f5e35b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Soft_Delete_ec28ae00_845b_2e9a_051c_5c216f442796"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "88501bdc-5fa5-4855-aeda-f68ef9bd00ac",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "927ea3f4-05dd-46e7-9ce7-549e930334d1"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "d32c9f28-f855-87e1-77dd-9d406666c9cc",
              "name": "CreateNewVLan",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "user",
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "646762c3-b41f-ce27-d61d-3353e7ebfb0c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=AhvCreateNewVlan; uuid=3fccf384-4221-fda0-65d9-cef6cbdb06cf}",
                      "@{kind=app_task; name=FirewallCreateNewVlan; uuid=2a1405e6-2a26-907a-9036-dc7c6dc765af}",
                      "@{kind=app_task; name=CalmUpdateSubnetsProject; uuid=d1286d77-591c-554e-5469-f231a35fd679}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "662ca7b6_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "3fccf384-4221-fda0-65d9-cef6cbdb06cf",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-@@{tenant_subnet_name}@@\"\nahv_vlan_id = \"@@{tenant_subnet_vlan_id}@@\"\nahv_network_prefix = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[1]\nahv_network_address = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0]\nahv_network_split = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nahv_network_ip = ahv_network_split[0] + \".\" + ahv_network_split[1] + \".\" + ahv_network_split[2] + \".1\"\ntenant_network_uuid = \"@@{tenant_network_uuid}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\n\n# Compose the json payload\npayload = {\n    \"name\":ahv_network_name,\n    \"vlanId\":ahv_vlan_id,\n    \"ipConfig\":{\n    \"networkAddress\": ahv_network_address,\n    \"prefixLength\": ahv_network_prefix\n    }\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nnew_network_uuid= resp_parse['networkUuid']\nif (tenant_network_uuid):\n    tenant_network_uuid=tenant_network_uuid + \",\" + new_network_uuid\nelse:\n    tenant_network_uuid=new_network_uuid\n\nprint(\"tenant_network_uuid={}\".format(tenant_network_uuid))\n#endregion",
                      "eval_variables": "tenant_network_uuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "AhvCreateNewVlan"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "2a1405e6-2a26-907a-9036-dc7c6dc765af",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateVlanInterface\n# description:  Create a VLAN interface and assign to a the LAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\nvlan_net_cidr = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[1]\nvlan_net_address = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nvlan_net_ip = vlan_net_address[0] + \".\" + vlan_net_address[1] + \".\" + vlan_net_address[2] + \".1\"\nvlan_tag = \"@@{tenant_subnet_vlan_id}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor int in resp_parse['data']:\n    if \"lan\" in int['name']:\n        lan_if = int['if']\n\n# endregion\n\n# region create VLAN\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/vlan\"\nmethod = \"POST\"\npayload = {\n    \"if\": lan_if,\n    \"tag\": vlan_tag,\n    \"descr\": \"VLAN \"+vlan_tag+\"\"\n\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n\n# region create VLAN interface assignment\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\nvlan_if = \"{}.{}\".format(lan_if,vlan_tag)\npayload = {\n    \"id\": vlan_if, \n    \"if\": vlan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": vlan_net_ip,\n    \"subnet\": vlan_net_cidr,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "FirewallCreateNewVlan"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "d1286d77-591c-554e-5469-f231a35fd679",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{tenant_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "CalmUpdateSubnetsProject"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "1b425618-be8c-8ee1-0da0-4b601258adfa",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "ec3ea0fe-f066-799e-f76a-6db0737bb905",
                    "value": "",
                    "label": "Enter VLAN Network CIDR (example: 192.168.1.0/24)",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "tenant_subnet_cidr"
                  },
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "c64eb354-00b4-a1b8-5d3a-f7e2952a593e",
                    "value": "",
                    "label": "Enter VLAN ID (example: 88)",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "tenant_subnet_vlan_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "7599c8ae-6174-d697-a669-cc29c6e841ea",
                    "value": "",
                    "label": "Enter VLAN name (example: myvlan)",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "tenant_subnet_name"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "662ca7b6_dag",
                  "uuid": "646762c3-b41f-ce27-d61d-3353e7ebfb0c"
                },
                "name": "bebdc88f_runbook"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "4fd02251-20b9-4b20-99b5-e766bbd82366",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "AHV",
                      "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "d174ff59-fed9-48a1-b103-35c42ffe96bc",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__snapshot_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=4ae0bd78-6671-44a6-9055-dab371be45c0}",
                      "@{kind=app_task; name=SYS_GEN__snapshot_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=27639464-db89-4dc2-9b44-22b32aceff10}",
                      "@{kind=app_task; name=SYS_GEN__snapshot_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=e8b270d0-88a4-406f-8c1f-29440182462a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV",
                      "uuid": "409becd5-8a73-a096-f799-7742d965b1fe"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4ae0bd78-6671-44a6-9055-dab371be45c0",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=ef294948_deployment; uuid=917bc609-6014-c775-2c2c-e0105f1fb7af}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_409becd5_8a73_a096_f799_7742d965b1fe; uuid=a80e21a9-9b69-48ba-9410-ef1d87586b39}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__snapshot_delete_CRb_Substrate_409becd5_8a73_a096_f799_7742d965b1fe"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV",
                      "uuid": "297777d0-538e-a57c-07fe-a699bb4c1ec3"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "27639464-db89-4dc2-9b44-22b32aceff10",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=090fbd28_deployment; uuid=ec28ae00-845b-2e9a-051c-5c216f442796}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3; uuid=59c8da56-8f83-404b-98e3-a74922bf45e8}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__snapshot_delete_CRb_Substrate_297777d0_538e_a57c_07fe_a699bb4c1ec3"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV",
                      "uuid": "a37afb87-a43b-fd3f-7a9f-e983e03903dd"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e8b270d0-88a4-406f-8c1f-29440182462a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=5028772f_deployment; uuid=89bc742a-ec5f-bc48-d3cb-7ecba7268398}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd; uuid=58e8f753-1a14-409b-8bb4-814b60ee8d86}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__snapshot_delete_CRb_Substrate_a37afb87_a43b_fd3f_7a9f_e983e03903dd"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "21968eff-25ba-45bb-a29c-324358ac48b0",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "e45bfd4f-2217-4921-b1d1-58c1c380d4dc",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "4c8a1d48-fab9-4785-b905-cbeaa159a166",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_29ac0575_ef37_dc49_18e5_3cdb00286855",
                  "uuid": "d174ff59-fed9-48a1-b103-35c42ffe96bc"
                },
                "name": "SYS_GEN__Runbook_Application_29ac0575_ef37_dc49_18e5_3cdb00286855"
              }
            }
          ],
          "message_list": [],
          "uuid": "29ac0575-ef37-dc49-18e5-3cdb00286855",
          "dependency_list": [
            {
              "getter_resource_kind": "ServiceCfg",
              "setter_resource_attr": "private_network_uuid",
              "setter_resource_kind": "ServiceCfg",
              "setter_resource_name": "Firewall",
              "action_name": "action_create",
              "action_resource_name": "AHV",
              "getter_resource_name": "HAProxySlave",
              "action_resource_kind": "ApplicationCfg"
            },
            {
              "getter_resource_kind": "ServiceCfg",
              "setter_resource_attr": "private_network_uuid",
              "setter_resource_kind": "ServiceCfg",
              "setter_resource_name": "Firewall",
              "action_name": "action_create",
              "action_resource_name": "AHV",
              "getter_resource_name": "HAProxyMaster",
              "action_resource_kind": "ApplicationCfg"
            }
          ],
          "snapshot_config_list": [],
          "state": "ACTIVE",
          "patch_list": [],
          "restore_config_list": [],
          "variable_list": [
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "90f01df8-3cc0-7ce0-12fc-6952d0115674",
              "value": "10.68.97.5",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "public_dns2"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "750807c2-26fe-73f2-ab7f-055e12548c00",
              "value": "10.68.97.4",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "public_dns1"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "195d0138-d1f1-b583-401a-0210f23654e3",
              "value": "10.68.98.1",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "public_gateway"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "7403d2c4-e116-bca9-9953-cebd632fbac8",
              "value": "255.255.255.0",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "public_netmask"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "507f323d-d184-897b-7a17-d8b510001d67",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "tenant_network_uuid"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "ac5cc953-86bc-7d65-e50a-f9093cc330c4",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "lan_network_uuid"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "fe76c5a0-ff5f-e76e-af14-7900c4e03c50",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "private_network_uuid"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^[\\d]*$"
              },
              "val_type": "INT",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "b02c6776-a691-1982-e45e-f65683c0dc4c",
              "value": "",
              "label": "Enter Private Subnet VLAN ID (example: 10)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "private_subnet_vlan_id"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(?:/\\d{1,2}|)"
              },
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "f81dfdd1-feef-5119-b30c-dbfdabeb6fb0",
              "value": "",
              "label": "Enter Private Subnet CIDR (example: 10.10.10.0/24)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "private_subnet_cidr"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "97dc7848-4f00-a2e8-99b1-e893e24407c6",
              "value": "10.68.97.150",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "pc_ip"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "8d644768-6f67-6f83-d456-d0532335402d",
              "value": "51",
              "label": "Virtual Router ID?",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "hapropxy_virtual_router_id"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "ee32c4d3-9645-3d4d-9291-d3b95c93d5e9",
              "value": "",
              "label": "Password for accessing vrrpd",
              "state": "ACTIVE",
              "attrs": {
                "is_secret_modified": false,
                "secret_reference": {
                  "uuid": "2c5f5838-3547-4810-9b75-fabf1f9b5f77"
                },
                "type": "SECRET"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "SECRET",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "haproxy_auth_pwd"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "2217750c-4c35-3144-56ed-21a61db1c4cb",
              "value": "",
              "label": "Enter HAproxy Slave IP address (example: 192.168.1.1)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "haproxy_slave_ip"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "1f8d28ec-ab3c-2290-c3ac-74f911b31696",
              "value": "",
              "label": "Enter HAproxy Master IP address (example: 192.168.1.1)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "haproxy_master_ip"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "71c54201-0598-d327-895a-8b5cf8dbe996",
              "value": "",
              "label": "Enter HAproxy Virtual IP address (example: 192.168.1.1)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "haproxy_virtual_ip"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "d52c750f-7c6a-1aa1-645a-c256a271adda",
              "value": "192.168.1.1",
              "label": "Enter Firewall IP address (example: 192.168.1.1)",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "pfsense_ip"
            }
          ],
          "name": "AHV"
        }
      ],
      "published_service_definition_list": [],
      "default_credential_local_reference": {
        "kind": "app_credential",
        "name": "CENTOS",
        "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
      },
      "package_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for installing an application",
              "message_list": [],
              "uuid": "090ff297-1f6f-43e8-a335-8ab4d13b551a",
              "name": "action_install",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "4a217906-7ebb-4244-98de-82f6c0e9fe74",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Install_Crb_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=af6cd1dc-c434-4df7-b2e3-a962716d5f12}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_INSTALL",
                    "uuid": "af6cd1dc-c434-4df7-b2e3-a962716d5f12",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=fe0f5257-17b8-c48a-fa97-cf7fb0e74cf8; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=041fb7ef_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=bba4ae7c-fd44-d760-fa23-e5367d64b41c; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=fab2bcfc_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Install_Crb_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "f6479fc6-b526-4588-afef-f7b48b4667e6",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "4a217906-7ebb-4244-98de-82f6c0e9fe74"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "a7894198-d271-4f93-b6ea-31a6208a0e21",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "c58c72f8-d776-4e9c-abbb-2503f4e1ed49",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=070def51-68f2-4516-8d69-62624104cec3}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=f4d72e94-d985-4a4b-bb3c-114a1880395b}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=e649a109-45b8-45a3-8e41-299e0b7c9aac}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "070def51-68f2-4516-8d69-62624104cec3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=f6479fc6-b526-4588-afef-f7b48b4667e6}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f4d72e94-d985-4a4b-bb3c-114a1880395b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2317cf77_runbook; uuid=67ee6370-5b55-d017-cb7c-c7a404b968f7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e649a109-45b8-45a3-8e41-299e0b7c9aac",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook; uuid=38277119-dcf8-1d7c-2c47-67249ac0e640}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "063ab134-2247-4af9-8e73-a5442abd2259",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "c58c72f8-d776-4e9c-abbb-2503f4e1ed49"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for uninstalling an application",
              "message_list": [],
              "uuid": "8f721017-6602-4740-a11f-17713e946ec8",
              "name": "action_uninstall",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ce88a24f-1e9a-46e3-b2c2-0ab4be555027",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Uninstall_Crb_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=49e33093-f823-4438-af19-f4c1245d9596}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_UNINSTALL",
                    "uuid": "49e33093-f823-4438-af19-f4c1245d9596",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=fe0f5257-17b8-c48a-fa97-cf7fb0e74cf8; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=041fb7ef_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=bba4ae7c-fd44-d760-fa23-e5367d64b41c; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=fab2bcfc_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Uninstall_Crb_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "1368d9f4-e319-426c-b6fa-773dbb35d6f2",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "ce88a24f-1e9a-46e3-b2c2-0ab4be555027"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "2841e702-078f-4df7-a39b-efbfdc623804",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "d163715c-ea0e-4acd-85e8-57cc00565c55",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=5ea5115c-41f7-4c81-8cb2-9b16d06a55a9}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=3729ae33-c4a9-4a7e-b245-5bdc84c76313}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=756dcbdd-04dc-4bf3-81f0-8c063aafb633}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "5ea5115c-41f7-4c81-8cb2-9b16d06a55a9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook; uuid=7f37fc51-f925-b46c-3a84-145e420a2f6d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3729ae33-c4a9-4a7e-b245-5bdc84c76313",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=b02e929c_runbook; uuid=4f89310d-54d1-4ce9-358d-c4e44909ac4f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "756dcbdd-04dc-4bf3-81f0-8c063aafb633",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=1368d9f4-e319-426c-b6fa-773dbb35d6f2}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c657cc51-fa60-45fd-98ba-de50cf08a351",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "d163715c-ea0e-4acd-85e8-57cc00565c55"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "d1e9fb69-c861-4ee6-862a-67e3bc0846b4",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "093d0a4f-a74f-4c8b-83ec-677a7753c2ed",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=c7c9a8bc-dc96-410b-b34c-feb4581d2955}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_8076c8a0_2649_9948_a4bd_b99ebf8ee959; uuid=51561764-a083-4591-ac7e-4d42f63c38d8}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c7c9a8bc-dc96-410b-b34c-feb4581d2955",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=39d7e51e-4fbc-44d3-ae12-79a8cd3bc9a1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "51561764-a083-4591-ac7e-4d42f63c38d8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "7dc09c46-d5ee-41f4-a040-9e66a7e4ec92",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "093d0a4f-a74f-4c8b-83ec-677a7753c2ed"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "d774a791-b4ef-4ee3-8ac4-b6cdb606c234",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b68171b7-c702-4c4b-a00d-c8f95edfd487",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=4097ef57-b257-49c7-b709-5cd4c7ab48e6}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4097ef57-b257-49c7-b709-5cd4c7ab48e6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook; uuid=38277119-dcf8-1d7c-2c47-67249ac0e640}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "bd4f7793-0b84-4ffc-b372-718c69d86cbf",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "b68171b7-c702-4c4b-a00d-c8f95edfd487"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "367daa64-a3da-4902-b9a4-530001d10d59",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b711210e-8d4c-48a7-a91a-1af8b6dc8b4b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=b57e963a-ba7f-48a2-a634-3707af917523}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "b57e963a-ba7f-48a2-a634-3707af917523",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=d5e086e2_runbook; uuid=9e769254-3a8b-990c-42df-f5494d3c7a10}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "78eca6a4-ba34-427a-86e5-5b1a417390ce",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "b711210e-8d4c-48a7-a91a-1af8b6dc8b4b"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "c1fe6faf-345c-4444-bd91-0f5d68facc65",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1",
                      "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8d43c6c2-4698-45cd-91e4-41679c06e01f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e; uuid=4971be36-7565-4d36-a029-6018df84a955}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster",
                      "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "4971be36-7565-4d36-a029-6018df84a955",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook; uuid=7f37fc51-f925-b46c-3a84-145e420a2f6d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_fed7b8da_a7e3_7967_bca5_1bcfb341041e"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "70401d56-653a-47f3-8bb6-e8aeabdecf63",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959",
                  "uuid": "8d43c6c2-4698-45cd-91e4-41679c06e01f"
                },
                "name": "SYS_GEN__Runbook_Package_8076c8a0_2649_9948_a4bd_b99ebf8ee959"
              }
            }
          ],
          "message_list": [],
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "HAProxyMaster",
              "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
            }
          ],
          "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959",
          "state": "ACTIVE",
          "version": "",
          "editables": {},
          "type": "DEB",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1",
                    "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "951ce52d-6cfb-5b81-7797-d967db1b3863",
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "InstallHAProxy",
                      "uuid": "804421f4-c19e-23d9-e2a8-4f7a322ec0fc"
                    },
                    {
                      "kind": "app_task",
                      "name": "InstallKeepAlived",
                      "uuid": "3f6fb5b1-2b98-511f-d667-3c27ad70701d"
                    }
                  ],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=efb17543-a21c-1f44-014b-ebba23bb11c9; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "9ddb547e_dag"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxyMaster",
                    "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "804421f4-c19e-23d9-e2a8-4f7a322ec0fc",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# disable firewall\nsudo setenforce 0\nsudo sed -i 's/enforcing/disabled/g' /etc/selinux/config /etc/selinux/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\n\n# install haproxy\nsudo yum install -y haproxy\n\n#reload haproxy\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS",
                      "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
                    }
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "InstallHAProxy"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxyMaster",
                    "uuid": "fed7b8da-a7e3-7967-bca5-1bcfb341041e"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "3f6fb5b1-2b98-511f-d667-3c27ad70701d",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# install keepalived\nsudo yum install -y keepalived\n\n# reload keepalived\nsudo systemctl enable keepalived\nsudo systemctl restart keepalived",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS",
                      "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
                    }
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "InstallKeepAlived"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "fe0f5257-17b8-c48a-fa97-cf7fb0e74cf8",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "9ddb547e_dag",
                "uuid": "951ce52d-6cfb-5b81-7797-d967db1b3863"
              },
              "name": "041fb7ef_runbook"
            },
            "type": "",
            "upgrade_runbook": {},
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1",
                    "uuid": "8076c8a0-2649-9948-a4bd-b99ebf8ee959"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "d3b382c7-3ac8-fbc2-e25d-fbc1afce39eb",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "5955ccd5_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "bba4ae7c-fd44-d760-fa23-e5367d64b41c",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "5955ccd5_dag",
                "uuid": "d3b382c7-3ac8-fbc2-e25d-fbc1afce39eb"
              },
              "name": "fab2bcfc_runbook"
            }
          },
          "variable_list": [],
          "name": "Package1"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for installing an application",
              "message_list": [],
              "uuid": "8ae5f211-1277-4bcf-9786-b615b92109e6",
              "name": "action_install",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "552d55a8-4b00-4456-889b-97f09e677958",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Install_Crb_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=9e4ae8c4-0b80-4462-8ee2-800a32408ea5}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_INSTALL",
                    "uuid": "9e4ae8c4-0b80-4462-8ee2-800a32408ea5",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=1e3fa29f-cedc-9e2d-915f-857a53cf22de; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=041fb7ef_runbook_cloned_0}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=3e7fc9e2-88ca-156c-3f3d-c3d8ee59ba37; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=fab2bcfc_runbook_cloned_0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Install_Crb_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e13e5615-0c04-44ad-a1f0-3ca24d4bfc3b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "552d55a8-4b00-4456-889b-97f09e677958"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "147d84b0-6ac2-451c-b704-cf6720c5aa33",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b5991be4-65d2-483e-bea0-4ae9764d08e7",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=52964a5e-cebf-4f54-bafd-4adae5c23d55}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=61ecedda-9e9a-4104-8a50-8dd60c7be4cc}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=51a73bf6-a7df-4a81-978a-5436481eb59d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "52964a5e-cebf-4f54-bafd-4adae5c23d55",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=e13e5615-0c04-44ad-a1f0-3ca24d4bfc3b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "61ecedda-9e9a-4104-8a50-8dd60c7be4cc",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2317cf77_runbook_cloned_0; uuid=97faa7da-aafd-035d-5f1b-a6e250ba61f7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "51a73bf6-a7df-4a81-978a-5436481eb59d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook_cloned_0; uuid=59afa07d-4068-5ab2-7510-8bf3e1faae87}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e1264588-92ab-47f2-9e16-645fa28b5e7f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "b5991be4-65d2-483e-bea0-4ae9764d08e7"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for uninstalling an application",
              "message_list": [],
              "uuid": "6c293f1f-a79d-40e2-9f4a-853230a0b338",
              "name": "action_uninstall",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "11fa857c-921f-44bb-b050-8fd91a1e2b8f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Uninstall_Crb_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=fac372ae-1ad6-4530-89fc-7d6e0ed761b4}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_UNINSTALL",
                    "uuid": "fac372ae-1ad6-4530-89fc-7d6e0ed761b4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=1e3fa29f-cedc-9e2d-915f-857a53cf22de; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=041fb7ef_runbook_cloned_0}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=3e7fc9e2-88ca-156c-3f3d-c3d8ee59ba37; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=fab2bcfc_runbook_cloned_0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Uninstall_Crb_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "cd5b0981-21b7-45d9-b773-c7b6eb4e92ca",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "11fa857c-921f-44bb-b050-8fd91a1e2b8f"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "52b7b8e4-6f8d-49fe-a6ed-1448f009a81b",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8f62c965-49a0-438f-a726-ebcb18ea28a0",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=8a568ae2-a0bc-48b4-a8c2-107c77c0429d}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=dd07477d-6a63-4487-8cbb-260c5c2cd823}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=fee498da-a1d1-4401-ac6c-46c1aea7670d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8a568ae2-a0bc-48b4-a8c2-107c77c0429d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook_cloned_0; uuid=a8c427f7-088e-18e9-0c79-c1b22032a1d0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "dd07477d-6a63-4487-8cbb-260c5c2cd823",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=b02e929c_runbook_cloned_0; uuid=d08a35db-2463-c41c-6f9b-c041c3d21879}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "fee498da-a1d1-4401-ac6c-46c1aea7670d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=cd5b0981-21b7-45d9-b773-c7b6eb4e92ca}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "56c65c8d-b491-477a-ba36-b11e02be82b0",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "8f62c965-49a0-438f-a726-ebcb18ea28a0"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "b87ec7c1-697d-4163-9dec-eb78c8affc57",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "e8e8d435-66a1-4908-ab9a-fb8f874119e9",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=9deb306b-f7f8-43f9-a07b-fea76f3a984a}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_0b8ebd1d_d4d5_bd35_c957_1e90994e118f; uuid=cb945005-10a5-4946-954b-3336db641ebe}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9deb306b-f7f8-43f9-a07b-fea76f3a984a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=48ae37ff-653f-40e5-8584-3cfd0ed67c3b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "cb945005-10a5-4946-954b-3336db641ebe",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "9e2a9753-a823-461b-a897-a478a48604d8",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "e8e8d435-66a1-4908-ab9a-fb8f874119e9"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "65cdb464-78d9-459d-9a99-183a9be658d5",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b6ae5382-0688-4b79-8085-7bc8c5cbfc41",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=8627efb4-f9c9-4b47-a364-003f9f606139}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8627efb4-f9c9-4b47-a364-003f9f606139",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f6f683a8_runbook_cloned_0; uuid=59afa07d-4068-5ab2-7510-8bf3e1faae87}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d52e191d-eaa4-48b9-9b2f-aa63d36a065e",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "b6ae5382-0688-4b79-8085-7bc8c5cbfc41"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "fc8789a9-5f36-4701-8221-d103a3c05294",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "401ba5d2-a788-428e-b866-95271457f8fd",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=624df5a4-866b-49dc-a6cf-ee79b51df1b3}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "624df5a4-866b-49dc-a6cf-ee79b51df1b3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=d5e086e2_runbook_cloned_0; uuid=111a4a69-ef79-6d07-c9ea-3abb284b48d1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "255f3fb3-9967-48d9-8798-4893d8eaf2aa",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "401ba5d2-a788-428e-b866-95271457f8fd"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "8ed6943f-dfc7-46cb-8da0-5746df363b28",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package1_cloned_0",
                      "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "42cb3853-1b2b-4912-b22b-8799e32ed850",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2; uuid=ba388d16-dc53-4998-b913-8901f1d4745e}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave",
                      "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "ba388d16-dc53-4998-b913-8901f1d4745e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7e76b9ef_runbook_cloned_0; uuid=a8c427f7-088e-18e9-0c79-c1b22032a1d0}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_744c3592_891c_de44_3722_cddb255ad7a2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "22366348-8086-4061-81f4-1b3da11895ba",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f",
                  "uuid": "42cb3853-1b2b-4912-b22b-8799e32ed850"
                },
                "name": "SYS_GEN__Runbook_Package_0b8ebd1d_d4d5_bd35_c957_1e90994e118f"
              }
            }
          ],
          "message_list": [],
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "HAProxySlave",
              "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
            }
          ],
          "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f",
          "state": "ACTIVE",
          "version": "",
          "editables": {},
          "type": "DEB",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1_cloned_0",
                    "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "fb73ae88-7faf-f78b-36d8-bc5d46dbb280",
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "InstallHAProxy",
                      "uuid": "590419a4-f822-26a4-028d-809474fc1d05"
                    },
                    {
                      "kind": "app_task",
                      "name": "InstallKeepAlived",
                      "uuid": "de700069-73a7-eb26-9179-8f605c12fd22"
                    }
                  ],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=014221f5-bd6f-0dfb-6097-402efcac26cd; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "9ddb547e_dag_cloned_1"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxySlave",
                    "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "590419a4-f822-26a4-028d-809474fc1d05",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# disable firewall\nsudo setenforce 0\nsudo sed -i 's/enforcing/disabled/g' /etc/selinux/config /etc/selinux/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\n\n# install haproxy\nsudo yum install -y haproxy\n\n#reload haproxy\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS",
                      "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
                    }
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "InstallHAProxy"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxySlave",
                    "uuid": "744c3592-891c-de44-3722-cddb255ad7a2"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "de700069-73a7-eb26-9179-8f605c12fd22",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# install keepalived\nsudo yum install -y keepalived\n\n# reload keepalived\nsudo systemctl enable keepalived\nsudo systemctl restart keepalived",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS",
                      "uuid": "d89f97af-0959-01b1-f7f0-aa801d10909c"
                    }
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "InstallKeepAlived"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "1e3fa29f-cedc-9e2d-915f-857a53cf22de",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "9ddb547e_dag_cloned_1",
                "uuid": "fb73ae88-7faf-f78b-36d8-bc5d46dbb280"
              },
              "name": "041fb7ef_runbook_cloned_0"
            },
            "type": "",
            "upgrade_runbook": {},
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1_cloned_0",
                    "uuid": "0b8ebd1d-d4d5-bd35-c957-1e90994e118f"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "bf683427-e51c-2e8c-9c90-576513de5f88",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "5955ccd5_dag_cloned_1"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "3e7fc9e2-88ca-156c-3f3d-c3d8ee59ba37",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "5955ccd5_dag_cloned_1",
                "uuid": "bf683427-e51c-2e8c-9c90-576513de5f88"
              },
              "name": "fab2bcfc_runbook_cloned_0"
            }
          },
          "variable_list": [],
          "name": "Package1_cloned_0"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for installing an application",
              "message_list": [],
              "uuid": "2ba323cd-5b51-4ea8-b413-a47e2a865347",
              "name": "action_install",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "afc044b4-748d-4af9-b158-e51b5dc30e19",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Install_Crb_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=b2c8a5ec-38ea-41a7-86b1-fd9c146db2fe}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_INSTALL",
                    "uuid": "b2c8a5ec-38ea-41a7-86b1-fd9c146db2fe",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=b91f5841-dce1-88b5-7c42-1c79ea098e02; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=d3a43acb_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=6978871d-14f6-a896-9e77-f66c7288617b; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=35cc29d0_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Install_Crb_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "1f9622e0-2b4a-4f48-9c81-4e80581d423f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "afc044b4-748d-4af9-b158-e51b5dc30e19"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "22cac146-ea7d-47ca-b1fd-e621f39d1ad2",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "56c9d7a8-b805-4b4f-bd68-b91b6d1136b6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=0364e9da-fc96-4ef5-b93d-945ae141376c}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=91bfb605-14cd-4cc2-9a3c-ba57cd8495fe}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=06dd2621-440e-4dd4-8c6d-40c75d7f6d3d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0364e9da-fc96-4ef5-b93d-945ae141376c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=1f9622e0-2b4a-4f48-9c81-4e80581d423f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "91bfb605-14cd-4cc2-9a3c-ba57cd8495fe",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7cb07e80_runbook; uuid=75256200-7ce8-6337-3344-39f40ddbb183}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "06dd2621-440e-4dd4-8c6d-40c75d7f6d3d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=96645ce0_runbook; uuid=af4accfb-5d3f-22b1-e25e-a996626ae789}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "5fbc849d-7f31-4a10-ae00-d2014442c7d6",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "56c9d7a8-b805-4b4f-bd68-b91b6d1136b6"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for uninstalling an application",
              "message_list": [],
              "uuid": "946c2bc6-e300-44f3-be40-9d019aed4216",
              "name": "action_uninstall",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "32a4ba10-8a9f-4bd6-a9fc-533a6438efe3",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Uninstall_Crb_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=2088d1e2-54b2-444e-9536-701170dc1687}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_UNINSTALL",
                    "uuid": "2088d1e2-54b2-444e-9536-701170dc1687",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=b91f5841-dce1-88b5-7c42-1c79ea098e02; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=d3a43acb_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=6978871d-14f6-a896-9e77-f66c7288617b; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=35cc29d0_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Uninstall_Crb_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "ae43f119-393f-4d32-a2db-29d75766ad2f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "32a4ba10-8a9f-4bd6-a9fc-533a6438efe3"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "d2b1e552-5584-464b-aa3d-741230643a88",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "348e3632-04ec-4975-9e61-8bb4c447523a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=d42e3861-ec7a-4357-afe3-5d975420cc54}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=017572c7-15a5-43b3-b72d-bbb6a0d20b4c}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=bcf03dbc-3956-4b05-9648-e6564b4a245a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "d42e3861-ec7a-4357-afe3-5d975420cc54",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=81207776_runbook; uuid=ddea70cd-163c-b3ea-02e1-b871e2e3b6bc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "017572c7-15a5-43b3-b72d-bbb6a0d20b4c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=f4e26296_runbook; uuid=a0e02982-fc80-cdc7-410c-babb5f4b5758}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "bcf03dbc-3956-4b05-9648-e6564b4a245a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=ae43f119-393f-4d32-a2db-29d75766ad2f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "9d512f3c-b098-4b23-bc26-d06f8f80b180",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "348e3632-04ec-4975-9e61-8bb4c447523a"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "0e0d9cc9-cdf8-4c4d-af8e-00f05c9ea06b",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "6e13b254-d28a-4e14-910e-7e256bb7be04",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=6b4c9fd0-81a6-423d-9124-b5a5bed9a6c4}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_f4bd29f7_1db8_800f_3ae7_615a09f7de1c; uuid=87f1a81e-51ba-44c8-9586-58d1475cd413}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "6b4c9fd0-81a6-423d-9124-b5a5bed9a6c4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=2c68089a-520f-4abc-bdab-f05a88996373}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "87f1a81e-51ba-44c8-9586-58d1475cd413",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "b037f9d9-189d-416a-8c09-ef44186a7bd2",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "6e13b254-d28a-4e14-910e-7e256bb7be04"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "2c16c446-f34c-494b-9346-bd7cc33cf6af",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "3596b875-2428-4590-8e61-a2cbfac22164",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=ba1c29e2-c8cf-416a-99af-d12365554474}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "ba1c29e2-c8cf-416a-99af-d12365554474",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=96645ce0_runbook; uuid=af4accfb-5d3f-22b1-e25e-a996626ae789}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "35814a2b-a152-4663-8dba-38c1bc3ad66c",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "3596b875-2428-4590-8e61-a2cbfac22164"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "43fcfa2e-74cf-4e41-b5f9-4052e4badbdb",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bc95af02-6a46-4ac2-98f7-415fe4e8239a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=8b503cb6-aa24-4c5c-8060-b1e97e60d919}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8b503cb6-aa24-4c5c-8060-b1e97e60d919",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=7980a5d2_runbook; uuid=5192764c-742a-9bd7-3339-dc5ed3334e42}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d6999f79-5144-4cc4-929a-341a88fc9128",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "bc95af02-6a46-4ac2-98f7-415fe4e8239a"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "ae77d536-5c26-43be-aa71-ea130cd76d43",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Package3",
                      "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "0c031bf1-9352-4200-b59e-1957d5c60ec7",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a; uuid=3477fbf1-ff3f-4acc-93b0-cf06d60d7dc6}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall",
                      "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3477fbf1-ff3f-4acc-93b0-cf06d60d7dc6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=81207776_runbook; uuid=ddea70cd-163c-b3ea-02e1-b871e2e3b6bc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_9734b680_72ec_e031_fc57_ba2e7ad81c8a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "fd4ef6da-0dd1-4b11-adb2-f73ea5745e17",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c",
                  "uuid": "0c031bf1-9352-4200-b59e-1957d5c60ec7"
                },
                "name": "SYS_GEN__Runbook_Package_f4bd29f7_1db8_800f_3ae7_615a09f7de1c"
              }
            }
          ],
          "message_list": [],
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Firewall",
              "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
            }
          ],
          "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c",
          "state": "ACTIVE",
          "version": "",
          "editables": {},
          "type": "DEB",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package3",
                    "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "eb6e2a3f-c254-268c-813a-30369bfb10c8",
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "FirewallSetWanStaticIp",
                      "uuid": "ac3e339f-37e1-5b8f-2e6e-9f5215f5dc6a"
                    },
                    {
                      "kind": "app_task",
                      "name": "AhvCreateLanNetwork",
                      "uuid": "38adaa2e-570e-938c-b5fd-38c2eb6cb218"
                    },
                    {
                      "kind": "app_task",
                      "name": "CalmUpdateSubnetsProject",
                      "uuid": "12ba53e9-e82f-499c-7ad4-7f91e039d183"
                    },
                    {
                      "kind": "app_task",
                      "name": "AhvAddLanInterface",
                      "uuid": "09b97197-5993-367e-dd82-15c1a70cda7f"
                    },
                    {
                      "kind": "app_task",
                      "name": "FirewallCreateLanInterface",
                      "uuid": "434a45cd-67cd-3f22-b549-b599e58a2983"
                    }
                  ],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=543c1543-bdc4-8ac5-469f-cb7731a19c2c; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=f0e0d400-a9a1-9708-db88-a3c4e4c71b88; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=4e2e0274-0b52-0814-7547-df163d539483; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; uuid=fd242497-53d3-42e7-f7b8-75ebf02081b5; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "2045c54f_dag"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall",
                    "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "ac3e339f-37e1-5b8f-2e6e-9f5215f5dc6a",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "script_type": "static",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseSetWanStaticIp\n# description:  Update pfSense WAN interface from DHCP to static\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get default GW\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/routing/gateway\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive the gateway\nresp_parse = json.loads(resp.content)\nfor wan_int in resp_parse['data']:\n    if \"WAN\" in wan_int:\n        wan_gateway = resp_parse['data'][wan_int]['name']\n# endregion\n\n\n# region get interface status\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nwan_if = resp_parse['data'][0]['if']\nwan_ipaddr = resp_parse['data'][0]['ipaddr']\nwan_subnet = resp_parse['data'][0]['subnet']\nwan_macaddr = resp_parse['data'][0]['macaddr']\nwan_mtu = resp_parse['data'][0]['mtu']\nwan_cidr = netmask_to_cidr(wan_subnet)\n# endregion\n\n# region apply static IP to interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"PUT\"\npayload = {\n    \"id\": wan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": wan_ipaddr,\n    \"spoofmac\": wan_macaddr,\n    \"subnet\": wan_cidr,\n    \"gateway\": wan_gateway,\n    \"mtu\": wan_mtu,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion"
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "FirewallSetWanStaticIp"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall",
                    "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "SET_VARIABLE",
                  "uuid": "38adaa2e-570e-938c-b5fd-38c2eb6cb218",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-lan\"\nahv_vlan_id = \"4094\"\n#ahv_vlan_id = \"@@{private_subnet_vlan_id}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0]\n#ahv_network_prefix = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\npayload = {\n    \"name\": ahv_network_name,\n     \"vlanId\": ahv_vlan_id\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nprint(\"lan_network_uuid={}\".format(resp_parse['networkUuid']))\n# endregion",
                    "eval_variables": [
                      "lan_network_uuid"
                    ],
                    "eval_scope": "local",
                    "type": "",
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "AhvCreateLanNetwork"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall",
                    "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "12ba53e9-e82f-499c-7ad4-7f91e039d183",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "script_type": "static",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion"
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "CalmUpdateSubnetsProject"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall",
                    "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "09b97197-5993-367e-dd82-15c1a70cda7f",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "script_type": "static",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".1\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"vlan_mode\": \"Trunked\",\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion"
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "AhvAddLanInterface"
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall",
                    "uuid": "9734b680-72ec-e031-fc57-ba2e7ad81c8a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "EXEC",
                  "uuid": "434a45cd-67cd-3f22-b549-b599e58a2983",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "script_type": "static",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateInterface\n# description:  Create a interface and assign a static IP address\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n#lan_net_cidr = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\n#lan_net_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#lan_net_ip = lan_net_address[0] + \".\" + lan_net_address[1] + \".\" + lan_net_address[2] + \".1\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor interface in resp_parse['data']:\n    last_lan_if = interface['if']\n\n# increment last_lan_if (example vtnet0 to vtnet1)\nlan_if = last_lan_if[:-1] + str((int(last_lan_if[-1])+1))\n# endregion\n\n# region apply static IP to interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\npayload = {\n    \"id\": lan_if,\n    \"if\": lan_if,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n# region apply configuration\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/apply\"\nmethod = \"POST\"\npayload = {}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion"
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "FirewallCreateLanInterface"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "b91f5841-dce1-88b5-7c42-1c79ea098e02",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "2045c54f_dag",
                "uuid": "eb6e2a3f-c254-268c-813a-30369bfb10c8"
              },
              "name": "d3a43acb_runbook"
            },
            "type": "",
            "upgrade_runbook": {},
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package3",
                    "uuid": "f4bd29f7-1db8-800f-3ae7-615a09f7de1c"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "c5b1bd71-99ff-162d-e559-4bba267a1db9",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "a15dc4d2_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "6978871d-14f6-a896-9e77-f66c7288617b",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "a15dc4d2_dag",
                "uuid": "c5b1bd71-99ff-162d-e559-4bba267a1db9"
              },
              "name": "35cc29d0_runbook"
            }
          },
          "variable_list": [],
          "name": "Package3"
        }
      ]
    },
    "name": "Clone VM from snapshot and clone disk to target VM"
  },
  "spec": {
    "description": "",
    "resources": {
      "client_attrs": {
        "ef294948_deployment": {
          "y": -813.8684213127,
          "x": 153.3220188522
        },
        "5028772f_deployment": {
          "y": -622.0909090909,
          "x": 153.1818181818
        },
        "72566139-2ef1-cdd1-66f5-b4d239638ae3": {
          "y": -45,
          "x": 861
        },
        "090fbd28_deployment": {
          "y": -701.616027832,
          "x": -43.2871426669
        },
        "ec0b2534-a035-6b3b-b8c1-e2984b6eca80": {
          "y": -674.366027832,
          "x": 183.7797241211
        }
      },
      "service_definition_list": [
        {
          "singleton": false,
          "action_list": [
            {
              "description": "System action for creating an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=ConfigureHAProxy}",
                      "@{kind=app_task; name=ConfigureKeepAlived}",
                      "@{kind=app_task; name=AhvAddPrivateInterface}",
                      "@{kind=app_task; name=ConfigurePrivateInterface}"
                    ],
                    "name": "1ca1b02b_dag",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigureHAProxy",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure haproxy.cfg\necho \"\nfrontend https_front\n  bind *:443\n  mode tcp\n  default_backend https_back\n\nbackend https_back\n  mode tcp\n  balance source\n  server pfsense @@{pfsense_ip}@@:443 check\" | sudo tee /etc/haproxy/haproxy.cfg\n\n\n# reload haproxy\nsudo systemctl restart haproxy",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigureKeepAlived",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure keepalived.conf\necho \"# Global Settings for notifications\n\n# Define the script used to check if haproxy is still working\nvrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n}\n\n# Configuration for Virtual Interface\nvrrp_instance LB_VIP {\n    interface eth0\n    state MASTER        # set to BACKUP on the peer machine\n    priority 101        # set to  99 on the peer machine\n    virtual_router_id @@{hapropxy_virtual_router_id}@@\n\n    smtp_alert          # Enable Notifications Via Email\n\n    authentication {\n        auth_type AH\n        auth_pass @@{haproxy_auth_pwd}@@    # Password for accessing vrrpd. Same on all devices\n    }\n    unicast_src_ip @@{haproxy_master_ip}@@ # Private IP address of master\n    unicast_peer {\n        @@{haproxy_slave_ip}@@        # Private IP address of the backup haproxy\n   }\n\n    # The virtual ip address shared between the two loadbalancers\n    virtual_ipaddress {\n        @@{haproxy_virtual_ip}@@\n    }\n\n    # Use the Defined Script to Check whether to initiate a fail over\n    track_script {\n        chk_haproxy\n    }\n}\" | sudo tee /etc/keepalived/keepalived.conf\n\n# reload keepalived.conf\nsudo systemctl restart keepalived",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "AhvAddPrivateInterface",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{Firewall.private_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".2\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigurePrivateInterface",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# define functions\ncdr2mask () {\n   set -- $(( 5 - ($1 / 8) )) 255 255 255 255 $(( (255 << (8 - ($1 % 8))) & 255 )) 0 0 0\n   [ $1 -gt 1 ] && shift $1 || shift\n   echo ${1-0}.${2-0}.${3-0}.${4-0}\n}\n\n# define variables\nprivate_subnet_cidr=\"@@{private_subnet_cidr}@@\"\nbase_ip=$(echo $private_subnet_cidr | cut -d \".\" -f1-3)\nprivate_netmask=$(cdr2mask $(echo $private_subnet_cidr | cut -d \"/\" -f2))\nprivate_gw=$base_ip\".1\" \nprivate_ip=$base_ip\".2\"\n\n# configure interface eth1\necho \"\nIPADDR=$private_ip\nNETMASK=$private_netmask\nGATEWAY=$private_gw\nBOOTPROTO=static\nONBOOT=yes\nDEFROUTE=no\nDEVICE=eth1\" | sudo tee /etc/sysconfig/network-scripts/ifcfg-eth1\n\n# reload haproxy\nsudo systemctl restart network",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "2317cf77_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1ca1b02b_dag"
                },
                "variable_list": []
              },
              "name": "action_create"
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "14b66ed4_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "b02e929c_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "14b66ed4_dag"
                },
                "variable_list": []
              },
              "name": "action_delete"
            },
            {
              "description": "System action for starting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "b809e962_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "f6f683a8_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b809e962_dag"
                },
                "variable_list": []
              },
              "name": "action_start"
            },
            {
              "description": "System action for stopping an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "8c3ab037_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "7e76b9ef_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8c3ab037_dag"
                },
                "variable_list": []
              },
              "name": "action_stop"
            },
            {
              "description": "System action for restarting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxyMaster"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "78bedcd1_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "d5e086e2_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "78bedcd1_dag"
                },
                "variable_list": []
              },
              "name": "action_restart"
            }
          ],
          "depends_on_list": [
            {
              "kind": "app_service",
              "name": "Firewall"
            }
          ],
          "name": "HAProxyMaster",
          "port_list": [],
          "tier": "",
          "variable_list": [],
          "description": ""
        },
        {
          "singleton": false,
          "action_list": [
            {
              "description": "System action for creating an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=ConfigureHAProxy}",
                      "@{kind=app_task; name=ConfigureKeepAlived}",
                      "@{kind=app_task; name=AhvAddPrivateInterface}",
                      "@{kind=app_task; name=ConfigurePrivateInterface}"
                    ],
                    "name": "1ca1b02b_dag_cloned_1",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigureHAProxy",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# configure haproxy.cfg\necho \"\nfrontend https_front\n  bind *:443\n  mode tcp\n  default_backend https_back\n\nbackend https_back\n  mode tcp\n  balance source\n  server pfsense @@{pfsense_ip}@@:443 check\" | sudo tee /etc/haproxy/haproxy.cfg\n\n# reload haproxy\nsudo systemctl restart haproxy",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigureKeepAlived",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n\n# configure keepalived.conf\necho \"vrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n}\n\nvrrp_instance LB_VIP {\n    interface eth0\n    state BACKUP\n    priority 100\n    virtual_router_id @@{hapropxy_virtual_router_id}@@\n\n    smtp_alert\n\n    authentication {\n        auth_type AH\n        auth_pass @@{haproxy_auth_pwd}@@\n    }\n    unicast_src_ip @@{haproxy_slave_ip}@@ # Private IP address of the backup haproxy\n    unicast_peer {\n        @@{haproxy_master_ip}@@   # Private IP address of the master haproxy\n   }\n\n    virtual_ipaddress {\n        @@{haproxy_virtual_ip}@@\n    }\n\n    track_script {\n        chk_haproxy\n    }\n}\" | sudo tee /etc/keepalived/keepalived.conf\n\n# reload keepalived\nsudo systemctl restart keepalived",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "AhvAddPrivateInterface",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{Firewall.private_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".3\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "ConfigurePrivateInterface",
                    "attrs": {
                      "exit_status": "",
                      "script": "#!/bin/bash\nset -ex\n\n# define functions\ncdr2mask () {\n   set -- $(( 5 - ($1 / 8) )) 255 255 255 255 $(( (255 << (8 - ($1 % 8))) & 255 )) 0 0 0\n   [ $1 -gt 1 ] && shift $1 || shift\n   echo ${1-0}.${2-0}.${3-0}.${4-0}\n}\n\n# define variables\nprivate_subnet_cidr=\"@@{private_subnet_cidr}@@\"\nbase_ip=$(echo $private_subnet_cidr | cut -d \".\" -f1-3)\nprivate_netmask=$(cdr2mask $(echo $private_subnet_cidr | cut -d \"/\" -f2))\nprivate_gw=$base_ip\".1\" \nprivate_ip=$base_ip\".3\"\n\n# configure interface eth1\necho \"\nIPADDR=$private_ip\nNETMASK=$private_netmask\nGATEWAY=$private_gw\nBOOTPROTO=static\nONBOOT=yes\nDEFROUTE=no\nDEVICE=eth1\" | sudo tee /etc/sysconfig/network-scripts/ifcfg-eth1\n\n# reload haproxy\nsudo systemctl restart network",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=CENTOS}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "2317cf77_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1ca1b02b_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "action_create"
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "14b66ed4_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "b02e929c_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "14b66ed4_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "action_delete"
            },
            {
              "description": "System action for starting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "b809e962_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "f6f683a8_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b809e962_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "action_start"
            },
            {
              "description": "System action for stopping an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "8c3ab037_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "7e76b9ef_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8c3ab037_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "action_stop"
            },
            {
              "description": "System action for restarting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "HAProxySlave"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "78bedcd1_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "d5e086e2_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "78bedcd1_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "action_restart"
            }
          ],
          "depends_on_list": [
            {
              "kind": "app_service",
              "name": "Firewall"
            }
          ],
          "name": "HAProxySlave",
          "port_list": [],
          "tier": "",
          "variable_list": [],
          "description": ""
        },
        {
          "singleton": false,
          "action_list": [
            {
              "description": "System action for creating an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=CreatePrivateAhvNetwork}",
                      "@{kind=app_task; name=CalmUpdateSubnetsProject}",
                      "@{kind=app_task; name=FirewallCreateVlanPrivate}",
                      "@{kind=app_task; name=FirewallFwRuleAllowIcmp}"
                    ],
                    "name": "1d0a5fa7_dag",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "CreatePrivateAhvNetwork",
                    "attrs": {
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-private\"\nahv_vlan_id = \"@@{private_subnet_vlan_id}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0]\n#ahv_network_prefix = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\npayload = {\n    \"name\": ahv_network_name,\n    \"vlanId\": ahv_vlan_id\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nprint(\"private_network_uuid={}\".format(resp_parse['networkUuid']))\n# endregion",
                      "eval_variables": "private_network_uuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "CalmUpdateSubnetsProject",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{private_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "FirewallCreateVlanPrivate",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateVlanInterface\n# description:  Create a VLAN interface and assign to the LAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\nvlan_net_cidr = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nvlan_net_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nvlan_net_ip = vlan_net_address[0] + \".\" + vlan_net_address[1] + \".\" + vlan_net_address[2] + \".1\"\nvlan_tag = \"@@{private_subnet_vlan_id}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor int in resp_parse['data']:\n    if \"lan\" in int['name']:\n        lan_if = int['if']\n# endregion\n\n# region create VLAN\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/vlan\"\nmethod = \"POST\"\npayload = {\n    \"if\": lan_if,\n    \"tag\": vlan_tag,\n    \"descr\": \"VLAN private \"+vlan_tag+\"\"\n\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n\n# region create VLAN interface assignment\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\nvlan_if = \"{}.{}\".format(lan_if,vlan_tag)\npayload = {\n    \"id\": vlan_if, \n    \"if\": vlan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": vlan_net_ip,\n    \"subnet\": vlan_net_cidr,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregionp",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "FirewallFwRuleAllowIcmp",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseFwRuleAllowIcmp\n# description:  Allow ICMP traffic to the WAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor interface in resp_parse['data']:\n    last_lan_name = interface['name']\n# endregion\n\n# region create fw rule (allow ICMP)\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/firewall/rule\"\nmethod = \"POST\"\npayload = {\n    \"type\": \"pass\",\n    \"interface\": last_lan_name,\n    \"ipprotocol\": \"inet\",\n    \"protocol\": \"icmp\",\n    \"src\": \"any\",\n    \"dst\": \"any\",\n    \"top\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "7cb07e80_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "1d0a5fa7_dag"
                },
                "variable_list": []
              },
              "name": "action_create"
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "58eace38_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "f4e26296_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "58eace38_dag"
                },
                "variable_list": []
              },
              "name": "action_delete"
            },
            {
              "description": "System action for starting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "b50d3ae6_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "96645ce0_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "b50d3ae6_dag"
                },
                "variable_list": []
              },
              "name": "action_start"
            },
            {
              "description": "System action for stopping an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "a23629c4_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "81207776_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "a23629c4_dag"
                },
                "variable_list": []
              },
              "name": "action_stop"
            },
            {
              "description": "System action for restarting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "2cf031cf_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "7980a5d2_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "2cf031cf_dag"
                },
                "variable_list": []
              },
              "name": "action_restart"
            }
          ],
          "depends_on_list": [],
          "name": "Firewall",
          "port_list": [],
          "tier": "",
          "variable_list": [
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "tenant_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "lan_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "private_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            }
          ],
          "description": ""
        }
      ],
      "substrate_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "bf9afbcf_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "04f9d1cd_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "bf9afbcf_dag"
                },
                "variable_list": []
              },
              "name": "pre_action_create"
            },
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxyMasterAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "d5f08535_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "76e7db5f_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d5f08535_dag"
                },
                "variable_list": []
              },
              "name": "post_action_delete"
            }
          ],
          "type": "AHV_VM",
          "name": "HAProxyMasterAHV",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "connection_port": 22,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "disable_readiness_probe": true,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "CENTOS"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {}
            }
          },
          "os_type": "Linux",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-m",
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{haproxy_master_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "serial_port_list": [],
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "gpu_list": [],
              "memory_size_mib": 2048,
              "parent_reference": null,
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\ncloud_config_modules: \n  - resolv_conf\n  - runcmd\n  \nhostname: @@{name}@@\nfqdn: @@{name}@@.emeagso.local\n\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n\nwrite_files:\n  - path: /etc/sysconfig/network-scripts/ifcfg-eth0\n    content: |\n      IPADDR=@@{haproxy_master_ip}@@\n      NETMASK=@@{public_netmask}@@\n      GATEWAY=@@{public_gateway}@@\n      BOOTPROTO=static\n      ONBOOT=yes\n      DEVICE=eth0\nruncmd:\n  - [ifdown, eth0]\n  - [ifup, eth0]\n\nmanage_resolv_conf: true\nresolv_conf:\n  nameservers: ['@@{public_dns1}@@', '@@{public_dns2}@@']"
                },
                "type": "",
                "sysprep": null
              },
              "power_state": "ON",
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "type": "",
                    "device_index": 0,
                    "adapter_type": "SCSI"
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "CentOS-7-x86_64-GenericCloud.qcow2",
                    "uuid": "41e413de-22e2-4af7-acfd-fe70e979d47b"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "disk_address": {
                      "type": "",
                      "device_index": 0,
                      "adapter_type": "SCSI"
                    },
                    "device_type": "DISK"
                  }
                }
              ]
            },
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "categories": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "bf9afbcf_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "04f9d1cd_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "bf9afbcf_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "pre_action_create"
            },
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "HAProxySlaveAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "d5f08535_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "76e7db5f_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d5f08535_dag_cloned_1"
                },
                "variable_list": []
              },
              "name": "post_action_delete"
            }
          ],
          "type": "AHV_VM",
          "name": "HAProxySlaveAHV",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "connection_port": 22,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "disable_readiness_probe": true,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "CENTOS"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {}
            }
          },
          "os_type": "Linux",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-hapxy-s",
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{haproxy_slave_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "serial_port_list": [],
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "gpu_list": [],
              "memory_size_mib": 2048,
              "parent_reference": null,
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\ncloud_config_modules: \n  - resolv_conf\n  - runcmd\n  \nhostname: @@{name}@@\nfqdn: @@{name}@@.emeagso.local\n\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n\nwrite_files:\n  - path: /etc/sysconfig/network-scripts/ifcfg-eth0\n    content: |\n      IPADDR=@@{haproxy_slave_ip}@@\n      NETMASK=@@{public_netmask}@@\n      GATEWAY=@@{public_gateway}@@\n      BOOTPROTO=static\n      ONBOOT=yes\n      DEVICE=eth0\nruncmd:\n  - [ifdown, eth0]\n  - [ifup, eth0]\n\nmanage_resolv_conf: true\nresolv_conf:\n  nameservers: ['@@{public_dns1}@@', '@@{public_dns2}@@']"
                },
                "type": "",
                "sysprep": null
              },
              "power_state": "ON",
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "type": "",
                    "device_index": 0,
                    "adapter_type": "SCSI"
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "CentOS-7-x86_64-GenericCloud.qcow2",
                    "uuid": "41e413de-22e2-4af7-acfd-fe70e979d47b"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "disk_address": {
                      "type": "",
                      "device_index": 0,
                      "adapter_type": "SCSI"
                    },
                    "device_type": "DISK"
                  }
                }
              ]
            },
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "categories": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "8b4f6248_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "d8132fd3_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "8b4f6248_dag"
                },
                "variable_list": []
              },
              "name": "pre_action_create"
            },
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=DeletePrivateAhvNetwork}",
                      "@{kind=app_task; name=DeleteLanNetwork}",
                      "@{kind=app_task; name=DelteAllTenantNetworks}"
                    ],
                    "name": "e904fd1f_dag",
                    "attrs": {
                      "edges": " ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "DeletePrivateAhvNetwork",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_uuid = \"@@{private_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region delete ahv network\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"DELETE\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "DeleteLanNetwork",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region delete ahv network\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"DELETE\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "FirewallAHV"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "DelteAllTenantNetworks",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcRemoveAhvNetwork\n# description:  Given an AHV subnet UUID, delete that subnet from the AHV\n#               cluster.\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nuser_network_uuid = \"@@{tenant_network_uuid}@@\"\narray_user_network_uuid = user_network_uuid.split(',')\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret,params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n#region processing\nfor ahv_network_uuid in array_user_network_uuid:\n    #region prepare api call\n    api_server_port = \"9440\"\n    api_server_endpoint = \"/api/nutanix/v3/subnets/{}\".format(ahv_network_uuid)\n    url = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\n    method = \"DELETE\"\n    headers = { 'Content-Type': 'application/json','Accept': 'application/json'}\n    # endregion\n\n    #region make the api call\n    print(\"Making a {} API call to {}\".format(method, url))\n    resp = process_request(url, method, headers)\n#endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "5458122f_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "e904fd1f_dag"
                },
                "variable_list": []
              },
              "name": "post_action_delete"
            }
          ],
          "type": "AHV_VM",
          "name": "FirewallAHV",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "connection_port": 22,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "0",
            "disable_readiness_probe": true
          },
          "os_type": "Linux",
          "create_spec": {
            "name": "vm-@@{calm_project_name}@@-@@{calm_application_name}@@-fw",
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [
                    {
                      "ip": "@@{pfsense_ip}@@",
                      "type": "ASSIGNED"
                    }
                  ],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "f5e95a30-d455-46d8-96b0-27a6bb7a82a0"
                  },
                  "type": ""
                }
              ],
              "serial_port_list": [],
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 2,
              "gpu_list": [],
              "memory_size_mib": 4096,
              "parent_reference": null,
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config"
                },
                "type": "",
                "sysprep": null
              },
              "power_state": "ON",
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "type": "",
                    "device_index": 0,
                    "adapter_type": "SCSI"
                  }
                },
                "type": "",
                "boot_type": "LEGACY",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "pfsense-base",
                    "uuid": "757b257e-e1f7-49e1-9307-93f7200a5170"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "disk_address": {
                      "type": "",
                      "device_index": 0,
                      "adapter_type": "SCSI"
                    },
                    "device_type": "DISK"
                  }
                }
              ]
            },
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "categories": {}
          },
          "variable_list": []
        }
      ],
      "endpoint_definition_list": [],
      "credential_definition_list": [
        {
          "username": "centos",
          "description": "",
          "type": "KEY",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "CENTOS",
          "cred_class": "static"
        },
        {
          "username": "admin",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "pfsense",
          "cred_class": "static"
        },
        {
          "username": "iz@emeagso.lab",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "pc",
          "cred_class": "static"
        }
      ],
      "package_definition_list": [
        {
          "description": "",
          "action_list": [],
          "type": "DEB",
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "HAProxyMaster"
            }
          ],
          "name": "Package1",
          "version": "",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "InstallHAProxy"
                    },
                    {
                      "kind": "app_task",
                      "name": "InstallKeepAlived"
                    }
                  ],
                  "name": "9ddb547e_dag",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxyMaster"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "InstallHAProxy",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# disable firewall\nsudo setenforce 0\nsudo sed -i 's/enforcing/disabled/g' /etc/selinux/config /etc/selinux/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\n\n# install haproxy\nsudo yum install -y haproxy\n\n#reload haproxy\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS"
                    }
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxyMaster"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "InstallKeepAlived",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# install keepalived\nsudo yum install -y keepalived\n\n# reload keepalived\nsudo systemctl enable keepalived\nsudo systemctl restart keepalived",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS"
                    }
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "041fb7ef_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "9ddb547e_dag"
              },
              "variable_list": []
            },
            "type": "",
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "5955ccd5_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "fab2bcfc_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "5955ccd5_dag"
              },
              "variable_list": []
            },
            "upgrade_runbook": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [],
          "type": "DEB",
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "HAProxySlave"
            }
          ],
          "name": "Package1_cloned_0",
          "version": "",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1_cloned_0"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "InstallHAProxy"
                    },
                    {
                      "kind": "app_task",
                      "name": "InstallKeepAlived"
                    }
                  ],
                  "name": "9ddb547e_dag_cloned_1",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxySlave"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "InstallHAProxy",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# disable firewall\nsudo setenforce 0\nsudo sed -i 's/enforcing/disabled/g' /etc/selinux/config /etc/selinux/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\n\n# install haproxy\nsudo yum install -y haproxy\n\n#reload haproxy\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS"
                    }
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "HAProxySlave"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "InstallKeepAlived",
                  "attrs": {
                    "exit_status": [],
                    "script": "#!/bin/bash\nset -ex\n\n# install keepalived\nsudo yum install -y keepalived\n\n# reload keepalived\nsudo systemctl enable keepalived\nsudo systemctl restart keepalived",
                    "script_type": "sh",
                    "type": "",
                    "command_line_args": "",
                    "login_credential_local_reference": {
                      "kind": "app_credential",
                      "name": "CENTOS"
                    }
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "041fb7ef_runbook_cloned_0",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "9ddb547e_dag_cloned_1"
              },
              "variable_list": []
            },
            "type": "",
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package1_cloned_0"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "5955ccd5_dag_cloned_1",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "fab2bcfc_runbook_cloned_0",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "5955ccd5_dag_cloned_1"
              },
              "variable_list": []
            },
            "upgrade_runbook": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [],
          "type": "DEB",
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Firewall"
            }
          ],
          "name": "Package3",
          "version": "",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package3"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [
                    {
                      "kind": "app_task",
                      "name": "FirewallSetWanStaticIp"
                    },
                    {
                      "kind": "app_task",
                      "name": "AhvCreateLanNetwork"
                    },
                    {
                      "kind": "app_task",
                      "name": "CalmUpdateSubnetsProject"
                    },
                    {
                      "kind": "app_task",
                      "name": "AhvAddLanInterface"
                    },
                    {
                      "kind": "app_task",
                      "name": "FirewallCreateLanInterface"
                    }
                  ],
                  "name": "2045c54f_dag",
                  "attrs": {
                    "edges": [
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}",
                      "@{from_task_reference=; edge_type=user_defined; type=; to_task_reference=}"
                    ],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "FirewallSetWanStaticIp",
                  "attrs": {
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseSetWanStaticIp\n# description:  Update pfSense WAN interface from DHCP to static\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get default GW\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/routing/gateway\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive the gateway\nresp_parse = json.loads(resp.content)\nfor wan_int in resp_parse['data']:\n    if \"WAN\" in wan_int:\n        wan_gateway = resp_parse['data'][wan_int]['name']\n# endregion\n\n\n# region get interface status\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nwan_if = resp_parse['data'][0]['if']\nwan_ipaddr = resp_parse['data'][0]['ipaddr']\nwan_subnet = resp_parse['data'][0]['subnet']\nwan_macaddr = resp_parse['data'][0]['macaddr']\nwan_mtu = resp_parse['data'][0]['mtu']\nwan_cidr = netmask_to_cidr(wan_subnet)\n# endregion\n\n# region apply static IP to interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"PUT\"\npayload = {\n    \"id\": wan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": wan_ipaddr,\n    \"spoofmac\": wan_macaddr,\n    \"subnet\": wan_cidr,\n    \"gateway\": wan_gateway,\n    \"mtu\": wan_mtu,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "AhvCreateLanNetwork",
                  "attrs": {
                    "exit_status": [],
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-lan\"\nahv_vlan_id = \"4094\"\n#ahv_vlan_id = \"@@{private_subnet_vlan_id}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0]\n#ahv_network_prefix = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\npayload = {\n    \"name\": ahv_network_name,\n     \"vlanId\": ahv_vlan_id\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nprint(\"lan_network_uuid={}\".format(resp_parse['networkUuid']))\n# endregion",
                    "eval_variables": [
                      "lan_network_uuid"
                    ],
                    "eval_scope": "local",
                    "type": "",
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "type": "SET_VARIABLE",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "CalmUpdateSubnetsProject",
                  "attrs": {
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "AhvAddLanInterface",
                  "attrs": {
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcAddVnictoVm\n# description:  Add a network virtual interface on a VM (AHV)\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\nahv_network_uuid = \"@@{lan_network_uuid}@@\"\nahv_vm_uuid = \"@@{platform.metadata.uuid}@@\"\n#ahv_network_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#ahv_network_ip = ahv_network_address[0] + \".\" + ahv_network_address[1] + \".\" + ahv_network_address[2] + \".1\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n\n#region add virtual interface\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/vms/nics/fanout?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# Compose the json payload\npayload = [{\n    \"generic_dto\": {\n        \"spec_list\": [{\n                \"network_uuid\": ahv_network_uuid,\n                \"vlan_mode\": \"Trunked\",\n                \"is_connected\": \"true\"\n            }],\n        \"uuid\": ahv_vm_uuid \n}}]\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nahv_task_uuid = resp_parse['taskUuid']\n#endregion\n\n#region wait for task completion\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/tasks/{}\".format(ahv_task_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n#processing results\ni = 0\nahv_task_status = None\nwhile ahv_task_status != 'SUCCEEDED':\n    resp = process_request(url, method, headers)\n    if resp.ok:\n        json_resp = json.loads(resp.content)\n    else:\n        print (\"Post request failed\", resp.content)\n        exit(1)    \n    print(json_resp['status'])\n    ahv_task_status = (json_resp['status'])\n    if ahv_task_status==\"ERROR\":\n        exit(1)\n    print(json_resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(5)\n#endregion",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                },
                {
                  "target_any_local_reference": {
                    "kind": "app_service",
                    "name": "Firewall"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "FirewallCreateLanInterface",
                  "attrs": {
                    "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateInterface\n# description:  Create a interface and assign a static IP address\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\n#lan_net_cidr = \"@@{private_subnet_cidr}@@\".split(\"/\")[1]\n#lan_net_address = \"@@{private_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\n#lan_net_ip = lan_net_address[0] + \".\" + lan_net_address[1] + \".\" + lan_net_address[2] + \".1\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor interface in resp_parse['data']:\n    last_lan_if = interface['if']\n\n# increment last_lan_if (example vtnet0 to vtnet1)\nlan_if = last_lan_if[:-1] + str((int(last_lan_if[-1])+1))\n# endregion\n\n# region apply static IP to interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\npayload = {\n    \"id\": lan_if,\n    \"if\": lan_if,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n# region apply configuration\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/apply\"\nmethod = \"POST\"\npayload = {}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion",
                    "type": "",
                    "command_line_args": "",
                    "exit_status": [],
                    "script_type": "static"
                  },
                  "timeout_secs": "0",
                  "type": "EXEC",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "d3a43acb_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "2045c54f_dag"
              },
              "variable_list": []
            },
            "type": "",
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Package3"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "a15dc4d2_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "35cc29d0_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "a15dc4d2_dag"
              },
              "variable_list": []
            },
            "upgrade_runbook": {}
          },
          "variable_list": []
        }
      ],
      "app_profile_list": [
        {
          "deployment_create_list": [
            {
              "type": "GREENFIELD",
              "action_list": [],
              "name": "5028772f_deployment",
              "min_replicas": "1",
              "default_replicas": "1",
              "depends_on_list": [],
              "published_service_local_reference_list": [],
              "max_replicas": "1",
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package1"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "HAProxyMasterAHV"
              },
              "variable_list": [],
              "description": ""
            },
            {
              "type": "GREENFIELD",
              "action_list": [],
              "name": "ef294948_deployment",
              "min_replicas": "1",
              "default_replicas": "1",
              "depends_on_list": [],
              "published_service_local_reference_list": [],
              "max_replicas": "1",
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package1_cloned_0"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "HAProxySlaveAHV"
              },
              "variable_list": [],
              "description": ""
            },
            {
              "type": "GREENFIELD",
              "action_list": [],
              "name": "090fbd28_deployment",
              "min_replicas": "1",
              "default_replicas": "1",
              "depends_on_list": [],
              "published_service_local_reference_list": [],
              "max_replicas": "1",
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Package3"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "FirewallAHV"
              },
              "variable_list": [],
              "description": ""
            }
          ],
          "environment_reference_list": [
            "f1e79bd6-8a96-3804-e88a-d66f20fee00d"
          ],
          "application_url": "",
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "user",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=AhvCreateNewVlan}",
                      "@{kind=app_task; name=FirewallCreateNewVlan}",
                      "@{kind=app_task; name=CalmUpdateSubnetsProject}"
                    ],
                    "name": "662ca7b6_dag",
                    "attrs": {
                      "edges": " ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "AhvCreateNewVlan",
                    "attrs": {
                      "exit_status": "",
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    PcNewAhvNetworkIpam\n# description:  Given a vlan id, a network, create an ipam managed network in AHV.\n# output vars:  ahv_network_uuid, ahv_network_name\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nahv_network_name = \"@@{calm_project_name}@@-@@{calm_application_name}@@-@@{tenant_subnet_name}@@\"\nahv_vlan_id = \"@@{tenant_subnet_vlan_id}@@\"\nahv_network_prefix = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[1]\nahv_network_address = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0]\nahv_network_split = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nahv_network_ip = ahv_network_split[0] + \".\" + ahv_network_split[1] + \".\" + ahv_network_split[2] + \".1\"\ntenant_network_uuid = \"@@{tenant_network_uuid}@@\"\nnutanix_cluster_uuid = \"@@{platform.status.cluster_reference.uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region network creation\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v0.8/networks?proxyClusterUuid={}\".format(nutanix_cluster_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = {'Content-Type': 'application/json','Accept': 'application/json'}\n\n# Compose the json payload\npayload = {\n    \"name\":ahv_network_name,\n    \"vlanId\":ahv_vlan_id,\n    \"ipConfig\":{\n    \"networkAddress\": ahv_network_address,\n    \"prefixLength\": ahv_network_prefix\n    }\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive network uuid\nresp_parse = json.loads(resp.content)\nnew_network_uuid= resp_parse['networkUuid']\nif (tenant_network_uuid):\n    tenant_network_uuid=tenant_network_uuid + \",\" + new_network_uuid\nelse:\n    tenant_network_uuid=new_network_uuid\n\nprint(\"tenant_network_uuid={}\".format(tenant_network_uuid))\n#endregion",
                      "eval_variables": "tenant_network_uuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "FirewallCreateNewVlan",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/08\n# task_name:    pfSenseCreateVlanInterface\n# description:  Create a VLAN interface and assign to a the LAN interface\n# output vars:  \n# endregion\n\n#region capture Calm variables\nusername = '@@{pfsense.username}@@'\nusername_secret = \"@@{pfsense.secret}@@\"\napi_server = \"@@{pfsense_ip}@@\"\nvlan_net_cidr = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[1]\nvlan_net_address = \"@@{tenant_subnet_cidr}@@\".split(\"/\")[0].split(\".\")\nvlan_net_ip = vlan_net_address[0] + \".\" + vlan_net_address[1] + \".\" + vlan_net_address[2] + \".1\"\nvlan_tag = \"@@{tenant_subnet_vlan_id}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n# region netmask_to_cidr function\ndef netmask_to_cidr(netmask):\n    '''\n    :param netmask: netmask ip addr (eg: 255.255.255.0)\n    :return: equivalent cidr number to given netmask ip (eg: 24)\n    '''\n    return sum([bin(int(x)).count('1') for x in netmask.split('.')])\n# endregion  \n\n\n# region login\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/access_token\"\nmethod = \"POST\"\npayload = {\n    \"client-id\": username,\n    \"client-token\": username_secret\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n\n# retreive the api_token\nresp_parse = json.loads(resp.content)\npfsense_token = resp_parse['data']['token']\n# endregion\n\n\n# region get last interface\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/status/interface\"\nmethod = \"GET\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers)\n\n# retreive interface information\nresp_parse = json.loads(resp.content)\nfor int in resp_parse['data']:\n    if \"lan\" in int['name']:\n        lan_if = int['if']\n\n# endregion\n\n# region create VLAN\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface/vlan\"\nmethod = \"POST\"\npayload = {\n    \"if\": lan_if,\n    \"tag\": vlan_tag,\n    \"descr\": \"VLAN \"+vlan_tag+\"\"\n\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion\n\n\n# region create VLAN interface assignment\napi_server_port = \"443\"\napi_server_endpoint = \"/api/v1/interface\"\nmethod = \"POST\"\nvlan_if = \"{}.{}\".format(lan_if,vlan_tag)\npayload = {\n    \"id\": vlan_if, \n    \"if\": vlan_if,\n    \"type\": \"staticv4\",\n    \"ipaddr\": vlan_net_ip,\n    \"subnet\": vlan_net_cidr,\n    \"enable\": True,\n    \"apply\": True\n}\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nheaders = {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer {}'.format(pfsense_token)}\n\n# making the call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Firewall"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "CalmUpdateSubnetsProject",
                    "attrs": {
                      "script": "#region headers\n# * author:     igor.zecevic@nutanix.com\n# * version:    2021/04/12\n# task_name:    CalmUpdateSubnetsProject\n# description:  Given a project name, update the subnets settings\n# endregion\n\n#region capture Calm variables\nusername = '@@{pc.username}@@'\nusername_secret = \"@@{pc.secret}@@\"\napi_server = \"@@{pc_ip}@@\"\nproject_name = \"@@{calm_project_name}@@\"\nahv_network_uuid = \"@@{tenant_network_uuid}@@\"\n# endregion\n\n# region API call function\ndef process_request(url, method, headers, payload=None):\n    if (payload is not None):\n        payload = json.dumps(payload)\n    r = urlreq(url, verb=method, auth='BASIC', user=username, passwd=username_secret, params=payload, verify=False, headers=headers)\n    if r.ok:\n        print(\"Request was successful\")\n        print(\"Status code: {}\".format(r.status_code))\n    else:\n        print(\"Request failed\")\n        print('Status code: {}'.format(r.status_code))\n        print(\"Headers: {}\".format(headers))\n        print(\"Payload: {}\".format(json.dumps(payload)))\n        print('Response: {}'.format(json.dumps(json.loads(r.content), indent=4)))\n        exit(1)\n    return r\n# endregion\n\n#region get project \napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects/list\"\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"POST\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"filter\":\"name=={}\".format(project_name)\n}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_uuid = resp_parse['entities'][0]['metadata']['uuid']\n# endregion\n\n\n#region get project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"GET\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\n\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\nproject_internal_spec = resp_parse['spec']\nproject_internal_metadata = resp_parse['metadata']\nproject_new_net = {\"kind\":\"subnet\", \"uuid\": ahv_network_uuid}\nproject_internal_spec['project_detail']['resources']['subnet_reference_list'].append(project_new_net)\nproject_internal_spec.pop('access_control_policy_list')\n# endregion\n\n\n#region update project_internal\napi_server_port = \"9440\"\napi_server_endpoint = \"/api/nutanix/v3/projects_internal/{}\".format(project_uuid)\nurl = \"https://{}:{}{}\".format(api_server, api_server_port, api_server_endpoint)\nmethod = \"PUT\"\nheaders = { 'Content-Type': 'application/json', 'Accept': 'application/json'}\npayload = {\n    \"api_version\": \"3.1\",\n    \"spec\": project_internal_spec,\n    \"metadata\": project_internal_metadata\n}\n\nprint(payload)\n# making the api call \nprint(\"Making a {} API call to {}\".format(method, url))\nresp = process_request(url, method, headers, payload)\nresp_parse = json.loads(resp.content)\n# endregion",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "bebdc88f_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "662ca7b6_dag"
                },
                "variable_list": [
                  {
                    "val_type": "STRING",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "tenant_subnet_cidr",
                    "value": "",
                    "label": "Enter VLAN Network CIDR (example: 192.168.1.0/24)",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "tenant_subnet_vlan_id",
                    "value": "",
                    "label": "Enter VLAN ID (example: 88)",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": true,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "tenant_subnet_name",
                    "value": "",
                    "label": "Enter VLAN name (example: myvlan)",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "CreateNewVLan"
            }
          ],
          "name": "AHV",
          "restore_config_list": [],
          "snapshot_config_list": [],
          "patch_list": [],
          "variable_list": [
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "public_dns2",
              "value": "10.68.97.5",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "public_dns1",
              "value": "10.68.97.4",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "public_gateway",
              "value": "10.68.98.1",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "public_netmask",
              "value": "255.255.255.0",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "tenant_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "lan_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "private_network_uuid",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^[\\d]*$"
              },
              "val_type": "INT",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "private_subnet_vlan_id",
              "value": "",
              "label": "Enter Private Subnet VLAN ID (example: 10)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(?:/\\d{1,2}|)"
              },
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "private_subnet_cidr",
              "value": "",
              "label": "Enter Private Subnet CIDR (example: 10.10.10.0/24)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "pc_ip",
              "value": "10.68.97.150",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "hapropxy_virtual_router_id",
              "value": "51",
              "label": "Virtual Router ID?",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "SECRET",
              "name": "haproxy_auth_pwd",
              "value": "",
              "label": "Password for accessing vrrpd",
              "attrs": {
                "is_secret_modified": false,
                "secret_reference": {},
                "type": "SECRET"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "haproxy_slave_ip",
              "value": "",
              "label": "Enter HAproxy Slave IP address (example: 192.168.1.1)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "haproxy_master_ip",
              "value": "",
              "label": "Enter HAproxy Master IP address (example: 192.168.1.1)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "haproxy_virtual_ip",
              "value": "",
              "label": "Enter HAproxy Virtual IP address (example: 192.168.1.1)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "pfsense_ip",
              "value": "192.168.1.1",
              "label": "Enter Firewall IP address (example: 192.168.1.1)",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            }
          ]
        }
      ],
      "published_service_definition_list": [],
      "default_credential_local_reference": {
        "kind": "app_credential",
        "name": "CENTOS"
      },
      "type": "USER"
    },
    "name": "Clone VM from snapshot and clone disk to target VM"
  },
  "api_version": "3.0",
  "metadata": {
    "last_update_time": "1663768566888815",
    "kind": "blueprint",
    "spec_version": 256,
    "creation_time": "1617697733459169",
    "name": "Clone VM from snapshot and clone disk to target VM"
  }
}
