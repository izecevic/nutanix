{
  "status": {
    "description": "",
    "state": "DRAFT",
    "message_list": [],
    "resources": {
      "service_definition_list": [
        {
          "port_list": [],
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "6a9e4cf2-ac45-45d1-8a0c-a289989b3230",
              "name": "action_create",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "cb55a9cd-4f08-4b86-bbff-cb52af517cba",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=registerHostnameInDns; uuid=065682bc-80f7-4171-8590-2f2c7f2c5d81}",
                      "@{kind=app_task; name=configureDns; uuid=6269c721-949d-4a74-83ab-12c3e1f20fc6}",
                      "@{kind=app_task; name=deleteNameReservation; uuid=d9ffce44-d98f-4162-904e-d3de762c369e}",
                      "@{kind=app_task; name=mountNgtTools; uuid=ba553447-9f0a-431c-a6f8-47fc900a4896}",
                      "@{kind=app_task; name=addRequestedDisks; uuid=10c90af9-ea5d-4ccb-9cd9-f7c80ff5434f}",
                      "@{kind=app_task; name=installRequiredPackages; uuid=80c5dd70-5f84-4454-b119-19642307f128}",
                      "@{kind=app_task; name=installNgtTools; uuid=e3358156-fc05-4ade-b796-2b948866297d}",
                      "@{kind=app_task; name=configureNtp; uuid=7b1671e0-8e6f-4b9f-9b58-336e5f2bc1df}",
                      "@{kind=app_task; name=joinActiveDirectory; uuid=d5ed7f67-fe16-4cbe-aa0b-0deaa2fa9a3c}",
                      "@{kind=app_task; name=createAuthLists; uuid=f516bfc4-9d63-4060-93d0-b73e2dce7c37}",
                      "@{kind=app_task; name=addLoginUsers; uuid=6ece1592-a219-470b-8a68-65dc93a94298}",
                      "@{kind=app_task; name=addGroupLogins; uuid=69d32275-79ee-414e-a65a-0a276380d92c}",
                      "@{kind=app_task; name=addAdminUsers; uuid=477b810b-535d-4245-98ea-348914810fc8}",
                      "@{kind=app_task; name=addAdminGroups; uuid=a7c2138d-ba06-4cac-bf53-de1ed2af862f}",
                      "@{kind=app_task; name=configureOsFirewall; uuid=0777715b-a6e2-4a55-9e4a-494794afafa3}",
                      "@{kind=app_task; name=addNodeIntoLoadBalancerPool; uuid=890e0320-67b8-40b4-a791-a3c91994de92}",
                      "@{kind=app_task; name=addNodeIntoNagios; uuid=9c683d7f-976e-4421-80c8-242cf24c9e87}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "               ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "7fa70b69_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "065682bc-80f7-4171-8590-2f2c7f2c5d81",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$bookedName = \"@@{bookedName}@@\"\n$domainName = \"@@{domainName}@@\"\n$assignedIp = \"@@{assignedIp}@@\"\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nAdd-DnsServerResourceRecordA -Name $bookedName -ZoneName $domainName -IPv4Address $assignedIp -CreatePtr"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "registerHostnameInDns"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "6269c721-949d-4a74-83ab-12c3e1f20fc6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'cat > /etc/resolv.conf <<EOF\nsearch @@{domainName}@@\nnameserver @@{dns1}@@\nnameserver @@{dns2}@@\nEOF\n'",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm; uuid=623d2e1d-24f0-4288-9c21-d6d9de0003af}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "configureDns"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "d9ffce44-d98f-4162-904e-d3de762c369e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\ncalmVariableUuid = '@@{calmVariableUuid}@@'\n#FUNCTIONS\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables/{}'.format(calmVariableUuid)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsleep(30)\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    exit(0)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteNameReservation"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "ba553447-9f0a-431c-a6f8-47fc900a4896",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n    name: getVirtualMachinesFromPrismCentral\n .TYPE:\n    Nutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n    This action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n    Function should return object type STRING with VALUE:\n .AUTHOR:\n    David Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n    1.0.0    Init version.\n .TESTED ON:\n    Nutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n    @Gfunction    \n        mainAction(payload, newEvent):\n        Executes the main code in this action.\n .INPUT PARAMETERS:\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n    resultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\n\n#FUNCTIONS\n\n#GLOBAL VARIABLES\njwt = '@@{calm_jwt}@@'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nvirtualMachineUuid = \"@@{id}@@\"\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Get VM spec\nr = urlreq(api_url, verb='GET', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n###Create spec Template\nresp.pop('status', None)\nresp['spec']['resources']['guest_tools'] = {}\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools'] = {}\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools']['iso_mount_state'] = \"MOUNTED\"\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools']['state'] = \"ENABLED\"\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 2 - Get virtual machine list - Main Code\n###run put action\nr = urlreq(api_url, verb='PUT', params=json.dumps(resp), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n###Get Task uuid\ntaskUuid = resp['status']['execution_context']['task_uuid']\n\n##Execution Block 3 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/tasks/{}'.format(taskUuid)\ntaskStatus = None\ni = 0\n##Execution Block 3 - Get virtual machine list - Main Code\nwhile taskStatus != 'SUCCEEDED':\n    #Get VM status\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n    print(resp['status'])\n    taskStatus = (resp['status'])\n    print(resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(15)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "mountNgtTools"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "10c90af9-ea5d-4ccb-9cd9-f7c80ff5434f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n    name: getVirtualMachinesFromPrismCentral\n .TYPE:\n    Nutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n    This action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n    Function should return object type STRING with VALUE:\n .AUTHOR:\n    David Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n    1.0.0    Init version.\n .TESTED ON:\n    Nutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n    @Gfunction    \n        mainAction(payload, newEvent):\n        Executes the main code in this action.\n .INPUT PARAMETERS:\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n    resultObjs = {String}\n\n'''\n#FUNCTIONS\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\nvirtualMachineUuid = \"@@{id}@@\"\nnewDiskList = ('''@@{extraDisk}@@'''.splitlines())\nfor i in range(0, len(newDiskList)): \n    newDiskList[i] = int(newDiskList[i]) \n\n\n\n#GLOBAL VARIABLES\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nnewDiskListCount = len(newDiskList)\nprint(newDiskListCount)\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Get VM spec\nr = urlreq(api_url, verb='GET', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n\n###Get scsi index in use\nscsiIndexList = []\nfor disk in resp['spec']['resources']['disk_list']:\n    if (disk['device_properties']['disk_address']['adapter_type'] != 'IDE'):\n        scsiIndexList.append(disk['device_properties']['disk_address']['device_index'])\n\n###set new scsi index list\nnewList = list(item for item in range(100) if item not in scsiIndexList)[:newDiskListCount]\n\n###Create Disk Template\ni = 0\nfor newDisk in newDiskList:\n    a = {}\n    a['storage_config'] = resp['spec']['resources']['disk_list'][0]['storage_config']\n    a['device_properties'] = {}\n    a['device_properties']['device_type'] = \"DISK\"\n    a['device_properties']['disk_address'] = {}\n    a['device_properties']['disk_address']['device_index'] = newList[i]\n    a['device_properties']['disk_address']['adapter_type'] = \"SCSI\"\n    a['disk_size_bytes'] = (newDisk * 1073741824)    \n    i=i+1\n    resp['spec']['resources']['disk_list'].append(a)\nresp.pop('status', None)\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 2 - Get virtual machine list - Main Code\n###run update action\nr = urlreq(api_url, verb='PUT', params=json.dumps(resp), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n###Get Task uuid\ntaskUuid = resp['status']['execution_context']['task_uuid']\n\n\n##Execution Block 3 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/tasks/{}'.format(taskUuid)\ntaskStatus = None\ni = 0\n##Execution Block 3 - Get virtual machine list - Main Code\nwhile taskStatus != 'SUCCEEDED':\n    #Get VM status\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)    \n    print(resp['status'])\n    taskStatus = (resp['status'])\n    print(resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(15)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addRequestedDisks"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "80c5dd70-5f84-4454-b119-19642307f128",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo dnf install -y \\\n        sssd \\\n        realmd \\\n        oddjob \\\n        oddjob-mkhomedir \\\n        adcli \\\n        samba-common \\\n        samba-common-tools \\\n        krb5-workstation \\\n        openldap-clients \\\n        policycoreutils-python-utils \\\n        chrony \\\n        tar \\\n        python3 ",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm; uuid=623d2e1d-24f0-4288-9c21-d6d9de0003af}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "installRequiredPackages"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "e3358156-fc05-4ade-b796-2b948866297d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n\n#INPUT VARIABLES\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo mount /dev/sr0 /mnt\nsudo python3 /mnt/installer/linux/install_ngt.py\nsudo eject\nsudo systemctl enable ngt_guest_agent",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm; uuid=623d2e1d-24f0-4288-9c21-d6d9de0003af}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "installNgtTools"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "7b1671e0-8e6f-4b9f-9b58-336e5f2bc1df",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'cat > /etc/chrony.conf <<EOF\nserver @@{ntp1}@@ iburst\nserver @@{ntp2}@@ iburst\ndriftfile /var/lib/chrony/drift\nlogdir /var/log/chrony\nlog measurements statistics tracking\nEOF\n'\nsudo systemctl start chronyd \nsudo systemctl enable chronyd",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm; uuid=623d2e1d-24f0-4288-9c21-d6d9de0003af}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "configureNtp"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "d5ed7f67-fe16-4cbe-aa0b-0deaa2fa9a3c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\n\nCOMMENT\n#FUNCTIONS\n\n#INPUT VARIABLES\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'echo @@{domainAdminCreds.secret}@@ | realm join --user=@@{domainAdminCreds.username}@@ @@{domainName}@@'\nsudo bash -c 'sed -i \"s/use_fully_qualified_names = True/use_fully_qualified_names = False/g\" /etc/sssd/sssd.conf'\nsudo bash -c 'sed -i \"s/%u@%d/%u/g\" /etc/sssd/sssd.conf'\nsudo systemctl restart sssd\nsudo systemctl daemon-reload",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm; uuid=623d2e1d-24f0-4288-9c21-d6d9de0003af}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "joinActiveDirectory"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "f516bfc4-9d63-4060-93d0-b73e2dce7c37",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "def varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\nloginGroups = ('''@@{loginGroups}@@'''.splitlines())\nadministrativeGroups = ('''@@{administrativeGroups}@@'''.splitlines())\nloginUsers = ('''@@{loginUsers}@@'''.splitlines())\nadministrativeUsers = ('''@@{administrativeUsers}@@'''.splitlines())\ndefaultUser = \"@@{defaultUser}@@\"\nprojectName = \"@@{projectName}@@\"\ndomainName = \"@@{domainName}@@\"\njwt = '@@{calm_jwt}@@'\npayload = {\n  \"kind\": \"project\",\n  \"filter\": \"name=={}\".format(projectName)\n}\n\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    projectAdGroups = resp['entities'][0]['spec']['resources']['external_user_group_reference_list']\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nfor adGroup in projectAdGroups:\n    loginGroups.append(((((adGroup['name']).replace('CN=', '')).replace('cn=', '')).split(','))[0] + \"@\" + domainName)\n\nadministrativeUsers.append(defaultUser)\nloginUserList = loginUsers + administrativeUsers\nloginGroupList = loginGroups + administrativeGroups\n\n\nprint(\"loginUsersList={}\".format(varToBase64(loginUserList)))\nprint(\"loginGroupsList={}\".format(varToBase64(loginGroupList)))\nprint(\"adminUsersList={}\".format(varToBase64(administrativeUsers)))\nprint(\"adminGroupsList={}\".format(varToBase64(administrativeGroups)))",
                      "eval_variables": "loginUsersList loginGroupsList adminUsersList adminGroupsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "createAuthLists"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "6ece1592-a219-470b-8a68-65dc93a94298",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "test=$(\n\techo \"@@{loginUsersList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo realm permit $i\n\tdone"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addLoginUsers"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "69d32275-79ee-414e-a65a-0a276380d92c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "test=$(\n\techo \"@@{loginGroupsList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo realm permit -g $i\n\tdone"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addGroupLogins"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "477b810b-535d-4245-98ea-348914810fc8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "test=$(\n\techo \"@@{adminUsersList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo i=$i /usr/bin/env bash -c 'echo \"$i  ALL=(ALL) NOPASSWD:ALL\" | tee /etc/sudoers.d/$i'\n\tdone"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addAdminUsers"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "a7c2138d-ba06-4cac-bf53-de1ed2af862f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "test=$(\n\techo \"@@{adminGroupsList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo i=$i /usr/bin/env bash -c 'echo \"%$i  ALL=(ALL) NOPASSWD:ALL\" | tee /etc/sudoers.d/$i'\n\tdone"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addAdminGroups"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "0777715b-a6e2-4a55-9e4a-494794afafa3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "print(\"hola\")"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "configureOsFirewall"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "890e0320-67b8-40b4-a791-a3c91994de92",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://172.30.0.30/mgmt/shared/authn/login\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\n\napplicationPort = '@@{applicationPort}@@'\nnodeIp = '@@{assignedIp}@@'\nnodeName =  '{}:{}'.format(nodeIp, applicationPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\ndescription = '{}.{}'.format('@@{bookedName}@@', '@@{Service1.domainName}@@')\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}/members'.format(loafBalancerIp, partition, poolName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"partition\": partition,\n   \"name\": nodeName,\n   \"address\": nodeIp,\n   \"description\": description\n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addNodeIntoLoadBalancerPool"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "9c683d7f-976e-4421-80c8-242cf24c9e87",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "nagiosServer=\"@@{nagiosServer}@@\"\nhostname=\"@@{bookedName}@@\"\nhostIp=\"@@{assignedIp}@@\"\napiKey=\"@@{nagiosCreds.secret}@@\"\n\napi_url = \"https://{}/nagiosxi/api/v1/config/host?apikey={}&pretty=1\".format(nagiosServer, apiKey)\nheaders = {'Content-Type': 'application/x-www-form-urlencoded',  'Accept':'application/json'}\npayload = \"host_name={}&address={}&check_command=check_ping\\!3000,80%\\!5000,100%&max_check_attempts=2&check_period=24x7&contacts=nagiosadmin&notification_interval=5&notification_period=24x7&applyconfig=1\".format(hostname, hostIp)\nr = urlreq(api_url, verb='POST',params=payload, headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "addNodeIntoNagios"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "edcc067c-81e1-4484-aabe-d74b12017a00",
                "state": "DRAFT",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "8dac5e7d-cb5f-48c6-8824-0e0bc28dcf5e",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "bookedName"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "e59e4e4c-7ca6-49d3-acd0-3dd4e7b359dc",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "assignedIp"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "d4212eac-69aa-4be6-9573-9a75f0a65c90",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "dns1"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "918f891b-d946-402c-90d0-e8a1b9d0a99b",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "dns2"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "b4535217-ff87-4e64-85f1-9dd6804b189c",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "calmVariableUuid"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "7fa70b69_dag",
                  "uuid": "cb55a9cd-4f08-4b86-bbff-cb52af517cba"
                },
                "name": "2e264b3d_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "213123f2-b1c3-44c8-bec2-5a78dcb7fab3",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "778d41ba-1f24-4c94-8452-0385a8574f40",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "29c9b5f0_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "fa33e662-e34a-4f66-8224-94e7b4e05f50",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "29c9b5f0_dag",
                  "uuid": "778d41ba-1f24-4c94-8452-0385a8574f40"
                },
                "name": "104c1563_runbook"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "002ccd55-ec26-4ada-8fbe-b96ea54fce38",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "94f85f94-56eb-4ae6-a4c8-7d0fb344653e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "2e5bbd2d_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "66fbc06a-6abe-452c-89bb-fbfdc29eefc1",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "2e5bbd2d_dag",
                  "uuid": "94f85f94-56eb-4ae6-a4c8-7d0fb344653e"
                },
                "name": "29c66290_runbook"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "95b4c2fe-5b49-41d0-adf7-adc7b2d619ad",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bceea9d6-5da3-47cf-8e46-cc3a285bfd60",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "3026f2d1_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "df067919-7ed2-4aa3-b06c-e2077bb38b85",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "3026f2d1_dag",
                  "uuid": "bceea9d6-5da3-47cf-8e46-cc3a285bfd60"
                },
                "name": "623bb9bb_runbook"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "dc04befd-11ca-40d0-906f-3fda0af0e3ee",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "670b97da-cca5-4f57-ad33-0ee3f8562cb8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "335f6bca_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "495180e5-b3f1-4cab-ba80-41e5dc22113f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "335f6bca_dag",
                  "uuid": "670b97da-cca5-4f57-ad33-0ee3f8562cb8"
                },
                "name": "814f7bf6_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "8c156c21-8737-49af-9379-d5a44cce84dc",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "e0ece78d-033c-47f6-9d94-065c4673a75b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Service_Element_Delete_de197124_c004_42e9_9cee_ee9e590cf041; uuid=0b7871bb-058c-4da4-b8da-49158b12d2d7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "0b7871bb-058c-4da4-b8da-49158b12d2d7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Service_Element_Delete_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "1a3eeea3-9607-4fb1-b291-e535995926b7",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Service_de197124_c004_42e9_9cee_ee9e590cf041",
                  "uuid": "e0ece78d-033c-47f6-9d94-065c4673a75b"
                },
                "name": "SYS_GEN__Runbook_Service_de197124_c004_42e9_9cee_ee9e590cf041"
              }
            }
          ],
          "message_list": [],
          "uuid": "de197124-c004-42e9-9cee-ee9e590cf041",
          "state": "DRAFT",
          "depends_on_list": [
            {
              "kind": "app_service",
              "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6",
              "name": "Load_Balancer"
            }
          ],
          "editables": {},
          "tier": "",
          "singleton": false,
          "variable_list": [
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "214f251c-27fe-4f2c-baf9-3e2f024f364f",
              "value": "etisalatssi.ae",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "domainName"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "e7404450-30fe-4271-bd54-9a7c393ec795",
              "value": "ens3",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "netDeviceName"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "b72b4cc1-635e-4f2f-a57b-6c8006f9df67",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "is_secret_modified": false,
                "secret_reference": {
                  "uuid": "7befc7d7-e0fe-4c1e-9c59-2c734308364a"
                },
                "type": "SECRET"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "SECRET",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "sshPublicKey"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "4d0907d6-09ab-4b0b-87d0-a55f1028f09e",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "replicaSelected"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "0a7e0226-e948-48d2-820d-57802cc9c8db",
              "value": "172.17.0.3",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "ntp1"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "0c8a204d-6078-418e-8c05-ece063512e55",
              "value": "0.es.pool.ntp.org",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "ntp2"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "71f42722-2445-4c95-a73b-9c42e0a270fb",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "loginUsersList"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "9b5cd60f-3e02-4b6c-89a9-2cbb42988997",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "loginGroupsList"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "472104c7-66cf-4525-9e71-dfca77d604a7",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "adminUsersList"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "5bcc02ae-d00c-4e12-b656-d83cd2013c72",
              "value": "",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "adminGroupsList"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "13df8fb5-0aeb-4e2c-b30d-f7ab92c3c615",
              "value": "10.106.93.70",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "nagiosServer"
            }
          ],
          "name": "Service1"
        },
        {
          "port_list": [],
          "description": "",
          "action_list": [
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "00d39cff-77a2-4163-9e52-fe1ae970df1c",
              "name": "action_create",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "80190ee6-67ad-4b1d-904f-227e0b9c6c48",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=registerHostnameInDns; uuid=a1496161-a298-430c-a726-3bef43b314c4}",
                      "@{kind=app_task; name=deleteNameReservation; uuid=8a1f5742-d156-4ce8-9c7c-cdab4901e93d}",
                      "@{kind=app_task; name=createLoadBalancerPool; uuid=366adec6-e3f6-4b69-855e-e08c8aa3f703}",
                      "@{kind=app_task; name=createLoadBalancervs; uuid=7b0f60a1-dcf6-46b6-93c1-46edc01c88be}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "ec7aa8f3_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "a1496161-a298-430c-a726-3bef43b314c4",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$bookedName = \"@@{bookedName}@@\"\n$domainName = \"@@{domainName}@@\"\n$assignedIp = \"@@{assignedIp}@@\"\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nAdd-DnsServerResourceRecordA -Name $bookedName -ZoneName $domainName -IPv4Address $assignedIp -CreatePtr"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "registerHostnameInDns"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "8a1f5742-d156-4ce8-9c7c-cdab4901e93d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\ncalmVariableUuid = '@@{calmVariableUuid}@@'\n#FUNCTIONS\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables/{}'.format(calmVariableUuid)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsleep(30)\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    exit(0)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteNameReservation"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "366adec6-e3f6-4b69-855e-e08c8aa3f703",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://172.30.0.30/mgmt/shared/authn/login\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{loadBalancerPartition}@@\"\n\n#virtualserver vars\nvirtualServerPort = '@@{virtualServerPort}@@'\napplicationPort = '@@{applicationPort}@@'\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\npoolDescription = '@@{calm_application_name}@@'\nmonitor  = 'tcp_half_open'\nloadBalancingMode = 'least-connections-member'\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"partition\": partition,\n   \"description\": poolDescription,\n   \"name\": poolName,\n   \"members\":[],\n   \"monitor\": monitor,\n   \"loadBalancingMode\": loadBalancingMode \n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "createLoadBalancerPool"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "7b0f60a1-dcf6-46b6-93c1-46edc01c88be",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{loadBalancerPartition}@@\"\n\n#virtualserver vars\nvirtualServerPort = '@@{virtualServerPort}@@'\napplicationPort = '@@{applicationPort}@@'\n#Airwatch-7010-VS\nvirtualServerName = '{}-{}-VS'.format('@@{calm_application_name}@@', virtualServerPort)\nvirtualServerIp = '@@{assignedIp}@@'\nvirtualServerDestination = '{}:{}'.format(virtualServerIp, virtualServerPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Virtual Server\napi_url = 'https://{}/mgmt/tm/ltm/virtual'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"name\": virtualServerName,\n   \"destination\": virtualServerDestination,\n   \"description\": \"created from Nutanix Calm\",\n   \"ipProtocol\": \"tcp\",\n   \"translateAddress\": \"enabled\",\n   \"translatePort\": \"enabled\",\n   \"sourceAddressTranslation\": {\n        \"type\": \"automap\"\n    },\n   \"partition\": partition,\n   \"pool\": poolName\n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "createLoadBalancervs"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "92134038-0241-48b3-af11-872f3eb8c0cc",
                "state": "DRAFT",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "ec7aa8f3_dag",
                  "uuid": "80190ee6-67ad-4b1d-904f-227e0b9c6c48"
                },
                "name": "c35de71c_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "078c864b-ec88-431b-bb64-f8700e0c0d71",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "77d9daf8-2c86-4d4a-9093-73ac873b003b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "e268c8a1_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "07142af9-6a50-423d-afd0-1f33b26612eb",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "e268c8a1_dag",
                  "uuid": "77d9daf8-2c86-4d4a-9093-73ac873b003b"
                },
                "name": "c2181aea_runbook"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "2a9818ae-e00f-4174-a394-80b825d9e7c9",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "9eb59660-41a7-43bd-97b4-ba14b585a5f4",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "d369e836_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2bdcf3ff-d28a-4fa0-a49f-3d7762544bda",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d369e836_dag",
                  "uuid": "9eb59660-41a7-43bd-97b4-ba14b585a5f4"
                },
                "name": "ec82b6ce_runbook"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "34c00eda-3ab4-451f-81df-41b8fc1cc9ce",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "f2abf450-aedf-4dd1-82d2-e8e6ab2723fc",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "66e02879_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "41441571-5d08-47cc-9100-7047bdf9cb3d",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "66e02879_dag",
                  "uuid": "f2abf450-aedf-4dd1-82d2-e8e6ab2723fc"
                },
                "name": "fed34e5f_runbook"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "e5a36034-b336-4f66-aea8-8be672608a77",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b623597a-c8dc-41eb-81e2-dda68151f27a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "a5f232dc_dag"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "02a6890f-3476-427c-86db-4d41c38fa63c",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "a5f232dc_dag",
                  "uuid": "b623597a-c8dc-41eb-81e2-dda68151f27a"
                },
                "name": "50078295_runbook"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "517e0094-a7a2-4796-8b0f-c6d615e33620",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "6b036a11-03e6-4819-8c22-78692a48b94e",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Service_Element_Delete_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=639ba30b-89b8-4457-9b0c-870bef1e2b51}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "639ba30b-89b8-4457-9b0c-870bef1e2b51",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Service_Element_Delete_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2368403e-56f0-4b3b-a3a8-bbe5dad17a74",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6",
                  "uuid": "6b036a11-03e6-4819-8c22-78692a48b94e"
                },
                "name": "SYS_GEN__Runbook_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
              }
            }
          ],
          "message_list": [],
          "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6",
          "state": "DRAFT",
          "depends_on_list": [],
          "editables": {},
          "tier": "",
          "singleton": false,
          "variable_list": [
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "9a01418d-e7d6-4501-9aff-54e3942d5607",
              "value": "etisalatssi.ae",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "domainName"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "3a2c9ec6-1e6b-4e28-b221-43dc4704076e",
              "value": "Calm-Partition",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {},
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "loadBalancerPartition"
            }
          ],
          "name": "Load_Balancer"
        }
      ],
      "substrate_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "message_list": [],
              "uuid": "51925eca-581f-4c8b-8fc1-4288c6283dd9",
              "name": "pre_action_create",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "8fb66d3b-2a86-4b6b-9f47-c98366b0a688",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=getVirtualMachinesFromPrismCentral; uuid=d1c99efb-3d54-4832-a9ab-b76309610ff2}",
                      "@{kind=app_task; name=getHostnamesFromDns; uuid=4f79cae1-eb46-4e5e-8f5c-5f2cce2d54c4}",
                      "@{kind=app_task; name=getAvailableNames; uuid=a1c955c0-7417-4987-9cb7-0f5b9a37d783}",
                      "@{kind=app_task; name=blockFreeHostname; uuid=d718b8a2-6f85-4523-86ce-55fb1c48bc27}",
                      "@{kind=app_task; name=getIpFromIpam; uuid=83da4072-ad93-4ced-a55f-2828d760eee6}",
                      "@{kind=app_task; name=setVirtualMachineNetwork; uuid=526f775d-ac83-4eee-8da1-4f606f6c14bf}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "    ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "7697031b_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "d1c99efb-3d54-4832-a9ab-b76309610ff2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "'''\nSCRIPT INFORMATION\n .NAME:\n\tname: 001_getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. \n        Pre-create\n        Set Variable.\n .DESCRIPTION:\n\tGet full list of existing VMs on Prism Central via APIv3 requests.\n .EXPECTED RESULT:\n\tScript should return the complete list of existing VMs on Nutanix Prism Central as Json converted into base64 string. \n .AUTHORS:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version    David Ríos Delgado.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .INPUT PARAMETERS:\n\t@param \n                {string}\n                {Mandatory]\n                {Name=inputExample1}\n                {Description=This is an example 1}\n\t@param \n                {string}\n                {Mandatory]\n                {Name=inputExample2}\n                {Description=This is an example 2}\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .IN-ACTION VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\n\n#FUNCTIONS\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#GLOBAL VARIABLES\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n\n#MAIN CODE BLOC EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\npayload = {\n  \"kind\": \"vm\"\n}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    virtualMachineCount = resp['metadata']['total_matches']\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n\n##Execution Block 2 - Get virtual machine list - Variables\nlist = []\noffset = 0\nlength = 500\niterations = (int(virtualMachineCount) / length) + 1\n##Execution Block 2 - Get virtual machine list - Main Code\nfor iterator in range(iterations):\n    print(iterator)    \n    payload = {\n      \"kind\": \"vm\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n    \tif \"@@{virtualMachinePrefix}@@\" in item['spec']['name']:\n    \t\tlist.append(item['spec']['name'])\n    offset = offset + length\n\nresult = varToBase64(list)\n\n#RETURN\nprint \"virtualMachineList={}\".format(result)\nexit(0)",
                      "eval_variables": "virtualMachineList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getVirtualMachinesFromPrismCentral"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "4f79cae1-eb46-4e5e-8f5c-5f2cce2d54c4",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\nfunction psObjectToBase64($psObject){\n\treturn [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(($psObject | convertto-json -Compress)))\n}\n\n#INPUT VARIABLES\n$zoneName = \"@@{Service1.domainName}@@\"\n$virtualMachinePrefix = \"@@{virtualMachinePrefix}@@\"\n\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$dnsList = @((Get-DnsServerResourceRecord -ZoneName $zoneName -RRType A | Where-Object {$_.Hostname -like \"*$virtualMachinePrefix*\"}).hostname)\nwrite-host $dnsList\nif (($null -eq $dnsList[0]) -or ($dnsList[0] -eq \"\")){\n\twrite-host \"No values found\"$dnsl\t\n    $dnsList = @('null1')\n}\n$return = psObjectToBase64($dnsList)\n#RETURN\nwrite-host dnsList=$return",
                      "eval_variables": "dnsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getHostnamesFromDns"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "a1c955c0-7417-4987-9cb7-0f5b9a37d783",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#INPUT VARIABLES\nvirtualMachineList = base64ToJson(\"@@{virtualMachineList}@@\")\ndnsList = base64ToJson(\"@@{dnsList}@@\")\nvirtualMachinePrefix = \"@@{virtualMachinePrefix}@@\"\nhostnameIncremental = \"@@{hostnameIncremental}@@\"\n#GLOBAL VARIABLES\ntempList = []\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Decode Base64 to dicts/list\nif (dnsList != 'null1'):\n\tif (isinstance(dnsList, str)):\n\t\tvirtualMachineList.append(dnsList)\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList))\n\telse:\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList + dnsList))\n    ##Get unique members from dnsList and virtualMachineList\nelse:\n\tnameList = virtualMachineList\n###Remove from list those member with different character count than prefix + incremental\nnameList = [n for n in nameList if len(n) == (len(virtualMachinePrefix) + int(hostnameIncremental))]\n###Convert list into list of integers\nnameList = [int(n[len(virtualMachinePrefix):]) for n in nameList]\n###Get first 21 free members from range.\nfreeMembers = (([str(n).zfill(int(hostnameIncremental)) for n in range((10 ** int(hostnameIncremental)) -1 ) if n not in nameList ])[:21])\n###Remove first element from list (0) \nfreeMembers.pop(0)\n###if freeMembers = 0 exit and print error\nif (len(freeMembers) == 0):\n    print(\"No more names available in the pool\")\n    exit(1)\n###Add prefix for each item in list\nfreeMembers = (map(virtualMachinePrefix.__add__,freeMembers))\nprint(freeMembers)\nresult = varToBase64(freeMembers)\n\n#RETURN\nprint(\"freeMembers={}\".format(result))\nexit(0)",
                      "eval_variables": "freeMembers",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getAvailableNames"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "d718b8a2-6f85-4523-86ce-55fb1c48bc27",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\n#INPUT VARIABLES\nfreeMembers = base64ToJson(\"@@{freeMembers}@@\")\njwt = '@@{calm_jwt}@@'\nvarController = \"@@{calm_unique}@@\"\ncalmArrayIndex = \"@@{calm_array_index}@@\"\ncalmApplicationUuid = \"@@{calm_application_uuid}@@\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nif (calmArrayIndex != \"0\"):\n\tsleep(int(calmArrayIndex) * 30)\n\t\nfor member in freeMembers:\n    payload = {\n        \"spec\": {\n            \"name\": \"{}\".format(member),\n            \"resources\": {\n            \"val_type\": \"STRING\",\n            \"data_type\": \"BASE\",\n            \"value\": \"{0}-{1}\".format(calmApplicationUuid, varController),\n            \"type\": \"LOCAL\"\n            }\n            \n        },\n    \"metadata\": {\"kind\": \"app_variable\"}\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        print (\"Post request Ok\", r.content)\n        if (resp[\"spec\"][\"resources\"][\"value\"] == \"{0}-{1}\".format(calmApplicationUuid, varController)):\n            break\n    else:\n        print (\"Post request failed\", r.content)\n\n\n#RETURN\nprint (\"bookedName={}\".format(member))\nprint (\"calmVariableUuid={}\".format(resp[\"metadata\"][\"uuid\"]))\nexit(0)\n\n",
                      "eval_variables": "bookedName calmVariableUuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "blockFreeHostname"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "83da4072-ad93-4ced-a55f-2828d760eee6",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$dnsForwardAreaId = \"@@{Service1.domainName}@@\"\n$network = '@@{networkSelection}@@'\n$virtualMachineName = '@@{bookedName}@@'\n\n#GLOBAL VARIABLES\n$subnet = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" | \n    where-object {$_.name -eq $network}\n\n$reverseZoneId = `\n    ($subnet.NetworkId.split(\".\").split(\"/\"))[2] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[1] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[0] + \n    \".in-addr.arpa\"\n\n$reverseZone = Get-IpamDnsZone -Zonetype IPv4Reverse -ZoneName $reverseZoneId\n$forwardZone = Get-IpamDnsZone -Zonetype Forward -ZoneName $dnsForwardAreaId\n\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n$validator = $False\n$exitCount = 0\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$ipamServerList = Get-IpamServerInventory | Sort-Object Name\nwhile(($validator -eq $False) -or ($exitCount -lt 5)){\n    $error.clear()\n    try{\n        $assignedIp = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n            where-object {$_.name -eq $network} |\n            Get-IpamRange |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name} |\n\t\t\tFind-IpamFreeAddress -TestReachability |\n            Add-IpamAddress `\n            \t-ManagedByService \"MS DHCP\" `\n                -ServiceInstance $ipamServerList[0].name `\n            \t-DeviceName $virtualMachineName `\n                -ForwardLookupZone $forwardZone.ZoneName `\n                -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n                -ReverseLookupZone $reverseZone.ZoneName `\n                -ReverseLookupPrimaryServer $reverseZone.PreferredServerName `\n                -erroraction stop -PassThru\n            $validator = $True\n            $exitCount = 5\n    }   catch{\n            Write-Host \"Caught the exception\";\n            Write-Host $Error[0].Exception;\n            $validator = $False\n            $exitCount++\n        }\n}\n\n$returnIp=$assignedIp.IpAddress.IPAddressToString\nwrite-host \"retorno\"\n$returnIp\nfor($i = 1; $i -lt $ipamServerList.count){\n\t$ipamServerList[$i].name\n    Add-IpamAddress `\n    \t-IpAddress $returnIp `\n\t\t-ManagedByService \"MS DHCP\" `\n        -ServiceInstance $ipamServerList[$i].name `\n        -DeviceName $virtualMachineName `\n        -ForwardLookupZone $forwardZone.ZoneName `\n        -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n        -ReverseLookupZone $reverseZone.ZoneName `\n        -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n    $i++\n}\nAdd-IpamAddress `\n\t-IpAddress $returnIp `\n\t-ManagedByService \"IPAM\" `\n    -ServiceInstance \"localhost\" `\n    -DeviceName $virtualMachineName `\n    -ForwardLookupZone $forwardZone.ZoneName `\n    -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n    -ReverseLookupZone $reverseZone.ZoneName `\n    -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n\n\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$subData = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n\t\t   \twhere-object {$_.name -eq $network} \n$netData = Get-IpamRange `\n            -AddressFamily IPv4 `\n            -AddressCategory Private `\n            -AddressSpace \"Default\" |\n            where-object {$_.NetworkId -eq $subData.NetworkId} |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name}\n            \n\n#write-host \"netdata\"\n#$netData\n$returnSubnet=$netData.SubnetMask.IPAddressToString\n$returnGateway=($netData.Gateway -split(\"/\"))[0]\n$returnDns1=$netData.DnsServers[0].IPAddressToString\n$returnDns2=$netData.DnsServers[1].IPAddressToString\n\n#RETURN\nwrite-host \"assignedIp=$returnIp\"\nwrite-host \"subnet=$returnSubnet\"\nwrite-host \"gateway=$returnGateway\"\nwrite-host \"dns1=$returnDns1\"\nwrite-host \"dns2=$returnDns2\"",
                      "eval_variables": "assignedIp subnet gateway dns1 dns2",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getIpFromIpam"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "526f775d-ac83-4eee-8da1-4f606f6c14bf",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\nproject = '@@{projectName}@@'\nclusterSelection = '@@{clusterSelection}@@'\nnetworkSelection = '@@{networkSelection}@@'\njwt = '@@{calm_jwt}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistSelection = []\n#FUNCTIONS\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\npayload = {\n  \"kind\": \"project\"\n}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 2 - Get virtual machine list - Main Code\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\n##Execution Block 2 - Get virtual machine list - Variables\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 2 - Get virtual machine list - Main Code\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        if (((resp['spec']['cluster_reference']['name']) == clusterSelection) and (resp['spec']['name'] == networkSelection)):\n            selectedUuid = netUuid\n            print(\"netUuid\")\n            break\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)\n\nnetwork = {\"name\":networkSelection,\"uuid\":\"{}\".format(selectedUuid)}\n\n#RETURN\nprint (\"virtualMachineNetwork={}\".format(json.dumps(network)))",
                      "eval_variables": "virtualMachineNetwork",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "setVirtualMachineNetwork"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "fd3d742e-f080-4cf9-aeeb-88c63ab88077",
                "state": "DRAFT",
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "dd10e55e-604b-4c9f-a3fa-32d8aba98335",
                    "value": "3",
                    "label": "",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "hostnameIncremental"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "e387eddd-e82e-411d-838e-75f6b4ab742e",
                    "value": "",
                    "label": "",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "virtualMachineNetwork"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "7697031b_dag",
                  "uuid": "8fb66d3b-2a86-4b6b-9f47-c98366b0a688"
                },
                "name": "45297c5d_runbook"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "623cf14b-feaa-4103-95b8-1fb09ac8f6cb",
              "name": "post_action_delete",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "4f1d7b85-9d66-42de-84e7-bea90ba7612b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=deleteIpamObject; uuid=aef44351-7df1-458e-a5ad-b17a2a40837b}",
                      "@{kind=app_task; name=deleteActiveDirectoryObject; uuid=74613203-c85a-4628-a408-bf9838e19c6a}",
                      "@{kind=app_task; name=deleteMemberFromPool; uuid=e887fec5-1921-484c-83f3-61a8aced1c9c}",
                      "@{kind=app_task; name=removeNodeFromLoadBalancer; uuid=23588554-095d-441a-b3ac-c6aa8aa04b06}",
                      "@{kind=app_task; name=removeNodeFromNagios; uuid=fcedb77f-582d-4dfc-abe7-1a6a1bc16962}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "   ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "6bf1c87f_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "aef44351-7df1-458e-a5ad-b17a2a40837b",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "Remove-IpamAddress -IpAddress \"@@{assignedIp}@@\" -Force:$true"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteIpamObject"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "74613203-c85a-4628-a408-bf9838e19c6a",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "Get-ADComputer -Filter {name -eq \"@@{bookedName}@@\"} | Remove-ADComputer -Confirm:$false\nRemove-DnsServerResourceRecord -ZoneName \"@@{Service1.domainName}@@\" -RRType \"A\" -Name \"@@{bookedName}@@\" -RecordData \"@@{assignedIp}@@\" -Force:$true"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteActiveDirectoryObject"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "e887fec5-1921-484c-83f3-61a8aced1c9c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://172.30.0.30/mgmt/tm/ltm/pool/~calm~lbt-10-22-Pool/members/10.1.0.210:22\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\n\napplicationPort = '@@{applicationPort}@@'\nnodeIp = '@@{assignedIp}@@'\nnodeName =  '{}:{}'.format(nodeIp, applicationPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\ndescription = '{}.{}'.format('@@{bookedName}@@', '@@{Service1.domainName}@@')\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}/members/{}:{}'.format(loafBalancerIp, partition, poolName, nodeIp, applicationPort)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteMemberFromPool"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "23588554-095d-441a-b3ac-c6aa8aa04b06",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://172.30.0.30/mgmt/tm/ltm/node/~calm~10.1.0.210\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\nnodeIp = '@@{assignedIp}@@'\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/node/~{}~{}'.format(loafBalancerIp, partition, nodeIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "removeNodeFromLoadBalancer"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "fcedb77f-582d-4dfc-abe7-1a6a1bc16962",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "nagiosServer=\"@@{Service1.nagiosServer}@@\"\nhostname=\"@@{bookedName}@@\"\nhostIp=\"@@{assignedIp}@@\"\napiKey=\"@@{nagiosCreds.secret}@@\"\n\napi_url = \"https://{}/nagiosxi/api/v1/config/host?apikey={}&pretty=1&host_name={}&applyconfig=1\".format(nagiosServer, apiKey, hostname)\nheaders = {'Content-Type': 'application/x-www-form-urlencoded',  'Accept':'application/json'}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "removeNodeFromNagios"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "7701aeae-9c0f-48a5-9b87-9930cf2bfd1d",
                "state": "DRAFT",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "6bf1c87f_dag",
                  "uuid": "4f1d7b85-9d66-42de-84e7-bea90ba7612b"
                },
                "name": "431aa2f2_runbook"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "539c08ea-927f-47f5-b6a0-c067d1be664f",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bf52b509-b4fd-4bf5-b4d5-6251e8c5d349",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Provision_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=92c69e73-bfdc-42ac-853f-4ad88f10e46f}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=eb452bda-5269-4a4f-bc57-ccbb52d94731}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "PROVISION_NUTANIX",
                    "uuid": "92c69e73-bfdc-42ac-853f-4ad88f10e46f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "name": "@@{bookedName}@@",
                      "categories": "",
                      "availability_zone_reference": null,
                      "backup_policy": null,
                      "type": "",
                      "cluster_reference": null,
                      "resources": "@{nic_list=System.Object[]; parent_reference=; guest_tools=; num_vcpus_per_socket=1; num_sockets=1; serial_port_list=System.Object[]; gpu_list=System.Object[]; memory_size_mib=1024; power_state=ON; hardware_clock_timezone=; guest_customization=; type=; account_uuid=28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff; boot_config=; disk_list=System.Object[]}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Provision_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "eb452bda-5269-4a4f-bc57-ccbb52d94731",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "5141f0a9-8a48-49eb-ba54-6eff5591fabb",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "bf52b509-b4fd-4bf5-b4d5-6251e8c5d349"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for powering on an application",
              "message_list": [],
              "uuid": "8a8aeb72-fb2b-4d45-9d89-5c8df892148b",
              "name": "action_poweron",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "2d1c8732-3879-4303-80a5-003925baac0f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOn_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=588e7085-9670-4ce3-90f3-d7fd74ef8fa3}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=f86c55bd-bb80-4eb3-867d-d052d01081a8}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "588e7085-9670-4ce3-90f3-d7fd74ef8fa3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweron",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOn_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "f86c55bd-bb80-4eb3-867d-d052d01081a8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "cf061082-1268-45c8-9070-06294838f2ea",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "2d1c8732-3879-4303-80a5-003925baac0f"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "aeb7635f-cfc7-4c6c-837a-ae006c2fbb09",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ba8e60aa-4918-45de-991d-0747915cef4b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_Restart_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=a4c2ba59-a619-4394-aab7-a45bbbd9dd23}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=622461f1-93ee-4697-8bf4-72fefe966b7d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "a4c2ba59-a619-4394-aab7-a45bbbd9dd23",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_restart",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_Restart_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "622461f1-93ee-4697-8bf4-72fefe966b7d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_Linux8_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "6c5bca08-71a5-465c-b262-a18a58f7b25c",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "ba8e60aa-4918-45de-991d-0747915cef4b"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for suspending an application",
              "message_list": [],
              "uuid": "9b38edb3-1320-4c4d-9e69-d81067c86cf5",
              "name": "action_suspend",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "3eac824d-3de6-42cd-b264-c27c6fb3338d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "8e0c1e5e-3b95-4f61-aae3-712dd2aa9ead",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "3eac824d-3de6-42cd-b264-c27c6fb3338d"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for modifying an application",
              "message_list": [],
              "uuid": "204d7db9-11bc-46e9-bccc-e223be5d938c",
              "name": "action_modify",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "2bf0584f-b20e-4710-9dc3-e45df1b0181a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "efd846f9-6eb7-48d0-b73f-875a0333524f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "2bf0584f-b20e-4710-9dc3-e45df1b0181a"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for powering off an application",
              "message_list": [],
              "uuid": "4d7d9b9c-ee1a-4a04-9a11-9d38cebcd12f",
              "name": "action_poweroff",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "6dd3d82b-1cb5-48e7-9d81-635d9547e23d",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Operation_PowerOff_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=83c4e465-2638-49db-b3f0-257c0fa2f797}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VMOPERATION_NUTANIX",
                    "uuid": "83c4e465-2638-49db-b3f0-257c0fa2f797",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweroff",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Operation_PowerOff_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e49b7246-e438-48a3-b60b-bf97fd80a176",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "6dd3d82b-1cb5-48e7-9d81-635d9547e23d"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "9e4dec54-1382-48f7-9285-5cdfe7945f21",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "908e30d9-8077-4b57-a5fd-7d4c32e59fdc",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=3cccdc13-0dff-40c0-b4a3-5c385d238b84}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_NUTANIX",
                    "uuid": "3cccdc13-0dff-40c0-b4a3-5c385d238b84",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "460f8190-1f30-4bfd-b88f-1cb2a92e87b2",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "908e30d9-8077-4b57-a5fd-7d4c32e59fdc"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "efe25678-03ea-43f4-8fb9-6aed139ccf76",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "a85a0e7b-c670-4ddb-b0ca-6850cc2def7b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Soft_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=6cdb9805-3504-4f5a-ab57-5c15e6c1e0e6}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_NUTANIX",
                    "uuid": "6cdb9805-3504-4f5a-ab57-5c15e6c1e0e6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Soft_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "eac89a2f-1ebc-490c-b176-120424225d3b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "a85a0e7b-c670-4ddb-b0ca-6850cc2def7b"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "1b4ac24e-faaa-49f9-87e4-2bb5a0517113",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "00683f8b-33b5-4b4f-9041-bcf2c5ec0332",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Nutanix_Snapshot_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=e7d9a471-2808-4eb7-8e9e-02d9fe145f8b}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "VM_SNAPSHOT_DELETE_NUTANIX",
                    "uuid": "e7d9a471-2808-4eb7-8e9e-02d9fe145f8b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_snapshot_delete",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Nutanix_Snapshot_Delete_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "bfca2072-bc39-4dc7-adb6-ec3745f7af77",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "2c0ea428-1834-4d82-bb2f-b104961fded4",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "8fa02563-a5c2-439a-8fbc-2fc813c624d3",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2",
                  "uuid": "00683f8b-33b5-4b4f-9041-bcf2c5ec0332"
                },
                "name": "SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
              }
            }
          ],
          "message_list": [],
          "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2",
          "state": "DRAFT",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "disable_readiness_probe": false,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "60",
            "connection_port": 22,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "ntnxcalm",
              "uuid": "623d2e1d-24f0-4288-9c21-d6d9de0003af"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {
                "nic_list": {},
                "serial_port_list": {},
                "num_sockets": true,
                "memory_size_mib": true,
                "boot_config": true,
                "disk_list": {
                  "0": {
                    "device_properties": {
                      "disk_address": ""
                    },
                    "disk_size_mib": true
                  }
                }
              }
            }
          },
          "os_type": "Linux",
          "type": "AHV_VM",
          "create_spec": {
            "name": "@@{bookedName}@@",
            "categories": {},
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "@@{virtualMachineNetwork.uuid}@@"
                  },
                  "type": ""
                }
              ],
              "parent_reference": null,
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "serial_port_list": [],
              "gpu_list": [],
              "memory_size_mib": 1024,
              "power_state": "ON",
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\nhostname: @@{bookedName}@@\nfqdn: @@{bookedName}@@.@@{Service1.domainName}@@\nusers:\n  - name: ntnxcalm\n    ssh-authorized-keys:\n      - @@{Service1.sshPublicKey}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    root:@@{rootCreds.secret}@@\n  expire: False\nssh_pwauth:   true\n#Config net file\nwrite_files:\n  - content: |\n      DEVICE=@@{Service1.netDeviceName}@@\n      NAME=@@{Service1.netDeviceName}@@\n      TYPE=Ethernet\n      NM_CONTROLLED=yes\n      ONBOOT=yes\n      BOOTPROTO=static\n      IPADDR=@@{assignedIp}@@\n      NETMASK=@@{subnet}@@\n      GATEWAY=@@{gateway}@@\n    path: /etc/sysconfig/network-scripts/ifcfg-@@{Service1.netDeviceName}@@\nruncmd:\n  - [ifdown, ens3]\n  - [ifup, ens3]\n  - [systemctl, mask, cloud-init-local, cloud-init, cloud-config, cloud-final]\n  - [eject]"
                },
                "type": "",
                "sysprep": null
              },
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "adapter_type": "SCSI",
                    "device_index": 0,
                    "type": ""
                  }
                },
                "type": "",
                "boot_type": "",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "OL81_APP_RF2",
                    "uuid": "5a70a33d-2c84-4feb-ae66-163adaa9eb78"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "device_type": "DISK",
                    "disk_address": {
                      "adapter_type": "SCSI",
                      "device_index": 0,
                      "type": ""
                    }
                  }
                }
              ]
            }
          },
          "variable_list": [],
          "name": "Linux8"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "message_list": [],
              "uuid": "e7d3b553-a123-429b-b130-b8e84cd0aafd",
              "name": "pre_action_create",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "db220cbb-1484-4b91-817b-4d155c1c0df7",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=getHostnamesFromDns; uuid=53f0c9fd-1e25-40a0-8294-605cc11e7694}",
                      "@{kind=app_task; name=getAvailableNames; uuid=97e62f56-f665-45c0-abae-7325d3b7e680}",
                      "@{kind=app_task; name=blockFreeHostname; uuid=8b5323ba-9f50-41a2-90cd-55f7c71e9606}",
                      "@{kind=app_task; name=getIpFromIpam; uuid=9ed50aa5-73d5-44da-826c-21fe1c1b6797}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "0ea738ea_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "53f0c9fd-1e25-40a0-8294-605cc11e7694",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\nfunction psObjectToBase64($psObject){\n\treturn [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(($psObject | convertto-json -Compress)))\n}\n\n#INPUT VARIABLES\n$zoneName = \"@@{Service1.domainName}@@\"\n$virtualMachinePrefix = \"@@{virtualMachinePrefix}@@-VS\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$dnsList = @((Get-DnsServerResourceRecord -ZoneName $zoneName -RRType A | Where-Object {$_.Hostname -like \"*$virtualMachinePrefix*\"}).hostname)\nwrite-host $dnsList\nif (($null -eq $dnsList[0]) -or ($dnsList[0] -eq \"\")){\n\twrite-host \"No values found\"$dnsl\t\n    $dnsList = @('null1')\n}\n$return = psObjectToBase64($dnsList)\n#RETURN\nwrite-host dnsList=$return",
                      "eval_variables": "dnsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getHostnamesFromDns"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "97e62f56-f665-45c0-abae-7325d3b7e680",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#INPUT VARIABLES\nvirtualMachineList = []\ndnsList = base64ToJson(\"@@{dnsList}@@\")\nvirtualMachinePrefix = \"@@{virtualMachinePrefix}@@-VS\"\nhostnameIncremental = \"@@{hostnameIncremental}@@\"\n#GLOBAL VARIABLES\ntempList = []\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Decode Base64 to dicts/list\nif (dnsList != 'null1'):\n\tif (isinstance(dnsList, str)):\n\t\tvirtualMachineList.append(dnsList)\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList))\n\telse:\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList + dnsList))\n    ##Get unique members from dnsList and virtualMachineList\nelse:\n\tnameList = virtualMachineList\n###Remove from list those member with different character count than prefix + incremental\nnameList = [n for n in nameList if len(n) == (len(virtualMachinePrefix) + int(hostnameIncremental))]\n###Convert list into list of integers\nnameList = [int(n[len(virtualMachinePrefix):]) for n in nameList]\n###Get first 21 free members from range.\nfreeMembers = (([str(n).zfill(int(hostnameIncremental)) for n in range((10 ** int(hostnameIncremental)) -1 ) if n not in nameList ])[:21])\n###Remove first element from list (0) \nfreeMembers.pop(0)\n###if freeMembers = 0 exit and print error\nif (len(freeMembers) == 0):\n    print(\"No more names available in the pool\")\n    exit(1)\n###Add prefix for each item in list\nfreeMembers = (map(virtualMachinePrefix.__add__,freeMembers))\nprint(freeMembers)\nresult = varToBase64(freeMembers)\n\n#RETURN\nprint(\"freeMembers={}\".format(result))\nexit(0)",
                      "eval_variables": "freeMembers",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getAvailableNames"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "8b5323ba-9f50-41a2-90cd-55f7c71e9606",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\n#INPUT VARIABLES\nfreeMembers = base64ToJson(\"@@{freeMembers}@@\")\njwt = '@@{calm_jwt}@@'\nvarController = \"@@{calm_unique}@@\"\ncalmArrayIndex = \"@@{calm_array_index}@@\"\ncalmApplicationUuid = \"@@{calm_application_uuid}@@\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nif (calmArrayIndex != \"0\"):\n\tsleep(calmArrayIndex * 30)\n\t\nfor member in freeMembers:\n    payload = {\n        \"spec\": {\n            \"name\": \"{}\".format(member),\n            \"resources\": {\n            \"val_type\": \"STRING\",\n            \"data_type\": \"BASE\",\n            \"value\": \"{0}-{1}\".format(calmApplicationUuid, varController),\n            \"type\": \"LOCAL\"\n            }\n            \n        },\n    \"metadata\": {\"kind\": \"app_variable\"}\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        print (\"Post request Ok\", r.content)\n        if (resp[\"spec\"][\"resources\"][\"value\"] == \"{0}-{1}\".format(calmApplicationUuid, varController)):\n            break\n    else:\n        print (\"Post request failed\", r.content)\n\n\n#RETURN\nprint (\"bookedName={}\".format(member))\nprint (\"calmVariableUuid={}\".format(resp[\"metadata\"][\"uuid\"]))\nexit(0)\n\n",
                      "eval_variables": "bookedName calmVariableUuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "blockFreeHostname"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SET_VARIABLE",
                    "uuid": "9ed50aa5-73d5-44da-826c-21fe1c1b6797",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$dnsForwardAreaId = \"@@{Service1.domainName}@@\"\n$network = '@@{networkSelection}@@'\n$virtualMachineName = '@@{bookedName}@@'\n\n#GLOBAL VARIABLES\n$subnet = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" | \n    where-object {$_.name -eq $network}\n\n$reverseZoneId = `\n    ($subnet.NetworkId.split(\".\").split(\"/\"))[2] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[1] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[0] + \n    \".in-addr.arpa\"\n\n$reverseZone = Get-IpamDnsZone -Zonetype IPv4Reverse -ZoneName $reverseZoneId\n$forwardZone = Get-IpamDnsZone -Zonetype Forward -ZoneName $dnsForwardAreaId\n\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n$validator = $False\n$exitCount = 0\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$ipamServerList = Get-IpamServerInventory | Sort-Object Name\nwhile(($validator -eq $False) -or ($exitCount -lt 5)){\n    $error.clear()\n    try{\n        $assignedIp = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n            where-object {$_.name -eq $network} |\n            Get-IpamRange |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name} |\n\t\t\tFind-IpamFreeAddress -TestReachability |\n            Add-IpamAddress `\n            \t-ManagedByService \"MS DHCP\" `\n                -ServiceInstance $ipamServerList[0].name `\n            \t-DeviceName $virtualMachineName `\n                -ForwardLookupZone $forwardZone.ZoneName `\n                -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n                -ReverseLookupZone $reverseZone.ZoneName `\n                -ReverseLookupPrimaryServer $reverseZone.PreferredServerName `\n                -erroraction stop -PassThru\n            $validator = $True\n            $exitCount = 5\n    }   catch{\n            Write-Host \"Caught the exception\";\n            Write-Host $Error[0].Exception;\n            $validator = $False\n            $exitCount++\n        }\n}\n\n$returnIp=$assignedIp.IpAddress.IPAddressToString\nwrite-host \"retorno\"\n$returnIp\nfor($i = 1; $i -lt $ipamServerList.count){\n\t$ipamServerList[$i].name\n    Add-IpamAddress `\n    \t-IpAddress $returnIp `\n\t\t-ManagedByService \"MS DHCP\" `\n        -ServiceInstance $ipamServerList[$i].name `\n        -DeviceName $virtualMachineName `\n        -ForwardLookupZone $forwardZone.ZoneName `\n        -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n        -ReverseLookupZone $reverseZone.ZoneName `\n        -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n    $i++\n}\nAdd-IpamAddress `\n\t-IpAddress $returnIp `\n\t-ManagedByService \"IPAM\" `\n    -ServiceInstance \"localhost\" `\n    -DeviceName $virtualMachineName `\n    -ForwardLookupZone $forwardZone.ZoneName `\n    -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n    -ReverseLookupZone $reverseZone.ZoneName `\n    -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n\n\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$subData = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n\t\t   \twhere-object {$_.name -eq $network} \n$netData = Get-IpamRange `\n            -AddressFamily IPv4 `\n            -AddressCategory Private `\n            -AddressSpace \"Default\" |\n            where-object {$_.NetworkId -eq $subData.NetworkId} |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name}\n            \n\n#write-host \"netdata\"\n#$netData\n$returnSubnet=$netData.SubnetMask.IPAddressToString\n$returnGateway=($netData.Gateway -split(\"/\"))[0]\n$returnDns1=$netData.DnsServers[0].IPAddressToString\n$returnDns2=$netData.DnsServers[1].IPAddressToString\n\n#RETURN\nwrite-host \"assignedIp=$returnIp\"\nwrite-host \"subnet=$returnSubnet\"\nwrite-host \"gateway=$returnGateway\"\nwrite-host \"dns1=$returnDns1\"\nwrite-host \"dns2=$returnDns2\"",
                      "eval_variables": "assignedIp subnet gateway dns1 dns2",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "getIpFromIpam"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "35e86bf3-1b75-4346-80c8-c904f04f0a64",
                "state": "DRAFT",
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "7ce0dba2-c90c-4ffd-ba9e-39cae5114c76",
                    "value": "3",
                    "label": "",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {},
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "hostnameIncremental"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "0ea738ea_dag",
                  "uuid": "db220cbb-1484-4b91-817b-4d155c1c0df7"
                },
                "name": "aec5250e_runbook"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "c93a5598-8370-4d57-a4e3-633c4c7fc80a",
              "name": "post_action_delete",
              "state": "DRAFT",
              "critical": false,
              "attrs": {},
              "type": "fragment",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "f56af6b3-72ab-489c-ae13-fb658d37720e",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=deleteIpamObject; uuid=be1785e2-4841-4af7-8074-b3f408de294d}",
                      "@{kind=app_task; name=deleteActiveDirectoryObject; uuid=64ea5a35-4308-4c96-b80a-5c9be567873b}",
                      "@{kind=app_task; name=deleteVirtualServer; uuid=b25c9eae-2fe2-46a1-952e-2ea6d56061d2}",
                      "@{kind=app_task; name=deletePool; uuid=65ff0ec5-c7a2-40d3-bffd-ccdaf6546502}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "f6ab4d7f_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "be1785e2-4841-4af7-8074-b3f408de294d",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "Remove-IpamAddress -IpAddress \"@@{assignedIp}@@\" -Force:$true"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteIpamObject"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "64ea5a35-4308-4c96-b80a-5c9be567873b",
                    "child_tasks_local_reference_list": [],
                    "state": "DRAFT",
                    "attrs": {
                      "script_type": "npsscript",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "Remove-DnsServerResourceRecord -ZoneName \"@@{Service1.domainName}@@\" -RRType \"A\" -Name \"@@{bookedName}@@\" -RecordData \"@@{assignedIp}@@\" -Force:$true"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteActiveDirectoryObject"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "b25c9eae-2fe2-46a1-952e-2ea6d56061d2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://hostname/mgmt/tm/ltm/virtual/~partition-name~vs-name\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\nvirtualServerPort = '@@{virtualServerPort}@@'\nvirtualServerName = '{}-{}-VS'.format('@@{calm_application_name}@@', virtualServerPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Virtual Server\napi_url = 'https://{}/mgmt/tm/ltm/virtual/~{}~{}'.format(loafBalancerIp, partition, virtualServerName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deleteVirtualServer"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXEC",
                    "uuid": "65ff0ec5-c7a2-40d3-bffd-ccdaf6546502",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "script_type": "static",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script": "#https://hostname/mgmt/tm/ltm/pool/~partition-name~pool-name\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\napplicationPort = '@@{applicationPort}@@'\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}'.format(loafBalancerIp, partition, poolName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "deletePool"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "751a308e-13bd-4d42-9bd4-5716ab03278a",
                "state": "DRAFT",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "f6ab4d7f_dag",
                  "uuid": "f56af6b3-72ab-489c-ae13-fb658d37720e"
                },
                "name": "39435ecb_runbook"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "cb009947-6f33-4762-966d-9aa8847bbd88",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "c10ba431-9dd4-4afc-9931-66d77f1be6f6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Existing_Machine_Provision_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=2aaa5e20-d44c-491d-a6e6-1c17f700b5c5}",
                      "@{kind=app_task; name=SYS_GEN__check_login_for_LoadBalancer1_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=dfa94467-dc6e-47e1-a8b3-95d5792ca81b}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "PROVISION_EXISTING_MACHINE",
                    "uuid": "2aaa5e20-d44c-491d-a6e6-1c17f700b5c5",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": "PROVISION_EXISTING_MACHINE",
                      "address": "10.106.86.254"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Existing_Machine_Provision_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CHECK_LOGIN",
                    "uuid": "dfa94467-dc6e-47e1-a8b3-95d5792ca81b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "retries": "5",
                      "dial_timeout": "",
                      "timeout": "60",
                      "address": "@@{ip_address}@@",
                      "type": "CHECK_LOGIN",
                      "sleep_time": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__check_login_for_LoadBalancer1_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "287ba9c6-c233-4cd1-ab0e-f934fe5879cb",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "c10ba431-9dd4-4afc-9931-66d77f1be6f6"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for powering on an application",
              "message_list": [],
              "uuid": "becda552-6b31-4b39-962c-69ec84e4ae57",
              "name": "action_poweron",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ad344227-afaa-403a-9412-1fb15e4324ad",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Existing_Machine_Operation_PowerOn_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=76c87ae7-55ef-431e-bf71-265fd133c0b7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXISTING_MACHINE_OPERATION",
                    "uuid": "76c87ae7-55ef-431e-bf71-265fd133c0b7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweron",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Existing_Machine_Operation_PowerOn_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "3008406c-ef97-40c6-bb6a-38fb166bfd7b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "ad344227-afaa-403a-9412-1fb15e4324ad"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "a2ffed06-4e08-4247-9126-873471bc7140",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "04241d92-8fca-4ea1-9a34-527db001c05c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Existing_Machine_Operation_Restart_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=fadab3f3-e026-4ac6-a5cf-7913ec1898e2}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXISTING_MACHINE_OPERATION",
                    "uuid": "fadab3f3-e026-4ac6-a5cf-7913ec1898e2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_restart",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Existing_Machine_Operation_Restart_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "705dcbcb-e959-4832-a54e-2310027fcb1b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "04241d92-8fca-4ea1-9a34-527db001c05c"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for suspending an application",
              "message_list": [],
              "uuid": "83437b7d-dece-438b-885c-9626bd7662aa",
              "name": "action_suspend",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "1cad103f-9ca8-472a-8ad5-0e440d3f6639",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "a9ef4e54-0081-43f1-a0e9-7cdfc710919b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "1cad103f-9ca8-472a-8ad5-0e440d3f6639"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for modifying an application",
              "message_list": [],
              "uuid": "b5473b13-0d55-44d9-bae3-01b874611e8a",
              "name": "action_modify",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ae0c4456-bff6-4668-ae4a-8f88c4791334",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "efbfd465-c01a-49b5-a927-ed86bfd87a5f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "ae0c4456-bff6-4668-ae4a-8f88c4791334"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for powering off an application",
              "message_list": [],
              "uuid": "ad8aaec1-dc5a-4808-9189-b82261ea3b33",
              "name": "action_poweroff",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "75feca11-6a09-4834-b7bf-73c813c7f3d6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Existing_Machine_Operation_PowerOff_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=8324e8e6-70e5-4128-ac0b-3894baf072e7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXISTING_MACHINE_OPERATION",
                    "uuid": "8324e8e6-70e5-4128-ac0b-3894baf072e7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "operation_type": "action_poweroff",
                      "type": "GENERIC_OPERATION"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Existing_Machine_Operation_PowerOff_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "bc7995a7-8239-4e3c-aad1-2cdd29c37f3f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "75feca11-6a09-4834-b7bf-73c813c7f3d6"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "f5f52a11-c183-4a41-b575-20f778c232a1",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "fe42a8a6-f54c-4c24-a9e8-5b50bd1d4724",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Existing_Machine_Delete_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=b7862dbc-eaa4-41ce-9b08-53588889973a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "EXISTING_MACHINE_DELETE",
                    "uuid": "b7862dbc-eaa4-41ce-9b08-53588889973a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Existing_Machine_Delete_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c01ee9f3-2184-430b-b5a5-773b3235c27f",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "fe42a8a6-f54c-4c24-a9e8-5b50bd1d4724"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "71963414-b506-4b02-8827-82d2e28fea13",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "971b63d1-4039-4fb5-ae8f-bc4db29b2e4c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Substrate_Element_Delete_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=09c6f918-725e-4d08-ad4d-a7aca21d030d}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "09c6f918-725e-4d08-ad4d-a7aca21d030d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Substrate_Element_Delete_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "3b9b574b-097f-4b85-aeff-386a7ba74ef2",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d",
                  "uuid": "971b63d1-4039-4fb5-ae8f-bc4db29b2e4c"
                },
                "name": "SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
              }
            }
          ],
          "message_list": [],
          "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d",
          "state": "DRAFT",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "disable_readiness_probe": true,
            "address": "@@{ip_address}@@",
            "delay_secs": "60",
            "connection_port": 22
          },
          "editables": {},
          "os_type": "Linux",
          "type": "EXISTING_VM",
          "create_spec": {
            "type": "PROVISION_EXISTING_MACHINE",
            "address": "10.106.86.254"
          },
          "variable_list": [],
          "name": "LoadBalancer1"
        }
      ],
      "credential_definition_list": [
        {
          "username": "ntnxcalm",
          "description": "",
          "state": "DRAFT",
          "message_list": [],
          "uuid": "623d2e1d-24f0-4288-9c21-d6d9de0003af",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "KEY",
          "name": "ntnxcalm"
        },
        {
          "username": "calm",
          "description": "",
          "state": "DRAFT",
          "message_list": [],
          "uuid": "9b734767-b947-4f56-bc79-564168a4d477",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "domainAdminCreds"
        },
        {
          "username": "root",
          "description": "",
          "state": "DRAFT",
          "message_list": [],
          "uuid": "1326f1f7-a28a-426f-bb8b-951069f1df1f",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {
            "secret": true
          },
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "rootCreds"
        },
        {
          "username": "calm",
          "description": "",
          "state": "DRAFT",
          "message_list": [],
          "uuid": "d1da248f-ffde-4916-aa69-0936a393f53b",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "loadBalancerCreds"
        },
        {
          "username": "root",
          "description": "",
          "state": "DRAFT",
          "message_list": [],
          "uuid": "9eb05fd3-2aa7-41b5-993e-4ff9d692d55a",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "editables": {},
          "cred_class": "static",
          "type": "PASSWORD",
          "name": "nagiosCreds"
        }
      ],
      "type": "USER",
      "app_profile_list": [
        {
          "deployment_create_list": [
            {
              "description": "",
              "action_list": [
                {
                  "description": "System action for creating an application",
                  "message_list": [],
                  "uuid": "a6fe2d38-7150-4af6-958e-58993c1516f7",
                  "name": "action_create",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=1e4b3fd4-672d-4117-875e-8342224e5b12; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CREATE_DEPLOYMENT_ELEMENT; uuid=0e42c777-461a-4b06-b32c-8e384e9360ba; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Provision_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=3e89e651-b68f-470f-8656-b4bd5ae493cf; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__pre_create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6c9005b5-56bb-4a2d-b336-ace19a24db76; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=4d0182d1-644c-4f4c-8c85-81777896b5bd; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__install_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=97ca5d12-10fa-4f5e-a3eb-28a428078787; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=cb26fd8a-774b-49d0-a050-2b4c312cd4d6; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "dc3ecd36-8757-4e40-8ebb-138bf14a7da7",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "1e4b3fd4-672d-4117-875e-8342224e5b12"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for starting an application",
                  "message_list": [],
                  "uuid": "be086ff4-5b7d-4906-8a0c-19b27af3d61a",
                  "name": "action_start",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=96aa491f-4d11-4fc5-9f21-6da18b34e9d9; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=c8595648-f777-4bd6-9271-fdcaf4944071; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=2c34aacf-2f11-45ce-8750-eb634528d9ca; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "a438c016-c5ee-4c19-bacc-c2cff53c7125",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "96aa491f-4d11-4fc5-9f21-6da18b34e9d9"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for restarting an application",
                  "message_list": [],
                  "uuid": "0d8a1e46-935e-4b8c-9c34-851f5a223edc",
                  "name": "action_restart",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=d7fe59a3-2533-48ea-ae4d-50b194a75062; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=4966c08f-098e-45cc-98a1-c1de9eea446b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=79849a03-ad3d-48f8-b936-a5226dc97910; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "ff558b1d-6226-4731-84cd-22d9d8ea1924",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "d7fe59a3-2533-48ea-ae4d-50b194a75062"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for stopping an application",
                  "message_list": [],
                  "uuid": "2f088d1b-efb7-4d34-96bc-7e8cfbacf22c",
                  "name": "action_stop",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=e38ec622-8421-4c22-98dc-911b86d0a8a0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=18f8f469-64d4-48e9-9cb3-f0fd0bca401f; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=80c97eb8-54a7-46b9-b354-19961b84524e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "eb82ebbd-f156-43d0-ab78-bd797d2054f7",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "e38ec622-8421-4c22-98dc-911b86d0a8a0"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for deleting an application. Deletes created VMs as well",
                  "message_list": [],
                  "uuid": "903020e8-ce1b-437a-a3d3-d7f9634f5cfc",
                  "name": "action_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=e4ce021d-b73b-4854-8ebb-cc91a27d14be; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=02491b84-beaf-49e0-b09d-febb2e02ba91; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=1c70d0fc-d9fe-415a-8615-2f4c8c1342f0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=206f2978-0080-4f72-b323-fa7e745a05e2; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__uninstall_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=28c54024-66b6-463b-bddd-280b7a10403c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=3695f8be-dd43-49a9-8e87-6c4cb7e8b402; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__post_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=DELETE_DEPLOYMENT_ELEMENT; uuid=96f6fc19-5490-4053-86cc-3455b1625401; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Delete_3a73dad9_e694_40a7_8e77_a993216dea37}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "65b15a90-d9e6-48e0-8b46-0328659b353c",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "e4ce021d-b73b-4854-8ebb-cc91a27d14be"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for scaleout",
                  "message_list": [],
                  "uuid": "12ef254b-ef72-4324-87ee-6eaaec15e7d7",
                  "name": "action_scaleout",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=f7c30d10-02f5-4968-a35f-cde3640cef39; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=4dfbfd4d-1b66-45ad-af42-7dc6cdeb2192; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scaleout_3a73dad9_e694_40a7_8e77_a993216dea37}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "d69f6c77-e595-419b-8768-791fdb54279b",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=7099f466-c002-4568-8a0d-b18a214c6c5c; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "f7c30d10-02f5-4968-a35f-cde3640cef39"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for scalein",
                  "message_list": [],
                  "uuid": "f4912df8-2392-4ccc-aba3-cb603709d207",
                  "name": "action_scalein",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=06af5508-13d9-44c3-9176-ea63749c5fac; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=e3baa170-d69d-4daa-8b40-934addc83e67; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scalein_3a73dad9_e694_40a7_8e77_a993216dea37}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "47765240-7599-4f6d-987a-57513031b91c",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=06f0d076-5af2-40c4-b68d-7371fae08be0; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "06af5508-13d9-44c3-9176-ea63749c5fac"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for deleting an application. Does not delete created VMs",
                  "message_list": [],
                  "uuid": "44544c88-8c2d-4c0a-a461-f8e7b680e6a1",
                  "name": "action_soft_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=ce7cb706-ebab-4185-8def-4cfa0bbc1449; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=408d1451-c9b0-429b-9e19-1eca5b8e9b66; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_ELEMENT; uuid=03043344-193f-4596-a6ec-a9bcab9a6cb2; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Package_Element_Delete_6f1f0452_e082_41cd_bbde_12570ab8091f}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=d0ce70ae-d05b-4f8f-a20f-52cf589a58f0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_DEPLOYMENT_ELEMENT; uuid=8563cf7e-8748-409a-ad6f-4655e5451132; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Soft_Delete_3a73dad9_e694_40a7_8e77_a993216dea37}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "00e92411-4963-4266-a516-84c54d9a016f",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "ce7cb706-ebab-4185-8def-4cfa0bbc1449"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                },
                {
                  "description": "System action for snapshot deletion",
                  "message_list": [],
                  "uuid": "8c4a87d6-4b83-41b7-8776-e658512d7e57",
                  "name": "action_snapshot_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=82b68043-33ea-4531-aafb-992b43eb4d9e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=893c2ac1-4d7c-4020-a781-67ba6cea7a6d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__snapshot_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "8dd8f6c8-ffba-4638-823e-e811aa978c7e",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=700512f8-92f6-4c90-8cf9-de9f05651285; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_id}",
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=ada97406-4b59-4056-828b-ec7a86461719; value=; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=snapshot_group_id}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37",
                      "uuid": "82b68043-33ea-4531-aafb-992b43eb4d9e"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_3a73dad9_e694_40a7_8e77_a993216dea37"
                  }
                }
              ],
              "message_list": [],
              "published_service_local_reference_list": [],
              "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37",
              "default_replicas": "1",
              "min_replicas": "1",
              "state": "DRAFT",
              "max_replicas": "10",
              "depends_on_list": [],
              "editables": {
                "default_replicas": true
              },
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Service_Package",
                  "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "Linux8",
                "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
              },
              "type": "GREENFIELD",
              "options": {},
              "variable_list": [],
              "name": "f653d795_deployment"
            },
            {
              "description": "",
              "action_list": [
                {
                  "description": "System action for creating an application",
                  "message_list": [],
                  "uuid": "e01aefc0-da66-421a-805f-1e99429e746e",
                  "name": "action_create",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=6d48fe6f-c85f-4896-805f-3f7ecab004c9; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CREATE_DEPLOYMENT_ELEMENT; uuid=209846df-8fb8-496c-ba45-056b48d9fb10; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Provision_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=69838885-f55f-470d-901d-7b609afc8d0d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__pre_create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=c1381729-ff0a-4ca1-88f9-a62c4a23e73b; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=0a39d82d-d2ff-47d8-9202-ce4764269f91; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__install_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=9fd1bf3a-adfe-4db2-b958-6f50aaf7880d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__create_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=5db70cd9-0237-4787-8f23-f85b0256efc4; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "f78444ec-e849-4480-9a2e-7ec43558414a",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "6d48fe6f-c85f-4896-805f-3f7ecab004c9"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for starting an application",
                  "message_list": [],
                  "uuid": "4190972f-772e-42c1-a848-1ed09c897c81",
                  "name": "action_start",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=ac411098-ed67-4309-998f-e96b20ad9883; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=9618a217-0518-45ca-b039-cf806dc3032d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=2ee9e7cc-8370-4493-ae4e-0c43ea1b95fc; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "970e824b-7b2a-484d-a509-f882acd8a387",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "ac411098-ed67-4309-998f-e96b20ad9883"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for restarting an application",
                  "message_list": [],
                  "uuid": "ba48d90b-fd2d-4cd6-b670-0ead04c14bbf",
                  "name": "action_restart",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=33254453-66e7-49ba-99f5-3234b60c0107; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=1e2fd9a3-15d3-46f8-ad48-3a9d262b3f97; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6649763a-85df-40c7-9a0c-dc9b18e06ed2; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__restart_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "d2524521-ad26-407b-9004-40abf53cedb4",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "33254453-66e7-49ba-99f5-3234b60c0107"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for stopping an application",
                  "message_list": [],
                  "uuid": "e54900e7-f2cd-4bd5-86e4-e3d717477999",
                  "name": "action_stop",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=582774bd-e748-4780-b0d3-76ba9ebeae99; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=79214d85-d79c-4618-b7dc-dd56f36beae0; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=cb198f16-0ed3-4621-9abc-2ccd6fb51afb; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "ef370722-fd5d-48b7-982e-2f5dd455857c",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "582774bd-e748-4780-b0d3-76ba9ebeae99"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for deleting an application. Deletes created VMs as well",
                  "message_list": [],
                  "uuid": "c62f464f-31df-40f1-bea5-4e2ffc1a7363",
                  "name": "action_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=1098e038-59a6-476f-81c2-fa05efe27559; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=c3abcf39-f2e3-40d8-8e50-e752df2a058d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=6fa9b6bd-0657-4560-aeac-f76e647a1169; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=2783e55a-440b-4cf3-ace0-976822b768bf; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__uninstall_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=7f30c96a-773a-4f35-ba06-094e91b0a0e6; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=63afccc7-91bb-40fb-91b3-a267a62bd3d1; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__post_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=DELETE_DEPLOYMENT_ELEMENT; uuid=a4b5a4f5-2424-4b36-b513-20123b5e16fc; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Delete_e155138e_f3bb_4205_913b_52e32ba748c1}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "554c8d47-47a3-4087-ab60-0934e950d996",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "1098e038-59a6-476f-81c2-fa05efe27559"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for scaleout",
                  "message_list": [],
                  "uuid": "9d56d635-cd90-43ac-870c-915862ed422a",
                  "name": "action_scaleout",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=1204cdbb-a797-4842-80d5-c41e4470557c; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=878df81c-3b69-46a6-8e07-de3fcf86b385; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scaleout_e155138e_f3bb_4205_913b_52e32ba748c1}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "9fb49d9e-a4f0-4f12-9ce6-cd381f7d7f0d",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=e3904192-11aa-456c-9bcb-965337e6b1e8; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "1204cdbb-a797-4842-80d5-c41e4470557c"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for scalein",
                  "message_list": [],
                  "uuid": "d8587710-2b77-40cd-a66c-5394bab1f421",
                  "name": "action_scalein",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=ee770629-1f6d-46f4-baa8-d05f0b052da7; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=SCALING; uuid=12c1fbce-e61c-42aa-9026-e0e77cd29e6e; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Deployment_Scalein_e155138e_f3bb_4205_913b_52e32ba748c1}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "5cf7bde1-ba59-4d2c-8d85-84d806005d5f",
                    "state": "ACTIVE",
                    "variable_list": [
                      "@{regex=; val_type=STRING; is_mandatory=False; description=; data_type=BASE; message_list=System.Object[]; uuid=4fce0d6f-891e-4d91-9d99-277c15164260; value=0; label=; state=NOT_VALIDATED; attrs=; editables=; is_hidden=False; type=LOCAL; options=; name=scaling_count}"
                    ],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "ee770629-1f6d-46f4-baa8-d05f0b052da7"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                },
                {
                  "description": "System action for deleting an application. Does not delete created VMs",
                  "message_list": [],
                  "uuid": "c9d1e2c3-7cf5-405a-8cca-20ce7669fb2d",
                  "name": "action_soft_delete",
                  "state": "ACTIVE",
                  "critical": true,
                  "attrs": {},
                  "type": "system",
                  "runbook": {
                    "task_definition_list": [
                      "@{target_any_local_reference=; retries=0; description=; type=DAG; uuid=ba719775-0607-497e-b6ba-89f6a06958db; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=2235f53a-9fd2-4636-96fd-2cc282a7d534; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_ELEMENT; uuid=199ff877-e969-4b92-a121-ade715845612; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__Package_Element_Delete_4c2f8a29_8e95_4ced_8a68_27d6cacf297a}",
                      "@{target_any_local_reference=; retries=0; description=; type=CALL_RUNBOOK; uuid=f994c6a6-b7bb-4cf0-8c18-455f5bf78f7d; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__soft_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d}",
                      "@{target_any_local_reference=; retries=0; description=; type=SOFT_DELETE_DEPLOYMENT_ELEMENT; uuid=59391cda-5524-45f7-914d-174feb047fc1; child_tasks_local_reference_list=System.Object[]; state=ACTIVE; attrs=; timeout_secs=0; inherit_target=False; message_list=System.Object[]; variable_list=System.Object[]; name=SYS_GEN__DE_Soft_Delete_e155138e_f3bb_4205_913b_52e32ba748c1}"
                    ],
                    "description": "",
                    "message_list": [],
                    "uuid": "6cd90c12-4aee-40f0-9828-05c7a3233cb4",
                    "state": "ACTIVE",
                    "variable_list": [],
                    "main_task_local_reference": {
                      "kind": "app_task",
                      "name": "SYS_GEN__Composite_DAG_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1",
                      "uuid": "ba719775-0607-497e-b6ba-89f6a06958db"
                    },
                    "name": "SYS_GEN__Runbook_Deployment_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                }
              ],
              "message_list": [],
              "published_service_local_reference_list": [],
              "uuid": "e155138e-f3bb-4205-913b-52e32ba748c1",
              "default_replicas": "1",
              "min_replicas": "1",
              "state": "DRAFT",
              "max_replicas": "10",
              "depends_on_list": [],
              "editables": {
                "default_replicas": true
              },
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "LB_Package",
                  "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "LoadBalancer1",
                "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
              },
              "type": "GREENFIELD",
              "options": {},
              "variable_list": [],
              "name": "8950fc25_deployment"
            }
          ],
          "environment_reference_list": [],
          "application_url": "",
          "description": "",
          "action_list": [
            {
              "description": "",
              "message_list": [],
              "uuid": "3a481aa1-07fc-401c-ae0e-0d61bf0e940f",
              "name": "Scale Out Application",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "user",
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "a2070381-0932-429b-b53b-081b05a3e262",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=Scale Out Application; uuid=4d321527-6657-4cc6-a5cb-d1a7e60b26c0}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "664df62c_dag"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment",
                      "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SCALING",
                    "uuid": "4d321527-6657-4cc6-a5cb-d1a7e60b26c0",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "scaling_count": "@@{replicasCount}@@",
                      "type": "",
                      "scaling_type": "SCALEOUT"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "Scale Out Application"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "c732e7cb-6762-48b3-ac07-d80b34f9f5a3",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "773e7b26-a227-4660-a83a-bc478252f440",
                    "value": "",
                    "label": "Amount of replicas to be added",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "replicasCount"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "664df62c_dag",
                  "uuid": "a2070381-0932-429b-b53b-081b05a3e262"
                },
                "name": "2a955c6e_runbook"
              }
            },
            {
              "description": "",
              "message_list": [],
              "uuid": "735e4ec4-426d-40ef-8e06-9a3276c541e9",
              "name": "Scale In Application",
              "state": "ACTIVE",
              "critical": false,
              "attrs": {},
              "type": "user",
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "7af8f2db-0b65-4307-b94b-5ff7a7acfa94",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=Scale In Application; uuid=a7f01a91-7d87-4474-9450-b9d5d6fa0626}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "664df62c_dag_cloned_1"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment",
                      "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SCALING",
                    "uuid": "a7f01a91-7d87-4474-9450-b9d5d6fa0626",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "scaling_count": "@@{replicasCount}@@",
                      "type": "",
                      "scaling_type": "SCALEIN"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "Scale In Application"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "00dbea4b-fd60-4cd1-99a3-7888c0611260",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "59883e2c-b051-4555-a968-ebedee03b9b8",
                    "value": "",
                    "label": "Amount of replicas to be deleted",
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    },
                    "name": "replicasCount"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "664df62c_dag_cloned_1",
                  "uuid": "7af8f2db-0b65-4307-b94b-5ff7a7acfa94"
                },
                "name": "2a955c6e_runbook_cloned_0"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "5a1f42fe-dd1b-4da0-a833-a19b6b0ae897",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b83819a2-d0aa-4316-accc-bdd5026adfba",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__DE_Provision_e155138e_f3bb_4205_913b_52e32ba748c1; uuid=7280c12b-f936-4578-b7a0-77fbfad18984}",
                      "@{kind=app_task; name=SYS_GEN__DE_Provision_3a73dad9_e694_40a7_8e77_a993216dea37; uuid=3ec27a92-54aa-477a-9965-3f1f16fcf138}",
                      "@{kind=app_task; name=SYS_GEN__pre_create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=3b504996-ae07-4db4-8bf1-19e0a1172292}",
                      "@{kind=app_task; name=SYS_GEN__pre_create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=263a154e-b063-4402-9f81-2d6a728bbdcc}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=b16d8549-7f82-45bb-9ca3-8115bdb7804e}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=1c7edf77-7937-48e7-9703-4b16b1f2bda5}",
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=024d4ff1-f566-4990-bc23-3026f079906b}",
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=988e500f-82a1-47ee-bc30-7bcc628fa7e0}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=bc3652ef-1314-4416-8cc7-7fe8aed88e77}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=a2437a7c-036e-40ae-ad6b-8ce9f4d99a7d}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=a9191ba3-82f0-4dfb-98df-3d1170420319}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=1a4179ec-867e-4382-b565-f52b4bb65156}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "          ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "8950fc25_deployment",
                      "uuid": "e155138e-f3bb-4205-913b-52e32ba748c1"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CREATE_DEPLOYMENT_ELEMENT",
                    "uuid": "7280c12b-f936-4578-b7a0-77fbfad18984",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Provision_e155138e_f3bb_4205_913b_52e32ba748c1"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment",
                      "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CREATE_DEPLOYMENT_ELEMENT",
                    "uuid": "3ec27a92-54aa-477a-9965-3f1f16fcf138",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Provision_3a73dad9_e694_40a7_8e77_a993216dea37"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3b504996-ae07-4db4-8bf1-19e0a1172292",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=45297c5d_runbook; uuid=fd3d742e-f080-4cf9-aeeb-88c63ab88077}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__pre_create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "263a154e-b063-4402-9f81-2d6a728bbdcc",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=aec5250e_runbook; uuid=35e86bf3-1b75-4346-80c8-c904f04f0a64}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__pre_create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "b16d8549-7f82-45bb-9ca3-8115bdb7804e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=5141f0a9-8a48-49eb-ba54-6eff5591fabb}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "1c7edf77-7937-48e7-9703-4b16b1f2bda5",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=287ba9c6-c233-4cd1-ab0e-f934fe5879cb}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "024d4ff1-f566-4990-bc23-3026f079906b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=2f269e21-fbac-4fa2-aafd-b17ac5304a8e}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "988e500f-82a1-47ee-bc30-7bcc628fa7e0",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=196d7fdd-708b-45b2-854e-3678016004d8}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "bc3652ef-1314-4416-8cc7-7fe8aed88e77",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=c35de71c_runbook; uuid=92134038-0241-48b3-af11-872f3eb8c0cc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "a2437a7c-036e-40ae-ad6b-8ce9f4d99a7d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=ec82b6ce_runbook; uuid=2bdcf3ff-d28a-4fa0-a49f-3d7762544bda}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "a9191ba3-82f0-4dfb-98df-3d1170420319",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2e264b3d_runbook; uuid=edcc067c-81e1-4484-aabe-d74b12017a00}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "1a4179ec-867e-4382-b565-f52b4bb65156",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=29c66290_runbook; uuid=66fbc06a-6abe-452c-89bb-fbfdc29eefc1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "7b597a5c-f5be-4a48-b1fb-48636de1db99",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "b83819a2-d0aa-4316-accc-bdd5026adfba"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "d922344c-f071-46e1-9a04-ddaea4efa5d4",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "e0fb6f40-bc8e-411b-9bad-4d6eed61a0a4",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=8df64b7b-8c9d-49ff-bced-64010805c3fd}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=30ea8ba5-a833-4776-a073-dc9fb2ef05c8}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=e2a248ff-c623-43b4-bc1e-1047a6015c66}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=3d4040c4-f929-4e03-9c88-c19163f03afb}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8df64b7b-8c9d-49ff-bced-64010805c3fd",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=cf061082-1268-45c8-9070-06294838f2ea}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "30ea8ba5-a833-4776-a073-dc9fb2ef05c8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=3008406c-ef97-40c6-bb6a-38fb166bfd7b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e2a248ff-c623-43b4-bc1e-1047a6015c66",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=ec82b6ce_runbook; uuid=2bdcf3ff-d28a-4fa0-a49f-3d7762544bda}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3d4040c4-f929-4e03-9c88-c19163f03afb",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=29c66290_runbook; uuid=66fbc06a-6abe-452c-89bb-fbfdc29eefc1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "989175e9-0985-4837-9704-bf6b525932a4",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "e0fb6f40-bc8e-411b-9bad-4d6eed61a0a4"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "5470ac58-1d8a-43b8-8241-937e59284927",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "e7e073f1-f45b-40a3-8407-f18f15d29cad",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=59a3f15a-c336-4416-abed-99468e916f5f}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=20162d22-f1f4-4373-a337-b68702b1cfa6}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=6923a3f3-246a-442e-b1b8-549a79c8b4ee}",
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=0cf4865c-1f8a-429e-ab4f-5197e2c80a14}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "59a3f15a-c336-4416-abed-99468e916f5f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=6c5bca08-71a5-465c-b262-a18a58f7b25c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "20162d22-f1f4-4373-a337-b68702b1cfa6",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=705dcbcb-e959-4832-a54e-2310027fcb1b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "6923a3f3-246a-442e-b1b8-549a79c8b4ee",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=50078295_runbook; uuid=02a6890f-3476-427c-86db-4d41c38fa63c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0cf4865c-1f8a-429e-ab4f-5197e2c80a14",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=814f7bf6_runbook; uuid=495180e5-b3f1-4cab-ba80-41e5dc22113f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d081e562-0f0f-4d01-9d59-7d9191003ad6",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "e7e073f1-f45b-40a3-8407-f18f15d29cad"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "5120379d-8fc0-4a3b-8305-bf188ae6363b",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "24509fee-1aac-4539-8854-d5f6ab57e33a",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=630dc0eb-c8e9-48c5-bb2c-9cd59c5f5cf8}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=0b4220fa-3196-402a-a5cf-c13554ae70b0}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=aadf1115-9e28-4389-af97-227dd646be30}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=f2ef8114-d3a7-47a3-8877-76492971a7d3}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "  ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "630dc0eb-c8e9-48c5-bb2c-9cd59c5f5cf8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=623bb9bb_runbook; uuid=df067919-7ed2-4aa3-b06c-e2077bb38b85}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0b4220fa-3196-402a-a5cf-c13554ae70b0",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=fed34e5f_runbook; uuid=41441571-5d08-47cc-9100-7047bdf9cb3d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "aadf1115-9e28-4389-af97-227dd646be30",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=e49b7246-e438-48a3-b60b-bf97fd80a176}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "f2ef8114-d3a7-47a3-8877-76492971a7d3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=bc7995a7-8239-4e3c-aad1-2cdd29c37f3f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "edb11b68-8aa5-4385-9007-a2c7e1f953e3",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "24509fee-1aac-4539-8854-d5f6ab57e33a"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "365c7d84-dd1f-4f84-94ac-b295cba2fe04",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "5e2cd325-423c-4b72-96d2-ae72ff77418e",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=df50315e-4979-4d50-9a80-854fcb8ae810}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=1cd3e6d1-7490-43e2-a88a-37967d153f8d}",
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=7909fcd4-e85a-42f9-adc3-ed5c74bf439a}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=168fe598-81dc-439d-bbab-9b86b5417d2b}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=7943546a-188f-4898-b4f1-fed548ecf559}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=61bdbd6e-a2f3-4cb8-be1f-7f887a91011a}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=c40971c8-f5f1-40c2-97c0-279d43f44212}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=dd86d23a-56f5-4f07-87c6-c5ed5e94969f}",
                      "@{kind=app_task; name=SYS_GEN__post_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=8aca6e8f-06b4-4ecc-b954-545bf83ffb0c}",
                      "@{kind=app_task; name=SYS_GEN__post_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=e8c6376b-e4b6-481f-8961-03bcfb293e10}",
                      "@{kind=app_task; name=SYS_GEN__DE_Delete_3a73dad9_e694_40a7_8e77_a993216dea37; uuid=7b580678-2b9a-4b65-810b-de8c25f8865e}",
                      "@{kind=app_task; name=SYS_GEN__DE_Delete_e155138e_f3bb_4205_913b_52e32ba748c1; uuid=62906cb5-8d09-4416-b781-47b6ef49cff7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "           ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "df50315e-4979-4d50-9a80-854fcb8ae810",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=623bb9bb_runbook; uuid=df067919-7ed2-4aa3-b06c-e2077bb38b85}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "1cd3e6d1-7490-43e2-a88a-37967d153f8d",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=104c1563_runbook; uuid=fa33e662-e34a-4f66-8224-94e7b4e05f50}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "7909fcd4-e85a-42f9-adc3-ed5c74bf439a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=fed34e5f_runbook; uuid=41441571-5d08-47cc-9100-7047bdf9cb3d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "168fe598-81dc-439d-bbab-9b86b5417d2b",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=e4f712b3-6f39-493e-868a-9a352d94bcd3}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "7943546a-188f-4898-b4f1-fed548ecf559",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=c2181aea_runbook; uuid=07142af9-6a50-423d-afd0-1f33b26612eb}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "61bdbd6e-a2f3-4cb8-be1f-7f887a91011a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=e9bc1efb-67ed-4c17-9621-9465fbcb29fd}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c40971c8-f5f1-40c2-97c0-279d43f44212",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=460f8190-1f30-4bfd-b88f-1cb2a92e87b2}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "dd86d23a-56f5-4f07-87c6-c5ed5e94969f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=c01ee9f3-2184-430b-b5a5-773b3235c27f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8aca6e8f-06b4-4ecc-b954-545bf83ffb0c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=431aa2f2_runbook; uuid=7701aeae-9c0f-48a5-9b87-9930cf2bfd1d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__post_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e8c6376b-e4b6-481f-8961-03bcfb293e10",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=39435ecb_runbook; uuid=751a308e-13bd-4d42-9bd4-5716ab03278a}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__post_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment",
                      "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "7b580678-2b9a-4b65-810b-de8c25f8865e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Delete_3a73dad9_e694_40a7_8e77_a993216dea37"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "8950fc25_deployment",
                      "uuid": "e155138e-f3bb-4205-913b-52e32ba748c1"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "62906cb5-8d09-4416-b781-47b6ef49cff7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Delete_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "dfc16acb-53ed-48f8-a437-9ea5883d2967",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "5e2cd325-423c-4b72-96d2-ae72ff77418e"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "d20c57b0-0b34-4926-8ce2-306af9a380e4",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "3e531d59-c4ca-4ff1-b51d-80442b8f0a46",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=383a773a-cb3f-4c84-aefc-430ab26a6cf1}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=7edabadd-e691-4460-ba56-8a1881277ce9}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=d329c197-69ad-4024-8e10-b984e36438e1}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=47788013-88f6-4c31-9d85-e3c9327c2b20}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=3e76ef3b-6502-45e7-b9bf-211ef9b46c42}",
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=fe7b8ad1-7db1-4a13-9368-3ce9ab4d44ba}",
                      "@{kind=app_task; name=SYS_GEN__DE_Soft_Delete_3a73dad9_e694_40a7_8e77_a993216dea37; uuid=897d0c4c-e966-46cd-b2dd-8b20d6af0654}",
                      "@{kind=app_task; name=SYS_GEN__DE_Soft_Delete_e155138e_f3bb_4205_913b_52e32ba748c1; uuid=043a5b14-4983-4b35-a822-c9647a84a7a1}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "      ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "383a773a-cb3f-4c84-aefc-430ab26a6cf1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=1a3eeea3-9607-4fb1-b291-e535995926b7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "7edabadd-e691-4460-ba56-8a1881277ce9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=2368403e-56f0-4b3b-a3a8-bbe5dad17a74}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "d329c197-69ad-4024-8e10-b984e36438e1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "47788013-88f6-4c31-9d85-e3c9327c2b20",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3e76ef3b-6502-45e7-b9bf-211ef9b46c42",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=eac89a2f-1ebc-490c-b176-120424225d3b}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1",
                      "uuid": "36d96f1e-8120-4fbe-8538-9ab05297106d"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "fe7b8ad1-7db1-4a13-9368-3ce9ab4d44ba",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=8950fc25_deployment; uuid=e155138e-f3bb-4205-913b-52e32ba748c1}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d; uuid=3b9b574b-097f-4b85-aeff-386a7ba74ef2}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Substrate_36d96f1e_8120_4fbe_8538_9ab05297106d"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment",
                      "uuid": "3a73dad9-e694-40a7-8e77-a993216dea37"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "897d0c4c-e966-46cd-b2dd-8b20d6af0654",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Soft_Delete_3a73dad9_e694_40a7_8e77_a993216dea37"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "8950fc25_deployment",
                      "uuid": "e155138e-f3bb-4205-913b-52e32ba748c1"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT",
                    "uuid": "043a5b14-4983-4b35-a822-c9647a84a7a1",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DE_Soft_Delete_e155138e_f3bb_4205_913b_52e32ba748c1"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "26b00477-6ecb-44ad-bb1d-0c6541f58ebd",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "3e531d59-c4ca-4ff1-b51d-80442b8f0a46"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            },
            {
              "description": "System action for snapshot deletion",
              "message_list": [],
              "uuid": "0aee885e-3035-4eda-96b8-69de6e9667aa",
              "name": "action_snapshot_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_profile",
                      "name": "Linux RF 2",
                      "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "d93a5ea2-5dac-4187-a823-20ad1c2573dd",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__snapshot_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=cba3b464-bb3a-48d1-aec9-f8b8ec370bc9}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8",
                      "uuid": "b7539fc7-8e08-48b8-9a5b-3488ab327be2"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "cba3b464-bb3a-48d1-aec9-f8b8ec370bc9",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "deployment_reference": "@{kind=app_blueprint_deployment; name=f653d795_deployment; uuid=3a73dad9-e694-40a7-8e77-a993216dea37}",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2; uuid=bfca2072-bc39-4dc7-adb6-ec3745f7af77}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__snapshot_delete_CRb_Substrate_b7539fc7_8e08_48b8_9a5b_3488ab327be2"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2d61d51b-f7db-422a-a254-ed6afc97269d",
                "state": "ACTIVE",
                "variable_list": [
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "af886ba4-05d3-4b8b-b2b1-97fc793c52f0",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_id"
                  },
                  {
                    "regex": {},
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "message_list": [],
                    "uuid": "bdbbd847-0d1c-4a98-a434-d2d981da50b8",
                    "value": "",
                    "label": "",
                    "state": "NOT_VALIDATED",
                    "attrs": {},
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "type": "LOCAL",
                    "options": {},
                    "name": "snapshot_group_id"
                  }
                ],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f",
                  "uuid": "d93a5ea2-5dac-4187-a823-20ad1c2573dd"
                },
                "name": "SYS_GEN__Runbook_Application_3d100ad7_8ef9_41d2_b306_128b2553fe2f"
              }
            }
          ],
          "message_list": [],
          "uuid": "3d100ad7-8ef9-41d2-b306-128b2553fe2f",
          "dependency_list": [
            {
              "getter_resource_kind": "ServiceCfg",
              "setter_resource_attr": "address",
              "setter_resource_kind": "ServiceCfg",
              "setter_resource_name": "Load_Balancer",
              "action_name": "action_create",
              "action_resource_name": "Linux RF 2",
              "getter_resource_name": "Service1",
              "action_resource_kind": "ApplicationCfg"
            },
            {
              "getter_resource_kind": "SubstrateCfg",
              "setter_resource_attr": "address",
              "setter_resource_kind": "ServiceCfg",
              "setter_resource_name": "Load_Balancer",
              "action_name": "action_delete",
              "action_resource_name": "Linux RF 2",
              "getter_resource_name": "Linux8",
              "action_resource_kind": "ApplicationCfg"
            }
          ],
          "snapshot_config_list": [],
          "state": "DRAFT",
          "patch_list": [],
          "restore_config_list": [],
          "variable_list": [
            {
              "regex": {
                "should_validate": false,
                "value": "^.*$"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "220c9514-24b2-43bb-a2d3-c0ddd3e21ff6",
              "value": "True",
              "label": "Add Virtual Machine into Nagios?",
              "state": "ACTIVE",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": [
                  "True",
                  "False"
                ]
              },
              "name": "enableNagios"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "9b053045-cfe1-45bc-a4fb-f7bb6e954eee",
              "value": "C@lmdip@123",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "pcUserPassword"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "17f0afb0-1264-4beb-8fc8-b15d1cfc5ceb",
              "value": "david",
              "label": "",
              "state": "ACTIVE",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "pcUser"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "25f1e060-09f1-4954-8e0d-122e689d8d94",
              "value": "",
              "label": "Application Port",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "applicationPort"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "4226a387-4f4e-4099-80aa-b6696bb302bb",
              "value": "",
              "label": "Load Balancer Virtual Server Port",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "virtualServerPort"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One group per line.\n- Format must be group@domain.example",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "22a624f8-e09b-4b4e-a84b-b247105631fb",
              "value": "",
              "label": "Add additional domain groups administrative permissions.",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "administrativeGroups"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One user per line.\n- Format must be user@domain.example",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "5f20772f-48bf-476a-9b72-23fa22312df4",
              "value": "",
              "label": "Add additional domain users administrative permissions.",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "administrativeUsers"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One group per line.\n- Format must be group@domain.example",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "29e99ac7-a3ac-48d0-8b0d-032de2a51feb",
              "value": "",
              "label": "Add additional domain groups login permissions.",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "loginGroups"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One user per line.\n- Format must be user@domain.example",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "94fb7c6e-37e9-4b18-a897-fe41fc9f4838",
              "value": "",
              "label": "Add additional domain users login permissions.",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "loginUsers"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "Do not modify",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "a1695abd-8afd-447d-89cb-52e37c5e7ace",
              "value": "",
              "label": "Default user",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "EXEC_LOCAL",
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script_type": "static",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script": "print(\"@@{calm_username}@@\")"
                }
              },
              "name": "defaultUser"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "Do not modify",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "aaa13a1f-1c71-4e08-a4f6-8c7febba1692",
              "value": "",
              "label": "Calm Project",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "EXEC_LOCAL",
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script_type": "static",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script": "print(\"@@{calm_project_name}@@\")"
                }
              },
              "name": "projectName"
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "-  One line per disk.\n",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "c2e49ee1-8803-4914-984e-f37d654c9570",
              "value": "",
              "label": "Insert additional virtual disks.",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "extraDisk"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "9d7711ee-059f-4b38-8b6b-5f98544a22e1",
              "value": "",
              "label": "Select Virtual Machine Network",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "EXEC_LOCAL",
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script_type": "static",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script": "#script\n#Global Variables\nproject = '@@{calm_project_name}@@'\nclusterSelection = '@@{clusterSelection}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistSelection = []\n\npayload = {\n  \"kind\": \"project\"\n}\npcUser = \"@@{pcUser}@@\"\npcUserPassword = \"@@{pcUserPassword}@@\"\n\n#Global Functions\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#Main Code\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    api_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n        if ((resp['spec']['cluster_reference']['name']) == clusterSelection):\n            listSelection.append(resp['spec']['name']) \n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n#Return\n#print (varToBase64(result))\nlistSelection = sorted(dict.fromkeys(listSelection))\nprint \",\".join(map(str,listSelection))\n#print ((result))\nexit(0)"
                }
              },
              "name": "networkSelection"
            },
            {
              "regex": {},
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "LIST",
              "message_list": [],
              "uuid": "b4ca78dc-fc91-4f85-b536-e4d9cac7f060",
              "value": "",
              "label": "Select Nutanix Cluster",
              "state": "ACTIVE",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "EXEC_LOCAL",
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script_type": "static",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script": "#script\n#Global Variables\nproject = '@@{calm_project_name}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistCluster = []\npayload = {\n  \"kind\": \"project\"\n}\npcUser = \"@@{pcUser}@@\"\npcUserPassword = \"@@{pcUserPassword}@@\"\n\n#Global Functions\n\n#Main Code\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    api_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n        listCluster.append(resp['spec']['cluster_reference']['name'])\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\nlistCluster = sorted(dict.fromkeys(listCluster))\n#Return\nprint \",\".join(map(str,listCluster))\nexit(0)"
                }
              },
              "name": "clusterSelection"
            },
            {
              "regex": {
                "should_validate": true,
                "value": "^[a-z]{1,12}$"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "- Maximum number of characters is twelve. \n- Only lowercase.\n- Numbers are not allowed.",
              "data_type": "BASE",
              "message_list": [],
              "uuid": "90596ae4-cd1b-42cb-aab2-241d6caf9a88",
              "value": "",
              "label": "Insert prefix for Virtual Machines",
              "state": "ACTIVE",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "type": "LOCAL",
              "options": {
                "type": "PREDEFINED",
                "choices": []
              },
              "name": "virtualMachinePrefix"
            }
          ],
          "name": "Linux RF 2"
        }
      ],
      "published_service_definition_list": [],
      "default_credential_local_reference": {
        "kind": "app_credential",
        "name": "ntnxcalm",
        "uuid": "623d2e1d-24f0-4288-9c21-d6d9de0003af"
      },
      "package_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for installing an application",
              "message_list": [],
              "uuid": "7cdcce40-64c1-4faf-a466-6537334ba624",
              "name": "action_install",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "58fa901b-d86d-4bbb-811d-c38e8a055a9c",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Install_Crb_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=07846170-567e-45f7-b2d7-38c14ebce8cb}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_INSTALL",
                    "uuid": "07846170-567e-45f7-b2d7-38c14ebce8cb",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=b9957490-53ae-4062-aab8-af2b5fce68eb; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=f78c9542_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=277390fa-ea89-4cb1-aa07-e598ca2c7c03; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=0b80fc77_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Install_Crb_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "196d7fdd-708b-45b2-854e-3678016004d8",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "58fa901b-d86d-4bbb-811d-c38e8a055a9c"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "97b7bac7-fcef-4986-b89d-12eaa29f9c58",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "80caaee9-4bb6-4608-890d-bde6e969b226",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=cfe1b9e8-8fd2-4778-b977-d93900c54615}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=1b61731d-afc3-401a-ac42-8e424cf6fa9a}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=e86b3b6a-9f4c-44b5-8c9d-f0304c4370e7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "cfe1b9e8-8fd2-4778-b977-d93900c54615",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=196d7fdd-708b-45b2-854e-3678016004d8}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "1b61731d-afc3-401a-ac42-8e424cf6fa9a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=2e264b3d_runbook; uuid=edcc067c-81e1-4484-aabe-d74b12017a00}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "e86b3b6a-9f4c-44b5-8c9d-f0304c4370e7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=29c66290_runbook; uuid=66fbc06a-6abe-452c-89bb-fbfdc29eefc1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "11ef9c92-5308-4f19-83eb-d3587a7cf0da",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "80caaee9-4bb6-4608-890d-bde6e969b226"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for uninstalling an application",
              "message_list": [],
              "uuid": "9e659173-b257-4df9-9024-50d483ca994b",
              "name": "action_uninstall",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "2d1ee7bc-639e-40b7-bbd1-1e9c05c49130",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Uninstall_Crb_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=aa56cdd5-3447-48f2-987d-0d673d97a6e3}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_UNINSTALL",
                    "uuid": "aa56cdd5-3447-48f2-987d-0d673d97a6e3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=b9957490-53ae-4062-aab8-af2b5fce68eb; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=f78c9542_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=277390fa-ea89-4cb1-aa07-e598ca2c7c03; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=0b80fc77_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Uninstall_Crb_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e4f712b3-6f39-493e-868a-9a352d94bcd3",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "2d1ee7bc-639e-40b7-bbd1-1e9c05c49130"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "6edbe629-783d-43f2-b8e5-36c16716e272",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "ff487230-d246-4421-b6b5-ce3e02d4b242",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=caae219e-37c8-4a98-8764-306f4fc9a350}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=712b0265-a04c-434d-9026-263acf936f74}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=93fc0cf3-cf55-41a5-ac94-b2ad7e9bd73a}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "caae219e-37c8-4a98-8764-306f4fc9a350",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=623bb9bb_runbook; uuid=df067919-7ed2-4aa3-b06c-e2077bb38b85}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "712b0265-a04c-434d-9026-263acf936f74",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=104c1563_runbook; uuid=fa33e662-e34a-4f66-8224-94e7b4e05f50}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "93fc0cf3-cf55-41a5-ac94-b2ad7e9bd73a",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=e4f712b3-6f39-493e-868a-9a352d94bcd3}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "ff684f94-6d41-4dc2-ae58-5ced2013d28e",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "ff487230-d246-4421-b6b5-ce3e02d4b242"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "eac16713-f500-4066-a346-f687ad4e5ba6",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "893ba899-5017-4c96-95f5-854dde829b89",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=c6a294b1-d297-4800-afcb-b4c59ca5c644}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_6f1f0452_e082_41cd_bbde_12570ab8091f; uuid=db9f43ef-0923-4e42-8ea2-1de43cfb056f}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "c6a294b1-d297-4800-afcb-b4c59ca5c644",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=1a3eeea3-9607-4fb1-b291-e535995926b7}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "db9f43ef-0923-4e42-8ea2-1de43cfb056f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "d973d0fc-5321-4b44-84ad-438714391996",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "893ba899-5017-4c96-95f5-854dde829b89"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "5be97c84-badb-4944-aa50-794adb71db4d",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "06deae6f-edc4-4b2e-96d5-9221b182a127",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=30b3edf4-9828-46c3-bfbf-6bebd4d94b59}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "30b3edf4-9828-46c3-bfbf-6bebd4d94b59",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=29c66290_runbook; uuid=66fbc06a-6abe-452c-89bb-fbfdc29eefc1}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2123a5f5-027e-4f48-a40f-ab0939656279",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "06deae6f-edc4-4b2e-96d5-9221b182a127"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "395da525-246c-45d9-b82f-1147b07330c4",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "1898c6a3-ffa7-4c73-809d-3c210032c073",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=3ed504ac-7a17-4ed7-b749-186e2247f766}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3ed504ac-7a17-4ed7-b749-186e2247f766",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=814f7bf6_runbook; uuid=495180e5-b3f1-4cab-ba80-41e5dc22113f}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "1c244bc7-a1cf-43ee-8f41-1affac260add",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "1898c6a3-ffa7-4c73-809d-3c210032c073"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "58403bbd-90d9-4ceb-92a6-5decb997f949",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "Service_Package",
                      "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bd2e1d57-b7c7-498c-b08f-861c196188ff",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041; uuid=0f75a3c3-7517-4eb1-8efe-79313ca3ed6e}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1",
                      "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0f75a3c3-7517-4eb1-8efe-79313ca3ed6e",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=623bb9bb_runbook; uuid=df067919-7ed2-4aa3-b06c-e2077bb38b85}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_de197124_c004_42e9_9cee_ee9e590cf041"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "b0d63f18-9d42-4a72-ab91-8cdc2e167660",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_6f1f0452_e082_41cd_bbde_12570ab8091f",
                  "uuid": "bd2e1d57-b7c7-498c-b08f-861c196188ff"
                },
                "name": "SYS_GEN__Runbook_Package_6f1f0452_e082_41cd_bbde_12570ab8091f"
              }
            }
          ],
          "message_list": [],
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Service1",
              "uuid": "de197124-c004-42e9-9cee-ee9e590cf041"
            }
          ],
          "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f",
          "state": "DRAFT",
          "version": "",
          "editables": {},
          "type": "DEB",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Service_Package",
                    "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "cbdb8b7e-b436-4a1a-a4c1-a79a5bb39222",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "98492c4b_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "b9957490-53ae-4062-aab8-af2b5fce68eb",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "98492c4b_dag",
                "uuid": "cbdb8b7e-b436-4a1a-a4c1-a79a5bb39222"
              },
              "name": "f78c9542_runbook"
            },
            "type": "",
            "upgrade_runbook": {},
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Service_Package",
                    "uuid": "6f1f0452-e082-41cd-bbde-12570ab8091f"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "5288a379-07f9-4719-9f83-e34ccfb99cd0",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "04f364a1_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "277390fa-ea89-4cb1-aa07-e598ca2c7c03",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "04f364a1_dag",
                "uuid": "5288a379-07f9-4719-9f83-e34ccfb99cd0"
              },
              "name": "0b80fc77_runbook"
            }
          },
          "variable_list": [],
          "name": "Service_Package"
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "System action for installing an application",
              "message_list": [],
              "uuid": "e479cd01-6f2e-428c-9a5a-695d0d3bb99b",
              "name": "action_install",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "851687fe-e795-4449-8846-ca3a05d442e6",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Install_Crb_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=da673109-ffc0-4552-84e0-42d866df12d8}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_INSTALL",
                    "uuid": "da673109-ffc0-4552-84e0-42d866df12d8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=6bd50c9d-568c-4de3-ae4e-2a0c96f8af2c; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=7090d913_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=8debba36-e00e-4338-971c-f8d244a7a9c0; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=f9579b95_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Install_Crb_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "2f269e21-fbac-4fa2-aafd-b17ac5304a8e",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "851687fe-e795-4449-8846-ca3a05d442e6"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for creating an application",
              "message_list": [],
              "uuid": "7524991b-3315-45b5-9f5b-4724e5ec9e5e",
              "name": "action_create",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "64520ef9-4b53-4c51-9197-4a2ca394aa0b",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__install_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=29888b16-549c-4e82-a38e-7063972ec7b3}",
                      "@{kind=app_task; name=SYS_GEN__create_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=b57e9f72-6000-49ef-b8e5-7ed9266fb287}",
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=1686e8f9-e453-4989-bae9-39f92b3f07b7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "29888b16-549c-4e82-a38e-7063972ec7b3",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=2f269e21-fbac-4fa2-aafd-b17ac5304a8e}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__install_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "b57e9f72-6000-49ef-b8e5-7ed9266fb287",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=c35de71c_runbook; uuid=92134038-0241-48b3-af11-872f3eb8c0cc}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__create_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "1686e8f9-e453-4989-bae9-39f92b3f07b7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=ec82b6ce_runbook; uuid=2bdcf3ff-d28a-4fa0-a49f-3d7762544bda}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "760b0c37-3254-481c-b271-e097e5a3bb28",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "64520ef9-4b53-4c51-9197-4a2ca394aa0b"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for uninstalling an application",
              "message_list": [],
              "uuid": "cf47896d-c082-4111-a6da-d4fb17dd6776",
              "name": "action_uninstall",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "66cbe51e-aa35-40df-8397-a0626fb3f1a2",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__Uninstall_Crb_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=9d7d24c0-ed83-4fd9-84f7-aa7dc2f37483}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CUSTOM_PACKAGE_UNINSTALL",
                    "uuid": "9d7d24c0-ed83-4fd9-84f7-aa7dc2f37483",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "install_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=6bd50c9d-568c-4de3-ae4e-2a0c96f8af2c; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=7090d913_runbook}",
                      "type": "",
                      "upgrade_runbook": "",
                      "uninstall_runbook": "@{task_definition_list=System.Object[]; description=; message_list=System.Object[]; uuid=8debba36-e00e-4338-971c-f8d244a7a9c0; state=ACTIVE; variable_list=System.Object[]; main_task_local_reference=; name=f9579b95_runbook}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Uninstall_Crb_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "e9bc1efb-67ed-4c17-9621-9465fbcb29fd",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "66cbe51e-aa35-40df-8397-a0626fb3f1a2"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "message_list": [],
              "uuid": "975ef5ae-1660-42e6-a97b-2789a1c46c28",
              "name": "action_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "57f707c4-8a40-4a79-9e33-d524c4b20fda",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=9bc231b7-3a67-457f-8bdd-15a8f1e19fbf}",
                      "@{kind=app_task; name=SYS_GEN__delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=8ee9e927-9041-487f-9d99-6ee14cd3c825}",
                      "@{kind=app_task; name=SYS_GEN__uninstall_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=afa1ce25-ca29-435e-9891-e47d1c55750c}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": " ",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "9bc231b7-3a67-457f-8bdd-15a8f1e19fbf",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=fed34e5f_runbook; uuid=41441571-5d08-47cc-9100-7047bdf9cb3d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "8ee9e927-9041-487f-9d99-6ee14cd3c825",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=c2181aea_runbook; uuid=07142af9-6a50-423d-afd0-1f33b26612eb}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "afa1ce25-ca29-435e-9891-e47d1c55750c",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=e9bc1efb-67ed-4c17-9621-9465fbcb29fd}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__uninstall_CRb_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "ed9da26d-5fad-4248-bec8-4a4dff80b622",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "57f707c4-8a40-4a79-9e33-d524c4b20fda"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for deleting an application. Does not delete created VMs",
              "message_list": [],
              "uuid": "9902f58a-3cab-43e9-9197-3d2940273c02",
              "name": "action_soft_delete",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "54184e79-09df-4ed0-b3d4-c7dec54ff61f",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__soft_delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=24084afa-861a-423d-b7f4-4d8e1958a899}",
                      "@{kind=app_task; name=SYS_GEN__Package_Element_Delete_4c2f8a29_8e95_4ced_8a68_27d6cacf297a; uuid=1f9b47c8-5551-4647-880f-8deb47e2c2c8}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "24084afa-861a-423d-b7f4-4d8e1958a899",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=SYS_GEN__Runbook_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=2368403e-56f0-4b3b-a3a8-bbe5dad17a74}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__soft_delete_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "SOFT_DELETE_ELEMENT",
                    "uuid": "1f9b47c8-5551-4647-880f-8deb47e2c2c8",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Package_Element_Delete_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "b0d10c22-3628-49fb-9897-44c284464188",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "54184e79-09df-4ed0-b3d4-c7dec54ff61f"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for starting an application",
              "message_list": [],
              "uuid": "6edef084-4f56-4ab5-906c-1171a6523624",
              "name": "action_start",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "bdfb00a5-329c-491e-abeb-628861013ffc",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=694e137a-716b-4db1-be64-55cce00a08b7}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "694e137a-716b-4db1-be64-55cce00a08b7",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=ec82b6ce_runbook; uuid=2bdcf3ff-d28a-4fa0-a49f-3d7762544bda}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__start_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "306023be-e26e-441d-9f7b-0da779b4243b",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "bdfb00a5-329c-491e-abeb-628861013ffc"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for restarting an application",
              "message_list": [],
              "uuid": "04d63cdc-979d-4e87-a5f9-78218547aec8",
              "name": "action_restart",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "6b5e6123-03f4-458f-8d13-06f7028eb8b4",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__restart_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=3d743406-6e40-4a4d-be71-80cec79012e2}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "3d743406-6e40-4a4d-be71-80cec79012e2",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=50078295_runbook; uuid=02a6890f-3476-427c-86db-4d41c38fa63c}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__restart_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "fe74ad61-1537-4865-b6a3-c82cfec04add",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "6b5e6123-03f4-458f-8d13-06f7028eb8b4"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            },
            {
              "description": "System action for stopping an application",
              "message_list": [],
              "uuid": "9d31ceb1-a691-4ff9-a5e9-db794ce5100b",
              "name": "action_stop",
              "state": "ACTIVE",
              "critical": true,
              "attrs": {},
              "type": "system",
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_package",
                      "name": "LB_Package",
                      "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "DAG",
                    "uuid": "b818ff44-47b0-453d-acc9-fa74b1d3b365",
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6; uuid=0a30ff27-03eb-44ee-a870-35cdcfff3e6f}"
                    ],
                    "state": "ACTIVE",
                    "attrs": {
                      "edges": "",
                      "type": "DAG"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer",
                      "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
                    },
                    "retries": "0",
                    "description": "",
                    "type": "CALL_RUNBOOK",
                    "uuid": "0a30ff27-03eb-44ee-a870-35cdcfff3e6f",
                    "child_tasks_local_reference_list": [],
                    "state": "ACTIVE",
                    "attrs": {
                      "inarg_list": "",
                      "type": "CALL_RUNBOOK",
                      "runbook_reference": "@{kind=app_runbook; name=fed34e5f_runbook; uuid=41441571-5d08-47cc-9100-7047bdf9cb3d}"
                    },
                    "timeout_secs": "0",
                    "inherit_target": false,
                    "message_list": [],
                    "variable_list": [],
                    "name": "SYS_GEN__stop_CRb_Service_292ef1ee_ec75_4e4d_b4c7_1efcb2035cc6"
                  }
                ],
                "description": "",
                "message_list": [],
                "uuid": "25211c6e-6801-4eb8-94d4-1caca3aa2380",
                "state": "ACTIVE",
                "variable_list": [],
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "SYS_GEN__Composite_DAG_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a",
                  "uuid": "b818ff44-47b0-453d-acc9-fa74b1d3b365"
                },
                "name": "SYS_GEN__Runbook_Package_4c2f8a29_8e95_4ced_8a68_27d6cacf297a"
              }
            }
          ],
          "message_list": [],
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Load_Balancer",
              "uuid": "292ef1ee-ec75-4e4d-b4c7-1efcb2035cc6"
            }
          ],
          "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a",
          "state": "DRAFT",
          "version": "",
          "editables": {},
          "type": "DEB",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "LB_Package",
                    "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "3eca5238-8f2f-48a5-a88a-a245974526b5",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "3db6be5d_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "6bd50c9d-568c-4de3-ae4e-2a0c96f8af2c",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "3db6be5d_dag",
                "uuid": "3eca5238-8f2f-48a5-a88a-a245974526b5"
              },
              "name": "7090d913_runbook"
            },
            "type": "",
            "upgrade_runbook": {},
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "LB_Package",
                    "uuid": "4c2f8a29-8e95-4ced-8a68-27d6cacf297a"
                  },
                  "retries": "0",
                  "description": "",
                  "type": "DAG",
                  "uuid": "690d60c2-c677-4cf1-b639-8c8cb3c08038",
                  "child_tasks_local_reference_list": [],
                  "state": "ACTIVE",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "inherit_target": false,
                  "message_list": [],
                  "variable_list": [],
                  "name": "ac6cd9a6_dag"
                }
              ],
              "description": "",
              "message_list": [],
              "uuid": "8debba36-e00e-4338-971c-f8d244a7a9c0",
              "state": "ACTIVE",
              "variable_list": [],
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "ac6cd9a6_dag",
                "uuid": "690d60c2-c677-4cf1-b639-8c8cb3c08038"
              },
              "name": "f9579b95_runbook"
            }
          },
          "variable_list": [],
          "name": "LB_Package"
        }
      ]
    },
    "name": "Oracle 8 with Load Balancer"
  },
  "spec": {
    "description": "",
    "resources": {
      "client_attrs": {
        "None": {
          "y": -1874.2412773119,
          "x": -4342.442164357
        },
        "8950fc25_deployment": {
          "y": -1885.5984235491,
          "x": -4857.1207101005
        },
        "f653d795_deployment": {
          "y": -1880.2412773119,
          "x": -4314.442164357
        }
      },
      "service_definition_list": [
        {
          "singleton": false,
          "action_list": [
            {
              "description": "System action for creating an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=registerHostnameInDns}",
                      "@{kind=app_task; name=configureDns}",
                      "@{kind=app_task; name=deleteNameReservation}",
                      "@{kind=app_task; name=mountNgtTools}",
                      "@{kind=app_task; name=addRequestedDisks}",
                      "@{kind=app_task; name=installRequiredPackages}",
                      "@{kind=app_task; name=installNgtTools}",
                      "@{kind=app_task; name=configureNtp}",
                      "@{kind=app_task; name=joinActiveDirectory}",
                      "@{kind=app_task; name=createAuthLists}",
                      "@{kind=app_task; name=addLoginUsers}",
                      "@{kind=app_task; name=addGroupLogins}",
                      "@{kind=app_task; name=addAdminUsers}",
                      "@{kind=app_task; name=addAdminGroups}",
                      "@{kind=app_task; name=configureOsFirewall}",
                      "@{kind=app_task; name=addNodeIntoLoadBalancerPool}",
                      "@{kind=app_task; name=addNodeIntoNagios}"
                    ],
                    "name": "7fa70b69_dag",
                    "attrs": {
                      "edges": "               ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "registerHostnameInDns",
                    "attrs": {
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$bookedName = \"@@{bookedName}@@\"\n$domainName = \"@@{domainName}@@\"\n$assignedIp = \"@@{assignedIp}@@\"\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nAdd-DnsServerResourceRecordA -Name $bookedName -ZoneName $domainName -IPv4Address $assignedIp -CreatePtr",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "configureDns",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'cat > /etc/resolv.conf <<EOF\nsearch @@{domainName}@@\nnameserver @@{dns1}@@\nnameserver @@{dns2}@@\nEOF\n'",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteNameReservation",
                    "attrs": {
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\ncalmVariableUuid = '@@{calmVariableUuid}@@'\n#FUNCTIONS\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables/{}'.format(calmVariableUuid)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsleep(30)\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    exit(0)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "mountNgtTools",
                    "attrs": {
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n    name: getVirtualMachinesFromPrismCentral\n .TYPE:\n    Nutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n    This action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n    Function should return object type STRING with VALUE:\n .AUTHOR:\n    David Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n    1.0.0    Init version.\n .TESTED ON:\n    Nutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n    @Gfunction    \n        mainAction(payload, newEvent):\n        Executes the main code in this action.\n .INPUT PARAMETERS:\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n    resultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\n\n#FUNCTIONS\n\n#GLOBAL VARIABLES\njwt = '@@{calm_jwt}@@'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nvirtualMachineUuid = \"@@{id}@@\"\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Get VM spec\nr = urlreq(api_url, verb='GET', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n###Create spec Template\nresp.pop('status', None)\nresp['spec']['resources']['guest_tools'] = {}\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools'] = {}\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools']['iso_mount_state'] = \"MOUNTED\"\nresp['spec']['resources']['guest_tools']['nutanix_guest_tools']['state'] = \"ENABLED\"\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 2 - Get virtual machine list - Main Code\n###run put action\nr = urlreq(api_url, verb='PUT', params=json.dumps(resp), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n###Get Task uuid\ntaskUuid = resp['status']['execution_context']['task_uuid']\n\n##Execution Block 3 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/tasks/{}'.format(taskUuid)\ntaskStatus = None\ni = 0\n##Execution Block 3 - Get virtual machine list - Main Code\nwhile taskStatus != 'SUCCEEDED':\n    #Get VM status\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n    print(resp['status'])\n    taskStatus = (resp['status'])\n    print(resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(15)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addRequestedDisks",
                    "attrs": {
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n    name: getVirtualMachinesFromPrismCentral\n .TYPE:\n    Nutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n    This action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n    Function should return object type STRING with VALUE:\n .AUTHOR:\n    David Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n    1.0.0    Init version.\n .TESTED ON:\n    Nutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n    @Gfunction    \n        mainAction(payload, newEvent):\n        Executes the main code in this action.\n .INPUT PARAMETERS:\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n    @param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n    @Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n    resultObjs = {String}\n\n'''\n#FUNCTIONS\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\nvirtualMachineUuid = \"@@{id}@@\"\nnewDiskList = ('''@@{extraDisk}@@'''.splitlines())\nfor i in range(0, len(newDiskList)): \n    newDiskList[i] = int(newDiskList[i]) \n\n\n\n#GLOBAL VARIABLES\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nnewDiskListCount = len(newDiskList)\nprint(newDiskListCount)\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Get VM spec\nr = urlreq(api_url, verb='GET', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n\n###Get scsi index in use\nscsiIndexList = []\nfor disk in resp['spec']['resources']['disk_list']:\n    if (disk['device_properties']['disk_address']['adapter_type'] != 'IDE'):\n        scsiIndexList.append(disk['device_properties']['disk_address']['device_index'])\n\n###set new scsi index list\nnewList = list(item for item in range(100) if item not in scsiIndexList)[:newDiskListCount]\n\n###Create Disk Template\ni = 0\nfor newDisk in newDiskList:\n    a = {}\n    a['storage_config'] = resp['spec']['resources']['disk_list'][0]['storage_config']\n    a['device_properties'] = {}\n    a['device_properties']['device_type'] = \"DISK\"\n    a['device_properties']['disk_address'] = {}\n    a['device_properties']['disk_address']['device_index'] = newList[i]\n    a['device_properties']['disk_address']['adapter_type'] = \"SCSI\"\n    a['disk_size_bytes'] = (newDisk * 1073741824)    \n    i=i+1\n    resp['spec']['resources']['disk_list'].append(a)\nresp.pop('status', None)\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/{}'.format(virtualMachineUuid)\n##Execution Block 2 - Get virtual machine list - Main Code\n###run update action\nr = urlreq(api_url, verb='PUT', params=json.dumps(resp), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n###Get Task uuid\ntaskUuid = resp['status']['execution_context']['task_uuid']\n\n\n##Execution Block 3 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/tasks/{}'.format(taskUuid)\ntaskStatus = None\ni = 0\n##Execution Block 3 - Get virtual machine list - Main Code\nwhile taskStatus != 'SUCCEEDED':\n    #Get VM status\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)    \n    print(resp['status'])\n    taskStatus = (resp['status'])\n    print(resp['percentage_complete'])\n    i = i + 1\n    if i == 20:\n        print(\"operation failed\")\n        exit(1)\n    sleep(15)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "installRequiredPackages",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo dnf install -y \\\n        sssd \\\n        realmd \\\n        oddjob \\\n        oddjob-mkhomedir \\\n        adcli \\\n        samba-common \\\n        samba-common-tools \\\n        krb5-workstation \\\n        openldap-clients \\\n        policycoreutils-python-utils \\\n        chrony \\\n        tar \\\n        python3 ",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "installNgtTools",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n\n#INPUT VARIABLES\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo mount /dev/sr0 /mnt\nsudo python3 /mnt/installer/linux/install_ngt.py\nsudo eject\nsudo systemctl enable ngt_guest_agent",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "configureNtp",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\nCOMMENT\n#FUNCTIONS\n#INPUT VARIABLES\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'cat > /etc/chrony.conf <<EOF\nserver @@{ntp1}@@ iburst\nserver @@{ntp2}@@ iburst\ndriftfile /var/lib/chrony/drift\nlogdir /var/log/chrony\nlog measurements statistics tracking\nEOF\n'\nsudo systemctl start chronyd \nsudo systemctl enable chronyd",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "joinActiveDirectory",
                    "attrs": {
                      "exit_status": "",
                      "script": "<<COMMENT\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\n .BLOCK VARIABLES:\n\n .RETURN\n\n\nCOMMENT\n#FUNCTIONS\n\n#INPUT VARIABLES\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsudo bash -c 'echo @@{domainAdminCreds.secret}@@ | realm join --user=@@{domainAdminCreds.username}@@ @@{domainName}@@'\nsudo bash -c 'sed -i \"s/use_fully_qualified_names = True/use_fully_qualified_names = False/g\" /etc/sssd/sssd.conf'\nsudo bash -c 'sed -i \"s/%u@%d/%u/g\" /etc/sssd/sssd.conf'\nsudo systemctl restart sssd\nsudo systemctl daemon-reload",
                      "script_type": "sh",
                      "type": "",
                      "command_line_args": "",
                      "login_credential_local_reference": "@{kind=app_credential; name=ntnxcalm}"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "createAuthLists",
                    "attrs": {
                      "exit_status": "",
                      "script": "def varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\nloginGroups = ('''@@{loginGroups}@@'''.splitlines())\nadministrativeGroups = ('''@@{administrativeGroups}@@'''.splitlines())\nloginUsers = ('''@@{loginUsers}@@'''.splitlines())\nadministrativeUsers = ('''@@{administrativeUsers}@@'''.splitlines())\ndefaultUser = \"@@{defaultUser}@@\"\nprojectName = \"@@{projectName}@@\"\ndomainName = \"@@{domainName}@@\"\njwt = '@@{calm_jwt}@@'\npayload = {\n  \"kind\": \"project\",\n  \"filter\": \"name=={}\".format(projectName)\n}\n\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    projectAdGroups = resp['entities'][0]['spec']['resources']['external_user_group_reference_list']\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nfor adGroup in projectAdGroups:\n    loginGroups.append(((((adGroup['name']).replace('CN=', '')).replace('cn=', '')).split(','))[0] + \"@\" + domainName)\n\nadministrativeUsers.append(defaultUser)\nloginUserList = loginUsers + administrativeUsers\nloginGroupList = loginGroups + administrativeGroups\n\n\nprint(\"loginUsersList={}\".format(varToBase64(loginUserList)))\nprint(\"loginGroupsList={}\".format(varToBase64(loginGroupList)))\nprint(\"adminUsersList={}\".format(varToBase64(administrativeUsers)))\nprint(\"adminGroupsList={}\".format(varToBase64(administrativeGroups)))",
                      "eval_variables": "loginUsersList loginGroupsList adminUsersList adminGroupsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addLoginUsers",
                    "attrs": {
                      "script": "test=$(\n\techo \"@@{loginUsersList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo realm permit $i\n\tdone",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "sh"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addGroupLogins",
                    "attrs": {
                      "script": "test=$(\n\techo \"@@{loginGroupsList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo realm permit -g $i\n\tdone",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "sh"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addAdminUsers",
                    "attrs": {
                      "script": "test=$(\n\techo \"@@{adminUsersList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo i=$i /usr/bin/env bash -c 'echo \"$i  ALL=(ALL) NOPASSWD:ALL\" | tee /etc/sudoers.d/$i'\n\tdone",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "sh"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addAdminGroups",
                    "attrs": {
                      "script": "test=$(\n\techo \"@@{adminGroupsList}@@\" | \n    base64 -d | \n    sed 's/\\\"//g' | \n    sed 's/\\[//g' | \n    sed 's/\\]//g' |  \n    sed 's/\\,/ /g'\n)\nIFS=' ' read -ra my_array <<< \"$test\"\nfor i in ${my_array[*]}; \n\tdo \n    \tsudo i=$i /usr/bin/env bash -c 'echo \"%$i  ALL=(ALL) NOPASSWD:ALL\" | tee /etc/sudoers.d/$i'\n\tdone",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "sh"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "configureOsFirewall",
                    "attrs": {
                      "script": "print(\"hola\")",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addNodeIntoLoadBalancerPool",
                    "attrs": {
                      "script": "#https://172.30.0.30/mgmt/shared/authn/login\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\n\napplicationPort = '@@{applicationPort}@@'\nnodeIp = '@@{assignedIp}@@'\nnodeName =  '{}:{}'.format(nodeIp, applicationPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\ndescription = '{}.{}'.format('@@{bookedName}@@', '@@{Service1.domainName}@@')\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}/members'.format(loafBalancerIp, partition, poolName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"partition\": partition,\n   \"name\": nodeName,\n   \"address\": nodeIp,\n   \"description\": description\n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "addNodeIntoNagios",
                    "attrs": {
                      "script": "nagiosServer=\"@@{nagiosServer}@@\"\nhostname=\"@@{bookedName}@@\"\nhostIp=\"@@{assignedIp}@@\"\napiKey=\"@@{nagiosCreds.secret}@@\"\n\napi_url = \"https://{}/nagiosxi/api/v1/config/host?apikey={}&pretty=1\".format(nagiosServer, apiKey)\nheaders = {'Content-Type': 'application/x-www-form-urlencoded',  'Accept':'application/json'}\npayload = \"host_name={}&address={}&check_command=check_ping\\!3000,80%\\!5000,100%&max_check_attempts=2&check_period=24x7&contacts=nagiosadmin&notification_interval=5&notification_period=24x7&applyconfig=1\".format(hostname, hostIp)\nr = urlreq(api_url, verb='POST',params=payload, headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "2e264b3d_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "7fa70b69_dag"
                },
                "variable_list": [
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "bookedName",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "assignedIp",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "dns1",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "dns2",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "calmVariableUuid",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "action_create"
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "29c9b5f0_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "104c1563_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "29c9b5f0_dag"
                },
                "variable_list": []
              },
              "name": "action_delete"
            },
            {
              "description": "System action for starting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "2e5bbd2d_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "29c66290_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "2e5bbd2d_dag"
                },
                "variable_list": []
              },
              "name": "action_start"
            },
            {
              "description": "System action for stopping an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "3026f2d1_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "623bb9bb_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "3026f2d1_dag"
                },
                "variable_list": []
              },
              "name": "action_stop"
            },
            {
              "description": "System action for restarting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Service1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "335f6bca_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "814f7bf6_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "335f6bca_dag"
                },
                "variable_list": []
              },
              "name": "action_restart"
            }
          ],
          "depends_on_list": [
            {
              "kind": "app_service",
              "name": "Load_Balancer"
            }
          ],
          "name": "Service1",
          "port_list": [],
          "tier": "",
          "variable_list": [
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "domainName",
              "value": "etisalatssi.ae",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "netDeviceName",
              "value": "ens3",
              "label": "",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "SECRET",
              "name": "sshPublicKey",
              "value": "",
              "label": "",
              "attrs": {
                "is_secret_modified": false,
                "secret_reference": {},
                "type": "SECRET"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "replicaSelected",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "ntp1",
              "value": "172.17.0.3",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "ntp2",
              "value": "0.es.pool.ntp.org",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "loginUsersList",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "loginGroupsList",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "adminUsersList",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "adminGroupsList",
              "value": "",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "nagiosServer",
              "value": "10.106.93.70",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            }
          ],
          "description": ""
        },
        {
          "singleton": false,
          "action_list": [
            {
              "description": "System action for creating an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=registerHostnameInDns}",
                      "@{kind=app_task; name=deleteNameReservation}",
                      "@{kind=app_task; name=createLoadBalancerPool}",
                      "@{kind=app_task; name=createLoadBalancervs}"
                    ],
                    "name": "ec7aa8f3_dag",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "registerHostnameInDns",
                    "attrs": {
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$bookedName = \"@@{bookedName}@@\"\n$domainName = \"@@{domainName}@@\"\n$assignedIp = \"@@{assignedIp}@@\"\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nAdd-DnsServerResourceRecordA -Name $bookedName -ZoneName $domainName -IPv4Address $assignedIp -CreatePtr",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteNameReservation",
                    "attrs": {
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\ncalmVariableUuid = '@@{calmVariableUuid}@@'\n#FUNCTIONS\n#GLOBAL VARIABLES\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables/{}'.format(calmVariableUuid)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nsleep(30)\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    exit(0)\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "createLoadBalancerPool",
                    "attrs": {
                      "script": "#https://172.30.0.30/mgmt/shared/authn/login\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{loadBalancerPartition}@@\"\n\n#virtualserver vars\nvirtualServerPort = '@@{virtualServerPort}@@'\napplicationPort = '@@{applicationPort}@@'\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\npoolDescription = '@@{calm_application_name}@@'\nmonitor  = 'tcp_half_open'\nloadBalancingMode = 'least-connections-member'\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"partition\": partition,\n   \"description\": poolDescription,\n   \"name\": poolName,\n   \"members\":[],\n   \"monitor\": monitor,\n   \"loadBalancingMode\": loadBalancingMode \n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "createLoadBalancervs",
                    "attrs": {
                      "script": "#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{loadBalancerPartition}@@\"\n\n#virtualserver vars\nvirtualServerPort = '@@{virtualServerPort}@@'\napplicationPort = '@@{applicationPort}@@'\n#Airwatch-7010-VS\nvirtualServerName = '{}-{}-VS'.format('@@{calm_application_name}@@', virtualServerPort)\nvirtualServerIp = '@@{assignedIp}@@'\nvirtualServerDestination = '{}:{}'.format(virtualServerIp, virtualServerPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Virtual Server\napi_url = 'https://{}/mgmt/tm/ltm/virtual'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\npayload = {\n   \"name\": virtualServerName,\n   \"destination\": virtualServerDestination,\n   \"description\": \"created from Nutanix Calm\",\n   \"ipProtocol\": \"tcp\",\n   \"translateAddress\": \"enabled\",\n   \"translatePort\": \"enabled\",\n   \"sourceAddressTranslation\": {\n        \"type\": \"automap\"\n    },\n   \"partition\": partition,\n   \"pool\": poolName\n}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "c35de71c_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "ec7aa8f3_dag"
                },
                "variable_list": []
              },
              "name": "action_create"
            },
            {
              "description": "System action for deleting an application. Deletes created VMs as well",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "e268c8a1_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "c2181aea_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "e268c8a1_dag"
                },
                "variable_list": []
              },
              "name": "action_delete"
            },
            {
              "description": "System action for starting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "d369e836_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "ec82b6ce_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "d369e836_dag"
                },
                "variable_list": []
              },
              "name": "action_start"
            },
            {
              "description": "System action for stopping an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "66e02879_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "fed34e5f_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "66e02879_dag"
                },
                "variable_list": []
              },
              "name": "action_stop"
            },
            {
              "description": "System action for restarting an application",
              "type": "system",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_service",
                      "name": "Load_Balancer"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "a5f232dc_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "50078295_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "a5f232dc_dag"
                },
                "variable_list": []
              },
              "name": "action_restart"
            }
          ],
          "depends_on_list": [],
          "name": "Load_Balancer",
          "port_list": [],
          "tier": "",
          "variable_list": [
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "domainName",
              "value": "etisalatssi.ae",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "loadBalancerPartition",
              "value": "Calm-Partition",
              "label": "",
              "attrs": {
                "type": ""
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            }
          ],
          "description": ""
        }
      ],
      "substrate_definition_list": [
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=getVirtualMachinesFromPrismCentral}",
                      "@{kind=app_task; name=getHostnamesFromDns}",
                      "@{kind=app_task; name=getAvailableNames}",
                      "@{kind=app_task; name=blockFreeHostname}",
                      "@{kind=app_task; name=getIpFromIpam}",
                      "@{kind=app_task; name=setVirtualMachineNetwork}"
                    ],
                    "name": "7697031b_dag",
                    "attrs": {
                      "edges": "    ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getVirtualMachinesFromPrismCentral",
                    "attrs": {
                      "exit_status": "",
                      "script": "'''\nSCRIPT INFORMATION\n .NAME:\n\tname: 001_getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. \n        Pre-create\n        Set Variable.\n .DESCRIPTION:\n\tGet full list of existing VMs on Prism Central via APIv3 requests.\n .EXPECTED RESULT:\n\tScript should return the complete list of existing VMs on Nutanix Prism Central as Json converted into base64 string. \n .AUTHORS:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version    David Ríos Delgado.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .INPUT PARAMETERS:\n\t@param \n                {string}\n                {Mandatory]\n                {Name=inputExample1}\n                {Description=This is an example 1}\n\t@param \n                {string}\n                {Mandatory]\n                {Name=inputExample2}\n                {Description=This is an example 2}\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .IN-ACTION VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\njwt = '@@{calm_jwt}@@'\n\n#FUNCTIONS\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#GLOBAL VARIABLES\napi_url = 'https://localhost:9440/api/nutanix/v3/vms/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n\n#MAIN CODE BLOC EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\npayload = {\n  \"kind\": \"vm\"\n}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    virtualMachineCount = resp['metadata']['total_matches']\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n\n##Execution Block 2 - Get virtual machine list - Variables\nlist = []\noffset = 0\nlength = 500\niterations = (int(virtualMachineCount) / length) + 1\n##Execution Block 2 - Get virtual machine list - Main Code\nfor iterator in range(iterations):\n    print(iterator)    \n    payload = {\n      \"kind\": \"vm\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n    \tif \"@@{virtualMachinePrefix}@@\" in item['spec']['name']:\n    \t\tlist.append(item['spec']['name'])\n    offset = offset + length\n\nresult = varToBase64(list)\n\n#RETURN\nprint \"virtualMachineList={}\".format(result)\nexit(0)",
                      "eval_variables": "virtualMachineList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getHostnamesFromDns",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\nfunction psObjectToBase64($psObject){\n\treturn [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(($psObject | convertto-json -Compress)))\n}\n\n#INPUT VARIABLES\n$zoneName = \"@@{Service1.domainName}@@\"\n$virtualMachinePrefix = \"@@{virtualMachinePrefix}@@\"\n\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$dnsList = @((Get-DnsServerResourceRecord -ZoneName $zoneName -RRType A | Where-Object {$_.Hostname -like \"*$virtualMachinePrefix*\"}).hostname)\nwrite-host $dnsList\nif (($null -eq $dnsList[0]) -or ($dnsList[0] -eq \"\")){\n\twrite-host \"No values found\"$dnsl\t\n    $dnsList = @('null1')\n}\n$return = psObjectToBase64($dnsList)\n#RETURN\nwrite-host dnsList=$return",
                      "eval_variables": "dnsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getAvailableNames",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#INPUT VARIABLES\nvirtualMachineList = base64ToJson(\"@@{virtualMachineList}@@\")\ndnsList = base64ToJson(\"@@{dnsList}@@\")\nvirtualMachinePrefix = \"@@{virtualMachinePrefix}@@\"\nhostnameIncremental = \"@@{hostnameIncremental}@@\"\n#GLOBAL VARIABLES\ntempList = []\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Decode Base64 to dicts/list\nif (dnsList != 'null1'):\n\tif (isinstance(dnsList, str)):\n\t\tvirtualMachineList.append(dnsList)\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList))\n\telse:\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList + dnsList))\n    ##Get unique members from dnsList and virtualMachineList\nelse:\n\tnameList = virtualMachineList\n###Remove from list those member with different character count than prefix + incremental\nnameList = [n for n in nameList if len(n) == (len(virtualMachinePrefix) + int(hostnameIncremental))]\n###Convert list into list of integers\nnameList = [int(n[len(virtualMachinePrefix):]) for n in nameList]\n###Get first 21 free members from range.\nfreeMembers = (([str(n).zfill(int(hostnameIncremental)) for n in range((10 ** int(hostnameIncremental)) -1 ) if n not in nameList ])[:21])\n###Remove first element from list (0) \nfreeMembers.pop(0)\n###if freeMembers = 0 exit and print error\nif (len(freeMembers) == 0):\n    print(\"No more names available in the pool\")\n    exit(1)\n###Add prefix for each item in list\nfreeMembers = (map(virtualMachinePrefix.__add__,freeMembers))\nprint(freeMembers)\nresult = varToBase64(freeMembers)\n\n#RETURN\nprint(\"freeMembers={}\".format(result))\nexit(0)",
                      "eval_variables": "freeMembers",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "blockFreeHostname",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\n#INPUT VARIABLES\nfreeMembers = base64ToJson(\"@@{freeMembers}@@\")\njwt = '@@{calm_jwt}@@'\nvarController = \"@@{calm_unique}@@\"\ncalmArrayIndex = \"@@{calm_array_index}@@\"\ncalmApplicationUuid = \"@@{calm_application_uuid}@@\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nif (calmArrayIndex != \"0\"):\n\tsleep(int(calmArrayIndex) * 30)\n\t\nfor member in freeMembers:\n    payload = {\n        \"spec\": {\n            \"name\": \"{}\".format(member),\n            \"resources\": {\n            \"val_type\": \"STRING\",\n            \"data_type\": \"BASE\",\n            \"value\": \"{0}-{1}\".format(calmApplicationUuid, varController),\n            \"type\": \"LOCAL\"\n            }\n            \n        },\n    \"metadata\": {\"kind\": \"app_variable\"}\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        print (\"Post request Ok\", r.content)\n        if (resp[\"spec\"][\"resources\"][\"value\"] == \"{0}-{1}\".format(calmApplicationUuid, varController)):\n            break\n    else:\n        print (\"Post request failed\", r.content)\n\n\n#RETURN\nprint (\"bookedName={}\".format(member))\nprint (\"calmVariableUuid={}\".format(resp[\"metadata\"][\"uuid\"]))\nexit(0)\n\n",
                      "eval_variables": "bookedName calmVariableUuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getIpFromIpam",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$dnsForwardAreaId = \"@@{Service1.domainName}@@\"\n$network = '@@{networkSelection}@@'\n$virtualMachineName = '@@{bookedName}@@'\n\n#GLOBAL VARIABLES\n$subnet = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" | \n    where-object {$_.name -eq $network}\n\n$reverseZoneId = `\n    ($subnet.NetworkId.split(\".\").split(\"/\"))[2] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[1] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[0] + \n    \".in-addr.arpa\"\n\n$reverseZone = Get-IpamDnsZone -Zonetype IPv4Reverse -ZoneName $reverseZoneId\n$forwardZone = Get-IpamDnsZone -Zonetype Forward -ZoneName $dnsForwardAreaId\n\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n$validator = $False\n$exitCount = 0\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$ipamServerList = Get-IpamServerInventory | Sort-Object Name\nwhile(($validator -eq $False) -or ($exitCount -lt 5)){\n    $error.clear()\n    try{\n        $assignedIp = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n            where-object {$_.name -eq $network} |\n            Get-IpamRange |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name} |\n\t\t\tFind-IpamFreeAddress -TestReachability |\n            Add-IpamAddress `\n            \t-ManagedByService \"MS DHCP\" `\n                -ServiceInstance $ipamServerList[0].name `\n            \t-DeviceName $virtualMachineName `\n                -ForwardLookupZone $forwardZone.ZoneName `\n                -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n                -ReverseLookupZone $reverseZone.ZoneName `\n                -ReverseLookupPrimaryServer $reverseZone.PreferredServerName `\n                -erroraction stop -PassThru\n            $validator = $True\n            $exitCount = 5\n    }   catch{\n            Write-Host \"Caught the exception\";\n            Write-Host $Error[0].Exception;\n            $validator = $False\n            $exitCount++\n        }\n}\n\n$returnIp=$assignedIp.IpAddress.IPAddressToString\nwrite-host \"retorno\"\n$returnIp\nfor($i = 1; $i -lt $ipamServerList.count){\n\t$ipamServerList[$i].name\n    Add-IpamAddress `\n    \t-IpAddress $returnIp `\n\t\t-ManagedByService \"MS DHCP\" `\n        -ServiceInstance $ipamServerList[$i].name `\n        -DeviceName $virtualMachineName `\n        -ForwardLookupZone $forwardZone.ZoneName `\n        -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n        -ReverseLookupZone $reverseZone.ZoneName `\n        -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n    $i++\n}\nAdd-IpamAddress `\n\t-IpAddress $returnIp `\n\t-ManagedByService \"IPAM\" `\n    -ServiceInstance \"localhost\" `\n    -DeviceName $virtualMachineName `\n    -ForwardLookupZone $forwardZone.ZoneName `\n    -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n    -ReverseLookupZone $reverseZone.ZoneName `\n    -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n\n\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$subData = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n\t\t   \twhere-object {$_.name -eq $network} \n$netData = Get-IpamRange `\n            -AddressFamily IPv4 `\n            -AddressCategory Private `\n            -AddressSpace \"Default\" |\n            where-object {$_.NetworkId -eq $subData.NetworkId} |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name}\n            \n\n#write-host \"netdata\"\n#$netData\n$returnSubnet=$netData.SubnetMask.IPAddressToString\n$returnGateway=($netData.Gateway -split(\"/\"))[0]\n$returnDns1=$netData.DnsServers[0].IPAddressToString\n$returnDns2=$netData.DnsServers[1].IPAddressToString\n\n#RETURN\nwrite-host \"assignedIp=$returnIp\"\nwrite-host \"subnet=$returnSubnet\"\nwrite-host \"gateway=$returnGateway\"\nwrite-host \"dns1=$returnDns1\"\nwrite-host \"dns2=$returnDns2\"",
                      "eval_variables": "assignedIp subnet gateway dns1 dns2",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "setVirtualMachineNetwork",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n\n#INPUT VARIABLES\nproject = '@@{projectName}@@'\nclusterSelection = '@@{clusterSelection}@@'\nnetworkSelection = '@@{networkSelection}@@'\njwt = '@@{calm_jwt}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistSelection = []\n#FUNCTIONS\n\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\npayload = {\n  \"kind\": \"project\"\n}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print (\"Post request failed\", r.content)\n    exit(1)\n\n##Execution Block 2 - Get virtual machine list - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 2 - Get virtual machine list - Main Code\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\n##Execution Block 2 - Get virtual machine list - Variables\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 2 - Get virtual machine list - Main Code\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        if (((resp['spec']['cluster_reference']['name']) == clusterSelection) and (resp['spec']['name'] == networkSelection)):\n            selectedUuid = netUuid\n            print(\"netUuid\")\n            break\n    else:\n        print (\"Post request failed\", r.content)\n        exit(1)\n\nnetwork = {\"name\":networkSelection,\"uuid\":\"{}\".format(selectedUuid)}\n\n#RETURN\nprint (\"virtualMachineNetwork={}\".format(json.dumps(network)))",
                      "eval_variables": "virtualMachineNetwork",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "45297c5d_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "7697031b_dag"
                },
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "hostnameIncremental",
                    "value": "3",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  },
                  {
                    "val_type": "STRING",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "virtualMachineNetwork",
                    "value": "",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "pre_action_create"
            },
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=deleteIpamObject}",
                      "@{kind=app_task; name=deleteActiveDirectoryObject}",
                      "@{kind=app_task; name=deleteMemberFromPool}",
                      "@{kind=app_task; name=removeNodeFromLoadBalancer}",
                      "@{kind=app_task; name=removeNodeFromNagios}"
                    ],
                    "name": "6bf1c87f_dag",
                    "attrs": {
                      "edges": "   ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteIpamObject",
                    "attrs": {
                      "script": "Remove-IpamAddress -IpAddress \"@@{assignedIp}@@\" -Force:$true",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteActiveDirectoryObject",
                    "attrs": {
                      "script": "Get-ADComputer -Filter {name -eq \"@@{bookedName}@@\"} | Remove-ADComputer -Confirm:$false\nRemove-DnsServerResourceRecord -ZoneName \"@@{Service1.domainName}@@\" -RRType \"A\" -Name \"@@{bookedName}@@\" -RecordData \"@@{assignedIp}@@\" -Force:$true",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteMemberFromPool",
                    "attrs": {
                      "script": "#https://172.30.0.30/mgmt/tm/ltm/pool/~calm~lbt-10-22-Pool/members/10.1.0.210:22\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\n\napplicationPort = '@@{applicationPort}@@'\nnodeIp = '@@{assignedIp}@@'\nnodeName =  '{}:{}'.format(nodeIp, applicationPort)\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\ndescription = '{}.{}'.format('@@{bookedName}@@', '@@{Service1.domainName}@@')\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}/members/{}:{}'.format(loafBalancerIp, partition, poolName, nodeIp, applicationPort)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\n",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "removeNodeFromLoadBalancer",
                    "attrs": {
                      "script": "#https://172.30.0.30/mgmt/tm/ltm/node/~calm~10.1.0.210\n#loadbalancer vars.\n\nloafBalancerIp = \"@@{Load_Balancer.address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\nnodeIp = '@@{assignedIp}@@'\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/node/~{}~{}'.format(loafBalancerIp, partition, nodeIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "Linux8"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "removeNodeFromNagios",
                    "attrs": {
                      "script": "nagiosServer=\"@@{Service1.nagiosServer}@@\"\nhostname=\"@@{bookedName}@@\"\nhostIp=\"@@{assignedIp}@@\"\napiKey=\"@@{nagiosCreds.secret}@@\"\n\napi_url = \"https://{}/nagiosxi/api/v1/config/host?apikey={}&pretty=1&host_name={}&applyconfig=1\".format(nagiosServer, apiKey, hostname)\nheaders = {'Content-Type': 'application/x-www-form-urlencoded',  'Accept':'application/json'}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "431aa2f2_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "6bf1c87f_dag"
                },
                "variable_list": []
              },
              "name": "post_action_delete"
            }
          ],
          "type": "AHV_VM",
          "name": "Linux8",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "connection_port": 22,
            "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
            "delay_secs": "60",
            "disable_readiness_probe": false,
            "login_credential_local_reference": {
              "kind": "app_credential",
              "name": "ntnxcalm"
            }
          },
          "editables": {
            "create_spec": {
              "resources": {
                "nic_list": {},
                "serial_port_list": {},
                "num_sockets": true,
                "memory_size_mib": true,
                "boot_config": true,
                "disk_list": {
                  "0": {
                    "device_properties": {
                      "disk_address": ""
                    },
                    "disk_size_mib": true
                  }
                }
              }
            }
          },
          "os_type": "Linux",
          "create_spec": {
            "name": "@@{bookedName}@@",
            "resources": {
              "nic_list": [
                {
                  "nic_type": "NORMAL_NIC",
                  "vpc_reference": null,
                  "ip_endpoint_list": [],
                  "network_function_chain_reference": null,
                  "network_function_nic_type": "INGRESS",
                  "mac_address": "",
                  "subnet_reference": {
                    "kind": "subnet",
                    "type": "",
                    "name": "",
                    "uuid": "@@{virtualMachineNetwork.uuid}@@"
                  },
                  "type": ""
                }
              ],
              "serial_port_list": [],
              "guest_tools": null,
              "num_vcpus_per_socket": 1,
              "num_sockets": 1,
              "gpu_list": [],
              "memory_size_mib": 1024,
              "parent_reference": null,
              "hardware_clock_timezone": "",
              "guest_customization": {
                "cloud_init": {
                  "meta_data": "",
                  "type": "",
                  "user_data": "#cloud-config\nhostname: @@{bookedName}@@\nfqdn: @@{bookedName}@@.@@{Service1.domainName}@@\nusers:\n  - name: ntnxcalm\n    ssh-authorized-keys:\n      - @@{Service1.sshPublicKey}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    root:@@{rootCreds.secret}@@\n  expire: False\nssh_pwauth:   true\n#Config net file\nwrite_files:\n  - content: |\n      DEVICE=@@{Service1.netDeviceName}@@\n      NAME=@@{Service1.netDeviceName}@@\n      TYPE=Ethernet\n      NM_CONTROLLED=yes\n      ONBOOT=yes\n      BOOTPROTO=static\n      IPADDR=@@{assignedIp}@@\n      NETMASK=@@{subnet}@@\n      GATEWAY=@@{gateway}@@\n    path: /etc/sysconfig/network-scripts/ifcfg-@@{Service1.netDeviceName}@@\nruncmd:\n  - [ifdown, ens3]\n  - [ifup, ens3]\n  - [systemctl, mask, cloud-init-local, cloud-init, cloud-config, cloud-final]\n  - [eject]"
                },
                "type": "",
                "sysprep": null
              },
              "power_state": "ON",
              "type": "",
              "account_uuid": "28b0cf0a-59e5-4d3e-bef1-80bca0b8e4ff",
              "boot_config": {
                "boot_device": {
                  "type": "",
                  "disk_address": {
                    "type": "",
                    "device_index": 0,
                    "adapter_type": "SCSI"
                  }
                },
                "type": "",
                "boot_type": "",
                "mac_address": ""
              },
              "disk_list": [
                {
                  "data_source_reference": {
                    "kind": "image",
                    "type": "",
                    "name": "OL81_APP_RF2",
                    "uuid": "5a70a33d-2c84-4feb-ae66-163adaa9eb78"
                  },
                  "type": "",
                  "disk_size_mib": 0,
                  "volume_group_reference": null,
                  "device_properties": {
                    "type": "",
                    "disk_address": {
                      "type": "",
                      "device_index": 0,
                      "adapter_type": "SCSI"
                    },
                    "device_type": "DISK"
                  }
                }
              ]
            },
            "availability_zone_reference": null,
            "backup_policy": null,
            "type": "",
            "cluster_reference": null,
            "categories": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=getHostnamesFromDns}",
                      "@{kind=app_task; name=getAvailableNames}",
                      "@{kind=app_task; name=blockFreeHostname}",
                      "@{kind=app_task; name=getIpFromIpam}"
                    ],
                    "name": "0ea738ea_dag",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getHostnamesFromDns",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\nfunction psObjectToBase64($psObject){\n\treturn [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(($psObject | convertto-json -Compress)))\n}\n\n#INPUT VARIABLES\n$zoneName = \"@@{Service1.domainName}@@\"\n$virtualMachinePrefix = \"@@{virtualMachinePrefix}@@-VS\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$dnsList = @((Get-DnsServerResourceRecord -ZoneName $zoneName -RRType A | Where-Object {$_.Hostname -like \"*$virtualMachinePrefix*\"}).hostname)\nwrite-host $dnsList\nif (($null -eq $dnsList[0]) -or ($dnsList[0] -eq \"\")){\n\twrite-host \"No values found\"$dnsl\t\n    $dnsList = @('null1')\n}\n$return = psObjectToBase64($dnsList)\n#RETURN\nwrite-host dnsList=$return",
                      "eval_variables": "dnsList",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getAvailableNames",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#INPUT VARIABLES\nvirtualMachineList = []\ndnsList = base64ToJson(\"@@{dnsList}@@\")\nvirtualMachinePrefix = \"@@{virtualMachinePrefix}@@-VS\"\nhostnameIncremental = \"@@{hostnameIncremental}@@\"\n#GLOBAL VARIABLES\ntempList = []\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n###Decode Base64 to dicts/list\nif (dnsList != 'null1'):\n\tif (isinstance(dnsList, str)):\n\t\tvirtualMachineList.append(dnsList)\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList))\n\telse:\n\t\tnameList = sorted(dict.fromkeys(virtualMachineList + dnsList))\n    ##Get unique members from dnsList and virtualMachineList\nelse:\n\tnameList = virtualMachineList\n###Remove from list those member with different character count than prefix + incremental\nnameList = [n for n in nameList if len(n) == (len(virtualMachinePrefix) + int(hostnameIncremental))]\n###Convert list into list of integers\nnameList = [int(n[len(virtualMachinePrefix):]) for n in nameList]\n###Get first 21 free members from range.\nfreeMembers = (([str(n).zfill(int(hostnameIncremental)) for n in range((10 ** int(hostnameIncremental)) -1 ) if n not in nameList ])[:21])\n###Remove first element from list (0) \nfreeMembers.pop(0)\n###if freeMembers = 0 exit and print error\nif (len(freeMembers) == 0):\n    print(\"No more names available in the pool\")\n    exit(1)\n###Add prefix for each item in list\nfreeMembers = (map(virtualMachinePrefix.__add__,freeMembers))\nprint(freeMembers)\nresult = varToBase64(freeMembers)\n\n#RETURN\nprint(\"freeMembers={}\".format(result))\nexit(0)",
                      "eval_variables": "freeMembers",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "blockFreeHostname",
                    "attrs": {
                      "exit_status": "",
                      "script": "#script\n'''\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n .DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n'''\n#FUNCTIONS\ndef base64ToJson(var):\n    decoded = (base64.b64decode(var.encode('ascii')))\n    return json.loads(decoded)\n\n#INPUT VARIABLES\nfreeMembers = base64ToJson(\"@@{freeMembers}@@\")\njwt = '@@{calm_jwt}@@'\nvarController = \"@@{calm_unique}@@\"\ncalmArrayIndex = \"@@{calm_array_index}@@\"\ncalmApplicationUuid = \"@@{calm_application_uuid}@@\"\n#GLOBAL VARIABLES\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\napi_url = 'https://localhost:9440/api/nutanix/v3/app_variables'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'Authorization': 'Bearer {}'.format(jwt)}\n##Execution Block 1 - Get virtual machine api pagination - Main Code\nif (calmArrayIndex != \"0\"):\n\tsleep(calmArrayIndex * 30)\n\t\nfor member in freeMembers:\n    payload = {\n        \"spec\": {\n            \"name\": \"{}\".format(member),\n            \"resources\": {\n            \"val_type\": \"STRING\",\n            \"data_type\": \"BASE\",\n            \"value\": \"{0}-{1}\".format(calmApplicationUuid, varController),\n            \"type\": \"LOCAL\"\n            }\n            \n        },\n    \"metadata\": {\"kind\": \"app_variable\"}\n    }\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n    if r.ok:\n        resp = json.loads(r.content)\n        print (\"Post request Ok\", r.content)\n        if (resp[\"spec\"][\"resources\"][\"value\"] == \"{0}-{1}\".format(calmApplicationUuid, varController)):\n            break\n    else:\n        print (\"Post request failed\", r.content)\n\n\n#RETURN\nprint (\"bookedName={}\".format(member))\nprint (\"calmVariableUuid={}\".format(resp[\"metadata\"][\"uuid\"]))\nexit(0)\n\n",
                      "eval_variables": "bookedName calmVariableUuid",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "getIpFromIpam",
                    "attrs": {
                      "exit_status": "",
                      "script": "<#\nSCRIPT INFORMATION\n .NAME:\n\tname: getVirtualMachinesFromPrismCentral\n .TYPE:\n\tNutanix Calm escript. Set Variable / Task\n . DESCRIPTION:\n\tThis action is a Template. Describe the funcionality of this ACTION\n .EXPECTED RESULT:\n\tFunction should return object type STRING with VALUE:\n .AUTHOR:\n\tDavid Ríos Delgado <david.riosdelgado@nutanix.com>\n .VERSION HISTORY:\n\t1.0.0\tInit version.\n .TESTED ON:\n\tNutanix Calm \n                3.0.0.X\n .FUNCTIONS:\n\t@Gfunction\t\n        mainAction(payload, newEvent):\n\t\tExecutes the main code in this action.\n .INPUT PARAMETERS:\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample1}\n        {Description=This is an example 1}\n\t@param \n        {string}\n        {Mandatory]\n        {Name=inputExample2}\n        {Description=This is an example 2}\n\n .GLOBAL VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .BLOCK VARIABLES:\n\t@Mparam \n        {string}\n        {Mandatory}\n        {Name=type}\n        {Description=Describes the type of vRealize Orchestrator script}\n .RETURN\n\tresultObjs = {String}\n\n#>\n#FUNCTIONS\n\n#INPUT VARIABLES\n$dnsForwardAreaId = \"@@{Service1.domainName}@@\"\n$network = '@@{networkSelection}@@'\n$virtualMachineName = '@@{bookedName}@@'\n\n#GLOBAL VARIABLES\n$subnet = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" | \n    where-object {$_.name -eq $network}\n\n$reverseZoneId = `\n    ($subnet.NetworkId.split(\".\").split(\"/\"))[2] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[1] + \".\" + \n    ($subnet.NetworkId.split(\".\").split(\"/\"))[0] + \n    \".in-addr.arpa\"\n\n$reverseZone = Get-IpamDnsZone -Zonetype IPv4Reverse -ZoneName $reverseZoneId\n$forwardZone = Get-IpamDnsZone -Zonetype Forward -ZoneName $dnsForwardAreaId\n\n\n#MAIN CODE BLOCK EXECUTION\n##Execution Block 1 - Get virtual machine api pagination - Variables\n$validator = $False\n$exitCount = 0\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$ipamServerList = Get-IpamServerInventory | Sort-Object Name\nwhile(($validator -eq $False) -or ($exitCount -lt 5)){\n    $error.clear()\n    try{\n        $assignedIp = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n            where-object {$_.name -eq $network} |\n            Get-IpamRange |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name} |\n\t\t\tFind-IpamFreeAddress -TestReachability |\n            Add-IpamAddress `\n            \t-ManagedByService \"MS DHCP\" `\n                -ServiceInstance $ipamServerList[0].name `\n            \t-DeviceName $virtualMachineName `\n                -ForwardLookupZone $forwardZone.ZoneName `\n                -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n                -ReverseLookupZone $reverseZone.ZoneName `\n                -ReverseLookupPrimaryServer $reverseZone.PreferredServerName `\n                -erroraction stop -PassThru\n            $validator = $True\n            $exitCount = 5\n    }   catch{\n            Write-Host \"Caught the exception\";\n            Write-Host $Error[0].Exception;\n            $validator = $False\n            $exitCount++\n        }\n}\n\n$returnIp=$assignedIp.IpAddress.IPAddressToString\nwrite-host \"retorno\"\n$returnIp\nfor($i = 1; $i -lt $ipamServerList.count){\n\t$ipamServerList[$i].name\n    Add-IpamAddress `\n    \t-IpAddress $returnIp `\n\t\t-ManagedByService \"MS DHCP\" `\n        -ServiceInstance $ipamServerList[$i].name `\n        -DeviceName $virtualMachineName `\n        -ForwardLookupZone $forwardZone.ZoneName `\n        -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n        -ReverseLookupZone $reverseZone.ZoneName `\n        -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n    $i++\n}\nAdd-IpamAddress `\n\t-IpAddress $returnIp `\n\t-ManagedByService \"IPAM\" `\n    -ServiceInstance \"localhost\" `\n    -DeviceName $virtualMachineName `\n    -ForwardLookupZone $forwardZone.ZoneName `\n    -ForwardLookupPrimaryServer $forwardZone.PreferredServerName `\n    -ReverseLookupZone $reverseZone.ZoneName `\n    -ReverseLookupPrimaryServer $reverseZone.PreferredServerName\n\n\n##Execution Block 1 - Get virtual machine api pagination - Variables\n##Execution Block 1 - Get virtual machine api pagination - Main Code\n$subData = Get-IpamSubnet -AddressFamily IPv4 -AddressSpace \"Default\" |\n\t\t   \twhere-object {$_.name -eq $network} \n$netData = Get-IpamRange `\n            -AddressFamily IPv4 `\n            -AddressCategory Private `\n            -AddressSpace \"Default\" |\n            where-object {$_.NetworkId -eq $subData.NetworkId} |\n            where-object {$_.ServiceInstance -eq $ipamServerList[0].name}\n            \n\n#write-host \"netdata\"\n#$netData\n$returnSubnet=$netData.SubnetMask.IPAddressToString\n$returnGateway=($netData.Gateway -split(\"/\"))[0]\n$returnDns1=$netData.DnsServers[0].IPAddressToString\n$returnDns2=$netData.DnsServers[1].IPAddressToString\n\n#RETURN\nwrite-host \"assignedIp=$returnIp\"\nwrite-host \"subnet=$returnSubnet\"\nwrite-host \"gateway=$returnGateway\"\nwrite-host \"dns1=$returnDns1\"\nwrite-host \"dns2=$returnDns2\"",
                      "eval_variables": "assignedIp subnet gateway dns1 dns2",
                      "eval_scope": "local",
                      "type": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "SET_VARIABLE",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "aec5250e_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "0ea738ea_dag"
                },
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "hostnameIncremental",
                    "value": "3",
                    "label": "",
                    "attrs": {
                      "type": ""
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "pre_action_create"
            },
            {
              "description": "",
              "type": "fragment",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=deleteIpamObject}",
                      "@{kind=app_task; name=deleteActiveDirectoryObject}",
                      "@{kind=app_task; name=deleteVirtualServer}",
                      "@{kind=app_task; name=deletePool}"
                    ],
                    "name": "f6ab4d7f_dag",
                    "attrs": {
                      "edges": "  ",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteIpamObject",
                    "attrs": {
                      "script": "Remove-IpamAddress -IpAddress \"@@{assignedIp}@@\" -Force:$true",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteActiveDirectoryObject",
                    "attrs": {
                      "script": "Remove-DnsServerResourceRecord -ZoneName \"@@{Service1.domainName}@@\" -RRType \"A\" -Name \"@@{bookedName}@@\" -RecordData \"@@{assignedIp}@@\" -Force:$true",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "npsscript"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deleteVirtualServer",
                    "attrs": {
                      "script": "#https://hostname/mgmt/tm/ltm/virtual/~partition-name~vs-name\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\nvirtualServerPort = '@@{virtualServerPort}@@'\nvirtualServerName = '{}-{}-VS'.format('@@{calm_application_name}@@', virtualServerPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Virtual Server\napi_url = 'https://{}/mgmt/tm/ltm/virtual/~{}~{}'.format(loafBalancerIp, partition, virtualServerName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_substrate",
                      "name": "LoadBalancer1"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "deletePool",
                    "attrs": {
                      "script": "#https://hostname/mgmt/tm/ltm/pool/~partition-name~pool-name\n#loadbalancer vars.\nloafBalancerIp = \"@@{address}@@\"\nusername = \"@@{loadBalancerCreds.username}@@\"\npassword = \"@@{loadBalancerCreds.secret}@@\"\npartition = \"@@{Load_Balancer.loadBalancerPartition}@@\"\n\n#virtualserver vars\napplicationPort = '@@{applicationPort}@@'\npoolName = '{}-{}-Pool'.format('@@{calm_application_name}@@', applicationPort)\n\n#Retrieve Token\napi_url = 'https://{}/mgmt/shared/authn/login'.format(loafBalancerIp)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\npayload = {\n    \"username\": username,\n    \"password\": password,\n    \"loginProviderName\": \"tmos\"\n}\n\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\nif r.ok:\n    resp = json.loads(r.content)\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nprint(resp[\"token\"][\"token\"])\nf5Token = resp[\"token\"][\"token\"]\n\n\n#create Pool\napi_url = 'https://{}/mgmt/tm/ltm/pool/~{}~{}'.format(loafBalancerIp, partition, poolName)\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json', 'X-F5-Auth-Token':f5Token}\nr = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\nif r.ok:\n    print(\"ok\")\nelse:\n    print \"Post request failed\", r.content\n    exit(1)",
                      "type": "",
                      "command_line_args": "",
                      "exit_status": "",
                      "script_type": "static"
                    },
                    "timeout_secs": "0",
                    "type": "EXEC",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "39435ecb_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "f6ab4d7f_dag"
                },
                "variable_list": []
              },
              "name": "post_action_delete"
            }
          ],
          "type": "EXISTING_VM",
          "name": "LoadBalancer1",
          "readiness_probe": {
            "connection_type": "SSH",
            "retries": "5",
            "connection_protocol": "",
            "connection_port": 22,
            "address": "@@{ip_address}@@",
            "delay_secs": "60",
            "disable_readiness_probe": true
          },
          "os_type": "Linux",
          "create_spec": {
            "type": "PROVISION_EXISTING_MACHINE",
            "address": "10.106.86.254"
          },
          "variable_list": []
        }
      ],
      "endpoint_definition_list": [],
      "credential_definition_list": [
        {
          "username": "ntnxcalm",
          "description": "",
          "type": "KEY",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "ntnxcalm",
          "cred_class": "static"
        },
        {
          "username": "calm",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "domainAdminCreds",
          "cred_class": "static"
        },
        {
          "username": "root",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "rootCreds",
          "editables": {
            "secret": true
          },
          "cred_class": "static"
        },
        {
          "username": "calm",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "loadBalancerCreds",
          "cred_class": "static"
        },
        {
          "username": "root",
          "description": "",
          "type": "PASSWORD",
          "secret": {
            "attrs": {
              "is_secret_modified": false,
              "secret_reference": {}
            }
          },
          "name": "nagiosCreds",
          "cred_class": "static"
        }
      ],
      "package_definition_list": [
        {
          "description": "",
          "action_list": [],
          "type": "DEB",
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Service1"
            }
          ],
          "name": "Service_Package",
          "version": "",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Service_Package"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "98492c4b_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "f78c9542_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "98492c4b_dag"
              },
              "variable_list": []
            },
            "type": "",
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "Service_Package"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "04f364a1_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "0b80fc77_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "04f364a1_dag"
              },
              "variable_list": []
            },
            "upgrade_runbook": {}
          },
          "variable_list": []
        },
        {
          "description": "",
          "action_list": [],
          "type": "DEB",
          "service_local_reference_list": [
            {
              "kind": "app_service",
              "name": "Load_Balancer"
            }
          ],
          "name": "LB_Package",
          "version": "",
          "options": {
            "install_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "LB_Package"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "3db6be5d_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "7090d913_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "3db6be5d_dag"
              },
              "variable_list": []
            },
            "type": "",
            "uninstall_runbook": {
              "task_definition_list": [
                {
                  "target_any_local_reference": {
                    "kind": "app_package",
                    "name": "LB_Package"
                  },
                  "retries": "0",
                  "description": "",
                  "inherit_target": false,
                  "child_tasks_local_reference_list": [],
                  "name": "ac6cd9a6_dag",
                  "attrs": {
                    "edges": [],
                    "type": ""
                  },
                  "timeout_secs": "0",
                  "type": "DAG",
                  "variable_list": []
                }
              ],
              "description": "",
              "name": "f9579b95_runbook",
              "main_task_local_reference": {
                "kind": "app_task",
                "name": "ac6cd9a6_dag"
              },
              "variable_list": []
            },
            "upgrade_runbook": {}
          },
          "variable_list": []
        }
      ],
      "app_profile_list": [
        {
          "deployment_create_list": [
            {
              "type": "GREENFIELD",
              "action_list": [],
              "name": "f653d795_deployment",
              "min_replicas": "1",
              "default_replicas": "1",
              "depends_on_list": [],
              "editables": {
                "default_replicas": true
              },
              "published_service_local_reference_list": [],
              "max_replicas": "10",
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "Service_Package"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "Linux8"
              },
              "variable_list": [],
              "description": ""
            },
            {
              "type": "GREENFIELD",
              "action_list": [],
              "name": "8950fc25_deployment",
              "min_replicas": "1",
              "default_replicas": "1",
              "depends_on_list": [],
              "editables": {
                "default_replicas": true
              },
              "published_service_local_reference_list": [],
              "max_replicas": "10",
              "package_local_reference_list": [
                {
                  "kind": "app_package",
                  "name": "LB_Package"
                }
              ],
              "substrate_local_reference": {
                "kind": "app_substrate",
                "name": "LoadBalancer1"
              },
              "variable_list": [],
              "description": ""
            }
          ],
          "environment_reference_list": [],
          "application_url": "",
          "description": "",
          "action_list": [
            {
              "description": "",
              "type": "user",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=Scale Out Application}"
                    ],
                    "name": "664df62c_dag",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "Scale Out Application",
                    "attrs": {
                      "scaling_count": "@@{replicasCount}@@",
                      "type": "",
                      "scaling_type": "SCALEOUT"
                    },
                    "timeout_secs": "0",
                    "type": "SCALING",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "2a955c6e_runbook",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "664df62c_dag"
                },
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "replicasCount",
                    "value": "",
                    "label": "Amount of replicas to be added",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "Scale Out Application"
            },
            {
              "description": "",
              "type": "user",
              "critical": false,
              "runbook": {
                "task_definition_list": [
                  {
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [
                      "@{kind=app_task; name=Scale In Application}"
                    ],
                    "name": "664df62c_dag_cloned_1",
                    "attrs": {
                      "edges": "",
                      "type": ""
                    },
                    "timeout_secs": "0",
                    "type": "DAG",
                    "variable_list": []
                  },
                  {
                    "target_any_local_reference": {
                      "kind": "app_blueprint_deployment",
                      "name": "f653d795_deployment"
                    },
                    "retries": "0",
                    "description": "",
                    "inherit_target": false,
                    "child_tasks_local_reference_list": [],
                    "name": "Scale In Application",
                    "attrs": {
                      "scaling_count": "@@{replicasCount}@@",
                      "type": "",
                      "scaling_type": "SCALEIN"
                    },
                    "timeout_secs": "0",
                    "type": "SCALING",
                    "variable_list": []
                  }
                ],
                "description": "",
                "name": "2a955c6e_runbook_cloned_0",
                "main_task_local_reference": {
                  "kind": "app_task",
                  "name": "664df62c_dag_cloned_1"
                },
                "variable_list": [
                  {
                    "regex": {
                      "should_validate": false,
                      "value": "^[\\d]*$"
                    },
                    "val_type": "INT",
                    "is_mandatory": false,
                    "description": "",
                    "data_type": "BASE",
                    "type": "LOCAL",
                    "name": "replicasCount",
                    "value": "",
                    "label": "Amount of replicas to be deleted",
                    "attrs": {
                      "type": ""
                    },
                    "editables": {
                      "value": true
                    },
                    "is_hidden": false,
                    "options": {
                      "type": "PREDEFINED",
                      "choices": ""
                    }
                  }
                ]
              },
              "name": "Scale In Application"
            }
          ],
          "name": "Linux RF 2",
          "restore_config_list": [],
          "snapshot_config_list": [],
          "patch_list": [],
          "variable_list": [
            {
              "regex": {
                "should_validate": false,
                "value": "^.*$"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "enableNagios",
              "value": "True",
              "label": "Add Virtual Machine into Nagios?",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": [
                  "True",
                  "False"
                ]
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "pcUserPassword",
              "value": "C@lmdip@123",
              "label": "",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "pcUser",
              "value": "david",
              "label": "",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": false
              },
              "is_hidden": true,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "applicationPort",
              "value": "",
              "label": "Application Port",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "virtualServerPort",
              "value": "",
              "label": "Load Balancer Virtual Server Port",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One group per line.\n- Format must be group@domain.example",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "administrativeGroups",
              "value": "",
              "label": "Add additional domain groups administrative permissions.",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One user per line.\n- Format must be user@domain.example",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "administrativeUsers",
              "value": "",
              "label": "Add additional domain users administrative permissions.",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One group per line.\n- Format must be group@domain.example",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "loginGroups",
              "value": "",
              "label": "Add additional domain groups login permissions.",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "- One user per line.\n- Format must be user@domain.example",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "loginUsers",
              "value": "",
              "label": "Add additional domain users login permissions.",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "Do not modify",
              "data_type": "BASE",
              "type": "EXEC_LOCAL",
              "name": "defaultUser",
              "value": "",
              "label": "Default user",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script": "print(\"@@{calm_username}@@\")",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script_type": "static"
                }
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": false,
              "description": "Do not modify",
              "data_type": "BASE",
              "type": "EXEC_LOCAL",
              "name": "projectName",
              "value": "",
              "label": "Calm Project",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script": "print(\"@@{calm_project_name}@@\")",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script_type": "static"
                }
              }
            },
            {
              "regex": {
                "should_validate": false,
                "value": "^(.|\\n)*$"
              },
              "val_type": "MULTILINE_STRING",
              "is_mandatory": false,
              "description": "-  One line per disk.\n",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "extraDisk",
              "value": "",
              "label": "Insert additional virtual disks.",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "BASE",
              "type": "EXEC_LOCAL",
              "name": "networkSelection",
              "value": "",
              "label": "Select Virtual Machine Network",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script": "#script\n#Global Variables\nproject = '@@{calm_project_name}@@'\nclusterSelection = '@@{clusterSelection}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistSelection = []\n\npayload = {\n  \"kind\": \"project\"\n}\npcUser = \"@@{pcUser}@@\"\npcUserPassword = \"@@{pcUserPassword}@@\"\n\n#Global Functions\ndef varToBase64(var):\n    varToString = json.dumps(var, separators=(',', ':'))\n    encoded = base64.b64encode(varToString.encode('ascii'))\n    return encoded\n\n#Main Code\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    api_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n        if ((resp['spec']['cluster_reference']['name']) == clusterSelection):\n            listSelection.append(resp['spec']['name']) \n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n#Return\n#print (varToBase64(result))\nlistSelection = sorted(dict.fromkeys(listSelection))\nprint \",\".join(map(str,listSelection))\n#print ((result))\nexit(0)",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script_type": "static"
                }
              }
            },
            {
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "",
              "data_type": "LIST",
              "type": "EXEC_LOCAL",
              "name": "clusterSelection",
              "value": "",
              "label": "Select Nutanix Cluster",
              "attrs": {
                "type": "LOCAL"
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "EXEC",
                "attrs": {
                  "script": "#script\n#Global Variables\nproject = '@@{calm_project_name}@@'\noffset = 0\nlength = 500\nlistNetwork = []\nlistCluster = []\npayload = {\n  \"kind\": \"project\"\n}\npcUser = \"@@{pcUser}@@\"\npcUserPassword = \"@@{pcUserPassword}@@\"\n\n#Global Functions\n\n#Main Code\napi_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\nheaders = {'Content-Type': 'application/json',  'Accept':'application/json'}\nr = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\nif r.ok:\n    resp = json.loads(r.content)\n    iterations = ((int(resp['metadata']['total_matches'])) / length) + 1\nelse:\n    print \"Post request failed\", r.content\n    exit(1)\nfor iterator in range(iterations): \n    payload = {\n      \"kind\": \"project\",\n      \"length\": length,\n      \"offset\": offset\n    }\n    api_url = 'https://localhost:9440/api/nutanix/v3/projects/list'\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\n    for item in resp[\"entities\"]:\n        if project in item['spec']['name']:\n            for netResource in item['spec']['resources']['subnet_reference_list']:\n                listNetwork.append(netResource['uuid'])\n    offset = offset + length\n\nfor netUuid in listNetwork:\n    api_url = 'https://localhost:9440/api/nutanix/v3/subnets/{}'.format(netUuid)\n    headers = {'Content-Type': 'application/json',  'Accept':'application/json'}\n    r = urlreq(api_url, verb='GET', headers=headers, verify=False, auth='BASIC', user=pcUser, passwd=pcUserPassword)\n    if r.ok:\n        resp = json.loads(r.content)\n        listCluster.append(resp['spec']['cluster_reference']['name'])\n    else:\n        print \"Post request failed\", r.content\n        exit(1)\n\nlistCluster = sorted(dict.fromkeys(listCluster))\n#Return\nprint \",\".join(map(str,listCluster))\nexit(0)",
                  "type": "EXEC",
                  "command_line_args": "",
                  "exit_status": [],
                  "script_type": "static"
                }
              }
            },
            {
              "regex": {
                "should_validate": true,
                "value": "^[a-z]{1,12}$"
              },
              "val_type": "STRING",
              "is_mandatory": true,
              "description": "- Maximum number of characters is twelve. \n- Only lowercase.\n- Numbers are not allowed.",
              "data_type": "BASE",
              "type": "LOCAL",
              "name": "virtualMachinePrefix",
              "value": "",
              "label": "Insert prefix for Virtual Machines",
              "attrs": {
                "type": ""
              },
              "editables": {
                "value": true
              },
              "is_hidden": false,
              "options": {
                "type": "PREDEFINED",
                "choices": []
              }
            }
          ]
        }
      ],
      "published_service_definition_list": [],
      "default_credential_local_reference": {
        "kind": "app_credential",
        "name": "ntnxcalm"
      },
      "type": "USER"
    },
    "name": "Oracle 8 with Load Balancer"
  },
  "api_version": "3.0",
  "metadata": {
    "last_update_time": "1666615978852276",
    "kind": "blueprint",
    "spec_version": 0,
    "creation_time": "1666615978852276",
    "name": "Oracle 8 with Load Balancer"
  }
}
